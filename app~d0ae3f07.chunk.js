(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["app~d0ae3f07"],{

/***/ 0:
/*!*****************************************************************************************************************************!*\
  !*** multi aurelia-webpack-plugin/runtime/empty-entry aurelia-webpack-plugin/runtime/pal-loader-entry aurelia-bootstrapper ***!
  \*****************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! aurelia-webpack-plugin/runtime/empty-entry */"GAND");
__webpack_require__(/*! aurelia-webpack-plugin/runtime/pal-loader-entry */"GmYv");
module.exports = __webpack_require__(/*! aurelia-bootstrapper */"b9nV");


/***/ }),

/***/ "3QiX":
/*!***************************************!*\
  !*** ./src/components/interpreter.js ***!
  \***************************************/
/*! exports provided: Interpreter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Interpreter\", function() { return Interpreter; });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"EVdn\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _stimulusinterpreter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stimulusinterpreter */ \"YqAC\");\n/* harmony import */ var _responseinterpreter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./responseinterpreter */ \"YWhn\");\n/* harmony import */ var _ranking2dinterpreter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ranking2dinterpreter */ \"ROQc\");\n/* harmony import */ var _preprocesor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./preprocesor */ \"MmLu\");\n/* harmony import */ var _dsl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./dsl */ \"UbAQ\");\n\n\n\n\n\n //shuffle randomly the array\n\nArray.prototype.shuffle = function () {\n  var i = this.length;\n  var j;\n  var temp;\n  if (i == 0) return this;\n\n  while (--i) {\n    j = Math.floor(Math.random() * (i + 1));\n    temp = this[i];\n    this[i] = this[j];\n    this[j] = temp;\n  }\n\n  return this;\n}; //make prototype function startsWith - if it does not exist\n\n\nif (typeof String.prototype.startsWith !== 'function') {\n  String.prototype.startsWith = function (str) {\n    return this.slice(0, str.length) == str;\n  };\n}\n\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\nString.prototype.extract = function (subs) {\n  return this.substring(this.indexOf(subs) + subs.length);\n};\n\nString.prototype.contains = function (str) {\n  return this.indexOf(str) !== -1;\n};\n\nvar Interpreter = /*#__PURE__*/function () {\n  function Interpreter(controller) {\n    this.isZvuk = void 0;\n    this.controller = controller; //is used to notify first or last page of test and to control test page flow\n\n    this.currentCursor = 0;\n    this.currentPage = 0;\n    this.maxPages = 0;\n    this.questionPage = 0;\n    this.sliderValues = [];\n    this.testName = '';\n    this.currentTest = '';\n    this.sloupce = false;\n    this.sliderId = 0;\n    this.previoustoken = ''; //holds previous token - for distinguishing states during interpretation\n\n    this.previousrow = ''; //holds previous row\n\n    this.tstate = {}; //holds structure of state variables\n    //keep the last question and values for answer\n\n    this.allowprev = true;\n    this.educational = false;\n    this.highlighted = false;\n    this.eduid = 0;\n    this.eduresults = {}; //new Responses();\n\n    this.resumeid = 0; //id of paused test; for future update\n\n    this.hodnoty = [];\n    this.hodnotySetted = true; //    this.columnnumber = 0;\n\n    this.lastformid = '';\n    this.lastformidescaped = '';\n    this.pausedtestid = 0;\n    this.parovaotazka = false;\n    this.result = new _responseinterpreter__WEBPACK_IMPORTED_MODULE_2__[\"Responseinterpreter\"](this);\n    window.ri = this.result;\n    this.stimul = new _stimulusinterpreter__WEBPACK_IMPORTED_MODULE_1__[\"Stimulusinterpreter\"](this);\n    this.ranking2d = new _ranking2dinterpreter__WEBPACK_IMPORTED_MODULE_3__[\"Ranking2dinterpreter\"](this);\n  }\n\n  Interpreter.extract = function extract(s, subs) {\n    return s.substring(s.indexOf(subs) + subs.length);\n  };\n\n  Interpreter.endsWith = function endsWith(s, suffix) {\n    return s.indexOf(suffix, s.length - suffix.length) !== -1;\n  };\n\n  var _proto = Interpreter.prototype;\n\n  _proto.translateObrazovka = function translateObrazovka(row) {\n    this.result.resetLast();\n    this.sloupce = false;\n    var translatedRow = \"<span class='lefthead'>\" + this.currentPage + '. ' + Interpreter.extract(row, 'screen') + \" </span><span class='righthead'>\" + this.testName + \"</span><p style='clear:both;margin:20px;'></p>\\n\";\n    this.previoustoken = 'screen';\n    return translatedRow;\n  };\n\n  _proto.translateText = function translateText(row) {\n    var output = '';\n    if (this.sloupce) output += \"<tr><td colspan='2'>\";\n    output += '<p>' + Interpreter.extract(row, 'text') + '</p>';\n    if (this.sloupce) output += '</td></tr>';\n    return output;\n  } //used multipletimes\n  ;\n\n  _proto.generateHtmlOtazkaRow = function generateHtmlOtazkaRow(suffix) {\n    this.lastformid = 'q' + this.currentPage + '.' + this.questionPage;\n    this.lastformidescaped = 'q' + this.currentPage + '\\\\\\\\.' + this.questionPage;\n    var mysuffix = '';\n    if (suffix) mysuffix = suffix;\n    return \"<form id='\" + this.lastformid + \"' name='q\" + this.currentPage + '.' + this.questionPage + \"'><fieldset><legend>\" + this.result.lastotazka + mysuffix + ' </legend>';\n  };\n\n  _proto.generateEditHeaderRow = function generateEditHeaderRow() {\n    this.lastformid = 'q' + this.currentPage + '.' + this.questionPage;\n    this.lastformidescaped = 'q' + this.currentPage + '\\\\\\\\.' + this.questionPage;\n    return \"<form id='\" + this.lastformid + \"' name='q\" + this.currentPage + '.' + this.questionPage + \"'><fieldset><legend>\" + this.result.lastotazka + '</legend>';\n  };\n\n  _proto.translateTaskForStimuli = function translateTaskForStimuli(row) {\n    this.parovaotazka = false;\n    this.result.lastotazka = Interpreter.extract(row, 'taskforstimuli '); //adds to the #1 to the question\n\n    this.hodnotySetted = false;\n    this.questionPage++; //var mytable = \"\";\n    //mytable += this.generateHtmlOtazkaRow();\n    //if (this.sloupce) { //make row of table\n    //        var mytable =  + mytable;//  + \"</td>\"; //\n    //}\n\n    return \"<tr><td class='task'>\" + this.generateHtmlOtazkaRow(' #1');\n  }\n  /*\n   *\ttranslates \"task ...\" to the HTML form\n   */\n  ;\n\n  _proto.translateOtazka = function translateOtazka(row) {\n    this.parovaotazka = false;\n    this.result.lastotazka = Interpreter.extract(row, 'task ');\n    this.hodnotySetted = false;\n    this.questionPage++;\n    return this.generateHtmlOtazkaRow();\n  } //mytableend = \"</td>\";\n  //if (columnnumber == 1) mytableend += \"</tr>\";\n  //TODO finish otazka and parovaotazka in table with 2 columns\n\n  /*\n   *\ttranslates \"parovaotazka ... \" to the HTML form with 2 sounds each in 1 column and each row has the same question\n   */\n  ;\n\n  _proto.translateParovaOtazka = function translateParovaOtazka(row) {\n    //lastotazka = row.substring(\"otazka\".length);\n    //hodnotySetted = false;\n    this.parovaotazka = true;\n    this.questionPage++;\n    this.result.lastotazka = Interpreter.extract(row, 'task ');\n    this.lastformid = 'q' + this.currentPage + '.' + this.questionPage;\n    this.lastformidescaped = 'q' + this.currentPage + '\\\\\\\\.' + this.questionPage;\n    return \"<tr><td colspan='2'><form id='\" + this.lastformid + \"'><fieldset><legend>\" + this.result.lastotazka + '</legend>';\n  }\n  /*\n   *\ttranslates \"hondoty ...\" to the opened HTML form, interprets as allowed values to be chosen by user\n   */\n\n  /*function translateHodnoty(rowsplitted) {\n   return translateHodnoty(rowsplitted, true,false);\n   }\n   */\n  ;\n\n  _proto.hashCode = function hashCode(s) {\n    return s.split('').reduce(function (a, b) {\n      a = (a << 5) - a + b.charCodeAt(0);\n      return a & a;\n    }, 0);\n  };\n\n  _proto.generateHtmlRow = function generateHtmlRow(rowsplitted, radiobuttons, taskindex) {\n    var translatedRow = '';\n\n    for (var j = 1; j < rowsplitted.length; j++) {\n      var mybr = '<br />';\n      var myvalue = rowsplitted[j];\n      var myid = this.hashCode(this.lastformid + 'v' + myvalue);\n      if (this.parovaotazka || this.valuesonrow) mybr = '&nbsp; &nbsp;'; //don't make new line in parova otazka or when values on row\n\n      if (radiobuttons) {\n        translatedRow += \"<input id='\" + myid + \"'type='radio' name='otazka' value='\" + myvalue + \"' onclick='ri.setAnswer(\" + this.currentPage + ',' + this.questionPage + \",this)'/><label for='\" + myid + \"' class='answer'><span><span></span></span>\" + myvalue + '</label>' + mybr;\n      } else {\n        translatedRow += \"<input id='\" + myid + \"' type='checkbox' name='otazka' value='\" + myvalue + \"' onclick='setCheckAnswer(\" + this.currentPage + ',' + this.questionPage + \",this)'/><label for='\" + myid + \"'span class='answer'><span></span>\" + myvalue + '</label>' + mybr;\n      }\n\n      this.result.setDefaultAnswer(this.currentPage, this.questionPage, taskindex);\n    }\n\n    return translatedRow;\n  };\n\n  _proto.translateHodnoty = function translateHodnoty(rowsplitted) {\n    var radiobuttons = !_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isCheckboxvalues(rowsplitted[0]);\n    this.valuesonrow = _dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isCheckboxvaluesOnRow(rowsplitted[0]) || _dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isValuesOnRow(rowsplitted[0]);\n    var translatedRow = '';\n    var taskindex = '';\n    if (this.sloupce && !this.parovaotazka) taskindex = ' #1';\n    translatedRow += this.generateHtmlRow(rowsplitted, radiobuttons, taskindex);\n    translatedRow += '</fieldset></form>\\n';\n\n    if (this.sloupce) //coppies the same task and values to the second collumn of the pairs\n      {\n        if (this.parovaotazka) {\n          translatedRow += '</td></tr>';\n        } else {\n          //close the column, duplicate question to second column and close the row\n          this.questionPage++;\n          taskindex = ' #2';\n          translatedRow += \"</fieldset></form></td><td class='task'>\" + this.generateHtmlOtazkaRow(taskindex); //fix bug#249 added closing form tag\n\n          translatedRow += this.generateHtmlRow(rowsplitted, radiobuttons, taskindex);\n          translatedRow += '</fieldset></form></td></tr>';\n        }\n      } //will remember the values of last question - it is not needed to repeat them\n\n\n    this.hodnoty[this.result.lastotazka] = rowsplitted;\n    this.hodnotySetted = true;\n    return translatedRow;\n  };\n\n  _proto.splitValues = function splitValues(row) {\n    var re1 = /[ ;,]+/; // fix feature bug #240, coma ',' is used to separate interval numbers\n\n    if (!row.contains('\"')) return row.split(re1);\n    var rowsplitted = [];\n    var quote = false;\n    var currentitem = '';\n\n    for (var i = 0; i < row.length; i++) {\n      if (!quote) //normal split\n        {\n          if (/[\\\"]/.test(row[i])) quote = true;else if (/[, ;]/.test(row[i])) {\n            if (currentitem.length > 0) rowsplitted.push(currentitem);\n            currentitem = '';\n          } else {\n            currentitem += row[i];\n          }\n        } else {\n        //quotes add everything between quotes\n        if (/[\\\"]/.test(row[i])) {\n          rowsplitted.push(currentitem);\n          currentitem = '';\n          quote = false;\n        } else {\n          currentitem += row[i];\n        }\n      }\n    }\n\n    if (currentitem.length > 0) rowsplitted.push(currentitem);\n    return rowsplitted;\n  };\n\n  _proto.translateScale = function translateScale(previousrow, rowsplitted) {\n    if (this.sloupce && !this.parovaotazka) {\n      //makes two coppies of the task for each stimulus in pair\n      var translated = '\\n' + this.translateSkalovaci() + this.translateSkalovaciHodnoty(rowsplitted, ' #1');\n      this.questionPage++;\n      translated += '</fieldset></form></td><td>' + this.generateHtmlOtazkaRow(' #2') + this.translateSkalovaci() + this.translateSkalovaciHodnoty(rowsplitted, ' #2') + '</fieldset></form></tr></td>\\n';\n      return translated;\n    }\n\n    return this.translateSkalovaci(previousrow) + this.translateSkalovaciHodnoty(rowsplitted);\n  };\n\n  _proto.translateVAScale = function translateVAScale(previousrow, rowsplitted) {\n    if (this.sloupce && !this.parovaotazka) {\n      //makes two coppies of the task for each stimulus in pair\n      var translated = '\\n' + this.translateSkalovaci() + this.translateSkalovaciVAHodnoty(rowsplitted, ' #1');\n      this.questionPage++;\n      translated += '</fieldset></form></td><td>' + this.generateHtmlOtazkaRow(' #2') + this.translateSkalovaci() + this.translateSkalovaciVAHodnoty(rowsplitted, ' #2') + '</fieldset></form></tr></td>\\n';\n      return translated;\n    }\n\n    return this.translateSkalovaci(previousrow) + this.translateSkalovaciVAHodnoty(rowsplitted);\n  }\n  /*  translateSkalovaciHodnoty(rowsplitted) {\n    return this.translateSkalovaciHodnoty(rowsplitted,\"\");\n  };\n  */\n  ;\n\n  _proto.translateSkalovaciHodnoty = function translateSkalovaciHodnoty(rowsplitted, taskindex) {\n    if (taskindex === void 0) {\n      taskindex = '';\n    }\n\n    //moved to translateSkalovaci questionPage++; //increase index of answer\n    this.result.setDefaultAnswer(this.currentPage, this.questionPage, taskindex); //fix bug # 198\n    //var rowsplitted = splitValues(row);\n\n    var translatedRow = '';\n    this.sliderValues[this.sliderId] = rowsplitted.slice(1);\n    translatedRow += '<script>Interpreter.makeSlider(0, 0,' + (this.sliderValues[this.sliderId].length - 1) + ', 1, ' + this.sliderId + ',' + this.questionPage + ');</script>'; //    if (this.sloupce)\n    //        if (this.parovaotazka) {\n    //            translatedRow += \"</td></tr>\";\n\n    /*        } else {\n                this.questionPage++;\n                this.sliderId++;\n                this.sliderValues[this.sliderId] = rowsplitted.slice(1);\n                this.result.setDefaultAnswer(this.currentPage, this.questionPage); //fix bug # 198\n                translatedRow += \"<script>makeSlider(0, 0,\" + (this.sliderValues[this.sliderId].length-1) + \", 1, \" + this.sliderId + \",\" + this.questionPage + \");</script>\";\n            }*/\n    //} else {\n    //    this.questionPage++;\n    //    this.sliderId++;\n    //    this.result.setDefaultAnswer(this.currentPage, this.questionPage); //fix bug # 198\n    //    //var rowsplitted = splitValues(row);\n    //    //translatedRow = \"\";\n    //    this.sliderValues[this.sliderId] = rowsplitted.slice(1);\n    //    translatedRow += \"<td><tr><script>makeSlider(0, 0,\" + (this.sliderValues[this.sliderId].length-1) + \", 1, \" + this.sliderId + \",\" + this.questionPage + \");</script>\";\n    //}\n\n    return translatedRow;\n  }\n  /* translateSkalovaciVAHodnoty(rowsplitted) {\n    return this.translateSkalovaciVAHodnoty(rowsplitted,\"\");\n  };\n   */\n  ;\n\n  _proto.translateSkalovaciVAHodnoty = function translateSkalovaciVAHodnoty(rowsplitted, taskindex) {\n    if (taskindex === void 0) {\n      taskindex = '';\n    }\n\n    //moved to translateSkalovaci questionPage++; //increase index of answer\n    this.result.setDefaultAnswer(this.currentPage, this.questionPage, taskindex); //fix bug #198\n\n    var translatedRow = '';\n    var mySliderValues = []; //console.log(\"translateSkalocavi rowsplitted:\");\n    //console.log(rowsplitted)\n\n    /*for (var i = 3; i < rowsplitted.length;i=i+2 ) {\n     mySliderValues[parseInt(rowsplitted[i])]= rowsplitted[i+1];\n     }\n     sliderValues[sliderId] = mySliderValues;\n     */\n\n    if (rowsplitted[2].indexOf('(') > 0) {\n      //fix bug #269 scale 0 100(0.5) will be translated as 0 100 with step 0.5\n      var maxstep = rowsplitted[2].split(/[\\(\\)]/); //console.log(\"maxstep\");\n      //console.log(maxstep)\n\n      for (var i = 3; i < rowsplitted.length; i = i + 2) {\n        //mySliderValues[Math.floor(parseInt(rowsplitted[i])/maxstep[1] - rowsplitted[1])] = rowsplitted[i + 1];//fix bug #269 add correct indices to ticks -100 100(0.5) will make -200 200\n        mySliderValues[parseFloat(rowsplitted[i])] = rowsplitted[i + 1]; //fix bug #269 new version of labeled, changed to parsefloat\n        //mySliderValues[rowsplitted[i]] = rowsplitted[i + 1]; //fix bug #minus float values not determined??\n      }\n\n      this.sliderValues[this.sliderId] = mySliderValues;\n      translatedRow += '<script>Interpreter.makeVASlider(' + this.sliderId + ',' + rowsplitted[1] + ',' + maxstep[0] + ', ' + this.questionPage + ',' + maxstep[1] + ');</script>';\n    } else {\n      for (i = 3; i < rowsplitted.length; i = i + 2) {\n        mySliderValues[parseInt(rowsplitted[i])] = rowsplitted[i + 1];\n      }\n\n      this.sliderValues[this.sliderId] = mySliderValues;\n      translatedRow += '<script>Interpreter.makeVASlider(' + this.sliderId + ',' + rowsplitted[1] + ',' + rowsplitted[2] + ', ' + this.questionPage + ');</script>';\n    } //console.log(\"va hodnoty js:\" + translatedRow);\n\n\n    return translatedRow;\n  };\n\n  _proto.translateSkalovaci = function translateSkalovaci(row) {\n    var translatedRow = ''; //\"<br />\";\n\n    this.sliderId++;\n    if (row) this.result.lastotazka = Interpreter.extract(row, 'task '); //fix bug #198\n    //move to task questionPage++; //moved from skalovaci??hodnoty\n    //fix #212    translatedRow += \"<p id='q\" + currentPage + \".\" + questionPage + \"' class='label'><input class='sliderlabel' readonly='true' type='text' id='slider\" + sliderId + \"Value'></p>\";\n\n    translatedRow += \"<p class='label'><input class='sliderlabel' readonly='true' type='text' id='slider\" + this.sliderId + \"Value'></p>\";\n    translatedRow += \"<div id='slider\" + this.sliderId + \"'></div>\"; //translatedRow += \"<br /><br />\";\n    //console.log(\"translateSkalovaci \" + sliderId);\n    //move it to skalovacihodnoty\n\n    return translatedRow;\n  };\n\n  _proto.translatePopis = function translatePopis(row) {\n    var taskindex = '';\n    if (this.sloupce && !this.parovaotazka) taskindex = ' #1';\n    if (Interpreter.endsWith(row, '?')) this.result.setDefaultOptionalAnswer(this.currentPage, this.questionPage, taskindex);else this.result.setDefaultAnswer(this.currentPage, this.questionPage, taskindex);\n    var translatedrow = \"<textarea rows='1' onkeyup='window.ri.setAnswer(\" + this.currentPage + ',' + this.questionPage + \",this)'></textarea>\";\n\n    if (this.sloupce) {\n      if (this.parovaotazka) {\n        translatedrow += '</fieldset></form></td></tr>';\n      } else {\n        this.questionPage++;\n        taskindex = ' #2';\n        translatedrow += '</fieldset></form></td><td>' + this.generateHtmlOtazkaRow(taskindex); //fix bug#249 added closing form tag\n\n        if (Interpreter.endsWith(row, '?')) this.result.setDefaultOptionalAnswer(this.currentPage, this.questionPage, ' #2');else this.result.setDefaultAnswer(this.currentPage, this.questionPage, taskindex);\n        translatedrow += \"<textarea rows='1' onkeyup='window.ri.setAnswer(\" + this.currentPage + ',' + this.questionPage + \",this)'></textarea>\";\n      }\n    }\n\n    return translatedrow;\n  } //if the question is not closed put values from previously defined question with values\n  ;\n\n  _proto.closeOtazka = function closeOtazka() {\n    if (!this.hodnotySetted) {\n      //console.log(\"closeOtazka() last values not set\");\n      //console.log(hodnoty);\n      //console.log(lastotazka);\\\n      this.hodnotySetted = true;\n\n      if (this.hodnoty[this.result.lastotazka]) {\n        //console.log(\"setting from last values\");\n        return this.translateHodnoty(this.hodnoty[this.result.lastotazka]);\n      }\n\n      return '</fieldset></form>\\n';\n    }\n\n    return '';\n  }\n  /*\n   *\t\"sloupce\" command initiate the HTML output to be generate into the HTML table with 2 collumns\n   */\n  ;\n\n  _proto.translateSloupce = function translateSloupce() {\n    if (!this.sloupce) {\n      this.sloupce = true; //return \"<table><thead><tr><th class='tablefirst'/><th class='tablesecond'/></thead><tbody><tr>\";\n\n      return '<table><tr>';\n    }\n\n    return '';\n  };\n\n  _proto.closeSloupce = function closeSloupce() {\n    if (this.sloupce) {\n      this.sloupce = false;\n      return '</tr></tbody></table>';\n    }\n\n    return '';\n  } //select generates select menu\n  ;\n\n  _proto.translateSelect = function translateSelect(rowsplitted) {\n    //fix bug ... indicate that the element was answered by changing the background\n    var row = \"<select onclick='this.style.background=\\\"lightblue\\\"; window.ri.setAnswer(\" + this.currentPage + ',' + this.questionPage + \",this);' onchange='window.ri.setAnswer(\" + this.currentPage + ',' + this.questionPage + \",this);'>\";\n\n    for (var i = 1; i < rowsplitted.length; i++) {\n      row += \"<option value='\" + rowsplitted[i] + \"'>\" + rowsplitted[i] + '</option>';\n    }\n\n    row += '</select>';\n    this.result.setDefaultAnswer(this.currentPage, this.questionPage); //fix bug # 198\n\n    return row;\n  };\n\n  _proto.translateStyle = function translateStyle(previoustoken, row) {\n    var firsttoken = row.trim().split(' ', 2)[0]; //gets #style or #stylebutton or #styleform\n\n    var styledefinition = Interpreter.extract(row, firsttoken); //extract the previously obtained token\n\n    if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isObrazovka(previoustoken)) //style of body e.g.:max-width:40em\n      {\n        return \"\\n<script>document.body.style='\" + styledefinition + \"'</script>\\n\";\n      }\n\n    if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isZvuk(previoustoken)) //style of all stimulus attribute e.g.: width:10%;\n      {\n        return \"\\n<script>$('.stimulus').attr('style','\" + styledefinition + \"');</script>\\n\";\n      }\n\n    if (previoustoken === 'button') {\n      return \"\\n<script>$('.sound-button').attr('style','\" + styledefinition + \"');</script>\\n\";\n    }\n\n    if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isOtazka(previoustoken)) {\n      return \"\\n<script>$('.task').attr('style','\" + styledefinition + \"');</script>\\n\";\n    }\n\n    if (previoustoken === 'form') {\n      return '\\n<script>' + //\"console.log('\" +lastformidescaped+\"');\"+ //logs\n      \"$('#\" + this.lastformidescaped + \"').attr('style','\" + styledefinition + \"');\" + //sets style for the form element with last formid\n      \"$('#\" + this.lastformidescaped + \" ~ form').attr('style','\" + styledefinition + \"');\" + //and sets style for all other sibling forms\n      '</script>\\n';\n    } //fix #212, 248\n    //return \"\\n<script>$('.task').children('form').attr('style','\" + styledefinition + \"');</script>\\n\";\n\n\n    return '';\n  };\n\n  _proto.translateType = function translateType(row) {\n    //translates type - educational mode, previous button allowed/notallowed etc.\n    if (row.contains('nopreviousbutton')) this.allowprev = false;\n    if (row.contains('yespreviousbutton')) this.allowprev = true;\n    if (row.contains('educational')) this.educational = true;\n\n    if (this.educational) {\n      this.eduid = row.match(/educational\\(([\\d]+)\\)/)[1];\n      if (this.eduid !== '') this.getEduResults();\n    } //indexOf(\"educational\")+1\n\n  };\n\n  _proto.getEduResults = function getEduResults() {\n    $.getJSON(PsychoResultIdUrl + this.eduid, null, function (data) {\n      //console.log(\"retrieved educational raw results\");\n      //console.log(data);\n      this.eduresults = {};\n      data[0].resultItems.forEach(function (item) {\n        //console.log(\"parsing item:\");\n        //console.log(item);\n        var itemobj = RepairJSONResultItem(item);\n        if (!this.eduresults[itemobj.case]) this.eduresults[itemobj.case] = {};\n        if (!this.eduresults[itemobj.case].answer) this.eduresults[itemobj.case].answer = [];\n        this.eduresults[itemobj.case].answer[itemobj.question.trim()] = itemobj.answer;\n        if (!this.eduresults[itemobj.case].note) this.eduresults[itemobj.case].note = [];\n        if (!itemobj.note) this.eduresults[itemobj.case].note[itemobj.question.trim()] = itemobj.date; //TODO new collumn for note, current workaround, note into date collumn\n        else this.eduresults[itemobj.case].note[itemobj.question.trim()] = itemobj.note;\n      }); //console.log(\"retrieved educational results\");\n      //console.log(eduresults);\n    });\n  } //translate one row\n  ;\n\n  _proto.translateTestItems = function translateTestItems(row) {\n    var translatedRow = '';\n    row = row.trim(); //console.log('test item:');\n    //console.log(row);\n\n    /*var re1 = /[ ;,]+/; // fix feature bug #240, coma ',' is used to separate interval numbers\n     var rowsplitted = row.split(re1);*/\n\n    var rowsplitted = this.splitValues(row); //fix bug, comas and spaces in quotes\n\n    if (rowsplitted.length === 0) return translatedRow;\n    if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isZvuk(rowsplitted[0])) translatedRow += this.stimul.translateZvuk(rowsplitted, this.tstate.poradivnticinahodne, this.result, this.sloupce);else if (!_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].startsWithComment(rowsplitted[0])) translatedRow += this.stimul.translateNonZvuk(row); //do separation between stimuli and other elements\n\n    if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isZvuk(rowsplitted[0])) {}\n    /* already done in previous call, no action*/\n    //else if (Dsl.isVideo(rowsplitted[0])) translatedRow += this.stimuli.translateVideo(rowsplitted); //deprecated\n    else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isText(rowsplitted[0])) translatedRow += this.translateText(row);else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isSloupce(rowsplitted[0])) translatedRow += this.translateSloupce();\n      /*else if (Dsl.isParovaOtazka(rowsplitted[0])) { //priority over Dsl.isOtazka\n          translatedRow += this.closeOtazka();\n          translatedRow += this.translateParovaOtazka(row);\n      } //else if (Dsl.isSkalovaci(rowsplitted[0])) translatedRow += translateSkalovaci(row); //priority over Dsl.isOtazka\n      */\n      else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isTaskForStimuli(rowsplitted[0])) {\n          translatedRow += this.closeOtazka();\n          if (this.sloupce) translatedRow += this.translateTaskForStimuli(row);else Console.log(\"Warning: unexpected token 'taskforstimuli' not in pair \");\n        } else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isOtazka(rowsplitted[0])) {\n          translatedRow += this.closeOtazka();\n          if (this.sloupce) translatedRow += this.translateParovaOtazka(row);else translatedRow += this.translateOtazka(row);\n        } else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isPanel(rowsplitted[0])) {\n          translatedRow += this.closeOtazka();\n        } else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isHodnoty(rowsplitted[0]) || _dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isCheckboxvalues(rowsplitted[0])) translatedRow += this.translateHodnoty(rowsplitted); //will match also valuesonrow and checkboxvaluesonrow\n        // move decDsl.ision on type of hodnoty on function translateValues else if (Dsl.isHodnoty(rowsplitted[0])) translatedRow += translateHodnoty(rowsplitted,true);\n        //else if (Dsl.isCheckboxvalues(rowsplitted[0])) translatedRow += translateHodnoty(rowsplitted, false);\n        else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isSkalovaciHodnoty(rowsplitted[0])) translatedRow += this.translateScale(this.previousrow, rowsplitted);else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isSkala(rowsplitted[0])) translatedRow += this.translateVAScale(this.previousrow, rowsplitted);else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isPopis(rowsplitted[0])) translatedRow += this.translatePopis(row);else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isSerad2d(rowsplitted[0])) translatedRow += this.ranking2d.translateSerad2d(row.slice('ranking2d'.length), this.stimul.audioid, this.currentPage, this.questionPage++);else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isSelect(rowsplitted[0])) translatedRow += this.translateSelect(rowsplitted);else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isStyleButton(rowsplitted[0])) translatedRow += this.translateStyle('button', row);else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isStyleForm(rowsplitted[0])) translatedRow += this.translateStyle('form', row);else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isStyle(rowsplitted[0])) translatedRow += this.translateStyle(this.previoustoken, row);else if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isType(rowsplitted[0])) this.translateType(row);\n\n    this.previoustoken = rowsplitted[0];\n    if (!_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].startsWithComment(rowsplitted[0])) this.previousrow = row;\n    return translatedRow;\n  };\n\n  _proto.footerPageNumber = function footerPageNumber() {\n    return \"<p align='center' class='footer'>Obrazovka \" + this.currentPage + ' z celkem ' + this.maxPages + '.</p>';\n  } //shuffle randomly the array\n  ;\n\n  _proto.shuffle = function shuffle() {\n    var i = this.length;\n    var j;\n    var temp;\n    if (i == 0) return this;\n\n    while (--i) {\n      j = Math.floor(Math.random() * (i + 1));\n      temp = this[i];\n      this[i] = this[j];\n      this[j] = temp;\n    }\n\n    return this;\n  }\n  /*\n   *\tthis script will preprocess the test - make combination of screens etc. before it is interpretted\n   * e.g. \"parovytest\", there are made pairs from the sounds within this test and generated screens,\n   *      for 2 sound there is 1 pair, for 3 sounds there are 3 pair combination [1,2][1,3][2,3], ...\n   */\n  //    this.prep = new Preprocesor(this); //backward reference\n  ;\n\n  //reset all values\n  _proto.initTest = function initTest(currentRawTest) {\n    /*this.tstate.poradivnticinahodne = false;\n    this.tstate.poradizvukunahodne = false;\n    this.tstate.poradicasenahodne = false;*/\n    this.educational = false;\n    this.highlighted = false;\n    this.prep = new _preprocesor__WEBPACK_IMPORTED_MODULE_4__[\"Preprocesor\"](this);\n    this.currentTest = this.prep.preprocessTest(currentRawTest); //preprocess from currentRawTest to currentTest\n\n    this.tstate = this.prep.tstate; //console.log(currentTest);\n\n    this.maxPages = this.currentTest.match(/\\n[\\s]*screen/ig).length;\n    this.testName = Interpreter.extract(this.currentTest.match(/test .*/i).toString(), 'test ');\n    this.currentCursor = 0;\n    this.currentPage = 0;\n    this.resumeid = 0;\n    this.result.answers = []; //reset answers TODO check\n\n    this.sliderValues = []; //reset slider values\n  };\n\n  _proto.resumeTest = function resumeTest(currentRawTest, page, answers, resumeid) {\n    this.educational = false; //TODO persist\n\n    this.highlighted = false; //TODO persist\n\n    this.sliderValues = []; //TODO persist?\n\n    this.resumeid = resumeid;\n    this.prep = new _preprocesor__WEBPACK_IMPORTED_MODULE_4__[\"Preprocesor\"](this);\n    this.currentTest = currentRawTest; //a;ready preprocessed\n\n    this.tstate = this.prep.tstate; //console.log(currentTest);\n\n    this.maxPages = this.currentTest.match(/\\n[\\s]*screen/ig).length;\n    this.testName = Interpreter.extract(this.currentTest.match(/test .*/i).toString(), 'test ');\n    this.currentCursor = 0;\n    this.currentPage = 0; //    this.currentPage = page; //persistent\n\n    if (page > 0) {\n      page--;\n\n      while (this.currentPage < page) {\n        this.nextpage();\n      }\n    } else {\n      console.log('weird paused at page 0; or 1;');\n    }\n\n    this.result.answers = answers; //reset answers\n  };\n\n  _proto.findPreviousObrazovka = function findPreviousObrazovka(testDSL) {\n    var splitted = testDSL.split('\\n');\n    this.currentCursor--;\n    this.currentPage -= 2;\n\n    while (this.currentCursor > 0 && !splitted[this.currentCursor].startsWith('screen')) {\n      this.currentCursor--;\n    }\n\n    if (this.currentCursor > 0) this.currentCursor--; //step over the curent item\n\n    while (this.currentCursor > 0 && !splitted[this.currentCursor].startsWith('screen')) {\n      this.currentCursor--;\n    }\n  }\n  /*nextpage(){\n    return \"<p>some demo test</p>\";\n  }*/\n  ;\n\n  Interpreter.makeSlider = function makeSlider(sliderVal, sliderMin, sliderMax, sliderStep, sliderId, myQuestionPage) {\n    //console.log(\"slider\");\n    this.result.setDefaultAnswer(\n    /*parser*/\n    this.currentPage, myQuestionPage);\n    var myslider = $('#slider' + sliderId);\n    myslider.labeledslider({\n      value: sliderVal,\n      min: sliderMin,\n      max: sliderMax,\n      step: sliderStep,\n      slide: function slide(event, ui) {\n        $('#slider' + sliderId + 'Value').val(\n        /*parser*/\n        this.sliderValues[sliderId][ui.value]); //ui.handle.style.backgroundColor = \"lightblue\";//css(\"background-color\",\"lightblue\"); jquery ui\n\n        this.style.background = 'lightblue';\n        window.ri.setAnswer(\n        /*parser*/\n        this.currentPage, myQuestionPage,\n        /*parser*/\n        this.sliderValues[sliderId][ui.value]);\n      },\n      start: function start(event, ui) {\n        $('#slider' + sliderId + 'Value').val(\n        /*parser*/\n        this.sliderValues[\n        /*parser*/\n        this.sliderId][ui.value]); //ui.handle.style.backgroundColor = \"lightblue\";\n\n        this.style.background = 'lightblue';\n        window.ri.setAnswer(\n        /*parser*/\n        this.currentPage, myQuestionPage,\n        /*parser*/\n        this.sliderValues[\n        /*parser*/\n        this.sliderId][ui.value]);\n      },\n      tickLabels:\n      /*parser*/\n      this.sliderValues[sliderId]\n    });\n    var width = myslider.width() / (\n    /*parser*/\n    this.sliderValues[\n    /*parser*/\n    this.sliderId].length - 1);\n  };\n\n  Interpreter.makeVASlider = function makeVASlider(sliderId, sliderMin, sliderMax, myQuestionPage, sliderStep) {\n    if (sliderStep === void 0) {\n      sliderStep = 1;\n    }\n\n    //console.log(\"VAslider\");\n    this.result.setDefaultAnswer(\n    /*parser*/\n    this.currentPage, myQuestionPage);\n    var sliderKeysstr = Object.keys(\n    /*parser*/\n    this.sliderValues[sliderId]);\n    var sliderKeys = sliderKeysstr.map(Number); //fix bug #269 new version of labeledslider requires numbers\n\n    $('#slider' + sliderId).labeledslider({\n      value: sliderMin,\n      min: sliderMin,\n      max: sliderMax,\n      step: sliderStep,\n      slide: function slide(event, ui) {\n        $('#slider' + sliderId + 'Value').val(ui.value);\n        this.style.background = 'lightblue';\n        window.ri.setAnswer(\n        /*parser*/\n        this.currentPage, myQuestionPage, ui.value);\n      },\n      start: function start(event, ui) {\n        $('#slider' + sliderId + 'Value').val(ui.value);\n        this.style.background = 'lightblue'; //$(\"#slider\" + sliderId).css(\"background\",\"lightblue\");\n\n        window.ri.setAnswer(\n        /*parser*/\n        this.currentPage, myQuestionPage, ui.value);\n      },\n      //tickInterval:sliderStep,\n      tickArray: sliderKeys,\n      tickLabels:\n      /*parser*/\n      this.sliderValues[sliderId]\n    });\n  };\n\n  _proto.starttest = function starttest() {\n    $('#tab2help').hide(); //.fadeOut(500); TODO html specific\n\n    var currentRawTest = this.selectedTestDefinition;\n    if (typeof this.editor !== 'undefined') currentRawTest = this.editor.getValue(); //    parser = new Interpreter();\n\n    this.initTest(currentRawTest);\n    this.hideNonAnswered();\n    this.controller.preview.innerHTML = this.nextpage(); ///*parser*/this.currentTest);\n    //console.log(this.controller.preview.innerHTML);\n\n    this.evaluateScripts();\n  };\n\n  _proto.resumetest = function resumetest() {\n    $('#tab2help').hide(); //.fadeOut(500); TODO html specific\n    //var currentRawTest = selectedTestDefinition;\n    //if (typeof editor !== \"undefined\") currentRawTest = editor.getValue();\n    //parser = new Interpreter();\n\n    this.resumeTest(this.selectedTestDefinition, this.selectedTestScreennumber, this.selectedTestAnswers, this.selectedTestId);\n    this.hideNonAnswered();\n    this.controller.preview.innerHTML = this.nextpage(); ///*parser*/this.currentTest);\n    //console.log(this.controller.preview.innerHTML);\n\n    this.evaluateScripts();\n  };\n\n  _proto.nextpage = function nextpage() {\n    var testDSL = this.currentTest;\n    this.currentPage++;\n    this.questionPage = 0;\n    this.stimul.audioid = 0; //reset audioid\n\n    console.log('next page', this.currentPage);\n\n    if (this.currentPage >= this.maxPages) {\n      if (this.currentPage === 1) this.controller.lastNoPrevPage();else this.controller.lastPage();\n    } else if (this.currentPage === 1) this.controller.firstPage();else this.controller.middlePage();\n\n    var translatedheader = '';\n    var splitted = testDSL.split('\\n'); //go from cursor to the first \"screen\" which will be start of interpretation\n\n    while (\n    /*parser*/\n    this.currentCursor < splitted.length && !_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isObrazovka(splitted[\n    /*parser*/\n    this.currentCursor])) {\n      /*parser*/\n      this.currentCursor++;\n    }\n\n    this.nt = []; //translate obrazovka row\n\n    if (\n    /*parser*/\n    this.currentCursor < splitted.length) {\n      translatedheader +=\n      /*parser*/\n      this.translateObrazovka(splitted[\n      /*parser*/\n      this.currentCursor]);\n      this.nt.push(this.newTrans(splitted[this.currentCursor]));\n      /*parser*/\n\n      this.currentCursor++;\n    } //interpret everything until next 'obrazovka or end'\n\n\n    while (\n    /*parser*/\n    this.currentCursor < splitted.length && !_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isObrazovka(splitted[\n    /*parser*/\n    this.currentCursor])) {\n      translatedheader +=\n      /*parser*/\n      this.translateTestItems(splitted[\n      /*parser*/\n      this.currentCursor]);\n      this.nt.push(this.newTrans(splitted[this.currentCursor]));\n      /*parser*/\n\n      this.currentCursor++;\n    } //console.log(\"translated 0:\" + translatedheader);\n\n\n    translatedheader +=\n    /*parser*/\n    this.closeOtazka(); //close open questions without values\n\n    translatedheader +=\n    /*parser*/\n    this.closeSloupce();\n    translatedheader +=\n    /*parser*/\n    this.stimul.closeQuestionDiv();\n    translatedheader +=\n    /*parser*/\n    this.footerPageNumber();\n    console.log('translated header:', translatedheader);\n    return translatedheader;\n  };\n\n  _proto.traversetest = function traversetest(definition, callback, errorcallback) {\n    /*parser*/\n    this.initTest(definition);\n\n    while (\n    /*parser*/\n    this.currentPage <\n    /*parser*/\n    this.maxPages) {\n      this.nextpage();\n    } //evaluateScripts(); //there are no scripts, only innerhtml\n\n\n    this.postAnswers(callback, errorcallback);\n  } //TODO check if needed - remove\n  ;\n\n  _proto.cleartest = function cleartest() {\n    this.controller.preview.innerHTML = ''; //this.showButtonsStart();\n\n    this.controller.startPage();\n  } //TODO check if needed - remove\n  ;\n\n  _proto.previoustestitem = function previoustestitem() {\n    /*parser*/\n    this.findPreviousObrazovka(\n    /*parser*/\n    this.currentTest);\n    this.controller.preview.innerHTML = this.nextpage();\n    this.evaluateScripts();\n  } //TODO violation of separation, mixed parser-interpreter and content\n  ;\n\n  _proto.checkAnswersInScreen = function checkAnswersInScreen() {\n    var foundNA = false;\n    var item;\n\n    if (\n    /*parser*/\n    this.result.answers[\n    /*parser*/\n    this.currentPage - 1]) {\n      for (var i = 0; i <\n      /*parser*/\n      this.result.answers[\n      /*parser*/\n      this.currentPage - 1].length; i++) {\n        if (\n        /*parser*/\n        this.result.answers[\n        /*parser*/\n        this.currentPage - 1][i] &&\n        /*parser*/\n        this.result.answers[\n        /*parser*/\n        this.currentPage - 1][i].answer) {\n          if (\n          /*parser*/\n          this.result.answers[\n          /*parser*/\n          this.currentPage - 1][i].answer === 'N/A') {\n            //highlight - /*parser*/this.result\n            item = document.getElementById('q' +\n            /*parser*/\n            this.currentPage + '.' + (i + 1)).getElementsByTagName('fieldset'); //document.getElementById('q' + /*parser*/this.currentPage + '.' + (i + 1));\n\n            if (!item.length) item = document.getElementById('q' +\n            /*parser*/\n            this.currentPage + '\\\\.' + (i + 1)); //if (item.length)\n\n            item[0].style.backgroundColor = '#ffdddd';\n            foundNA = true;\n          } else {\n            console.log('checkAnswersinscreen: ' + 'q' +\n            /*parser*/\n            this.currentPage + '.' + (i + 1));\n            item = document.getElementById('q' +\n            /*parser*/\n            this.currentPage + '.' + (i + 1)).getElementsByTagName('fieldset'); //document.getElementById('q' + /*parser*/this.currentPage + '.' + (i + 1));\n\n            if (!item.length) item = document.getElementById('q' +\n            /*parser*/\n            this.currentPage + '\\\\.' + (i + 1));\n            if (item.length) item[0].style.backgroundColor = '#ffffff'; //if (item) item.style.backgroundColor = \"#ffffff\";\n          }\n        }\n      }\n    }\n\n    return foundNA;\n  }\n  /* returns true if all questions are answered, false if at least one answer is not*/\n  ;\n\n  _proto.checkAnswers = function checkAnswers() {\n    //for each answers[pagenum-1] answer!= N/A\n    //var foundNA = false;\n    var dontcheckanswers = document.getElementById('dontcheckanswers');\n    if (dontcheckanswers && dontcheckanswers.prop('checked')) return true; //don't check in editor mode\n\n    var foundNA = this.checkAnswersInScreen();\n    return !foundNA;\n  };\n\n  _proto.highlightNonAnswered = function highlightNonAnswered() {\n    var item = document.getElementById('#notification');\n    item.css('background-color', '#fdd');\n    item.html(' Pro pokračování, prosím, vyplňte vyznačené otázky!');\n  };\n\n  _proto.hideNonAnswered = function hideNonAnswered() {\n    document.getElementById('notification').innerHTML = '';\n  };\n\n  _proto.nexttestitem = function nexttestitem() {\n    if (this.checkAnswers()) {\n      //check whether all mandatory questions are answered - set to non-default value\n      if (this.highlightEducation()) {\n        this.controller.preview.innerHTML = this.nextpage();\n        /*parser*/\n\n        this.highlighted = false;\n        this.evaluateScripts();\n        this.hideNonAnswered();\n      } else {//not highlighted\n      }\n    } else {\n      this.highlightNonAnswered();\n    }\n  } // TODO convert $ to aurelia based html processing\n  ;\n\n  _proto.highlightEducation = function highlightEducation() {\n    var atleastoneeduanswer = false;\n\n    if (\n    /*parser*/\n    this.educational) {\n      if (!\n      /*parser*/\n      this.result.answers[\n      /*parser*/\n      this.currentPage - 1]) return true;\n\n      if (\n      /*parser*/\n      this.highlighted) {\n        document.getElementById('notification').innerHTML = '';\n        return true;\n      }\n      /*parser*/\n\n\n      this.highlighted = true;\n\n      if (\n      /*parser*/\n      this.result.answers[\n      /*parser*/\n      this.currentPage - 1]) {\n        for (var i = 0; i <\n        /*parser*/\n        this.result.answers[\n        /*parser*/\n        this.currentPage - 1].length; i++) {\n          if (\n          /*parser*/\n          this.result.answers[\n          /*parser*/\n          this.currentPage - 1][i] && 'answer' in\n          /*parser*/\n          this.result.answers[\n          /*parser*/\n          this.currentPage - 1][i]) {\n            //fix bug 268\n            var item = document.getElementById('q' +\n            /*parser*/\n            this.currentPage + '\\\\.' + (i + 1)); //document.getElementById('q' + currentPage + '.' + (i + 1));\n            //disable editing the subelement within this form\n\n            item.find('input').prop('disabled', true);\n            item.find('option').prop('disabled', true);\n            item.find('.ui-slider').labeledslider('disable'); //console.log(\"#q\" + currentPage + \"\\\\.\" + (i + 1));\n            //if (item) item.style.backgroundColor = \"#eeffee\";\n\n            var aquestion =\n            /*parser*/\n            this.result.answers[\n            /*parser*/\n            this.currentPage - 1][i].question.trim();\n            var acase =\n            /*parser*/\n            this.result.answers[\n            /*parser*/\n            this.currentPage - 1][i].case;\n            var answer =\n            /*parser*/\n            this.result.answers[\n            /*parser*/\n            this.currentPage - 1][i].answer; //var myeduanswer;\n\n            if (\n            /*parser*/\n            this.eduresults[acase]) {\n              var myeduanswer =\n              /*parser*/\n              this.eduresults[acase].answer[aquestion];\n              console.log('eduanswer');\n              console.log(\n              /*parser*/\n              this.eduresults[acase]);\n              console.log(\"'\" + aquestion + \"'\");\n              console.log(Object.keys(\n              /*parser*/\n              this.eduresults[acase].answer));\n              console.log(myeduanswer);\n\n              if (myeduanswer) {\n                atleastoneeduanswer = true; //creating tooltip div\n\n                $(\"<div class='tooltipContent'>\" +\n                /*parser*/\n                this.eduresults[acase].note[aquestion] + '</div>').appendTo(item); //adding tooltip class to the form\n\n                item.addClass('tooltip'); //process all eduanswers;\n\n                var eduanswermulti = myeduanswer.split(';'); //show multiple values delimited by ;\n\n                eduanswermulti.forEach(function (eduanswer) {\n                  var hitem = item.find(\"[value|='\" + eduanswer + \"']\"); //selects <input>\n\n                  if (hitem.length > 0) {\n                    var nexthitem = hitem.next(); //selects related <label>\n                    //console.log(\"item:\" + item.prop('nodeName') + \" hitem:\" + hitem.prop('nodeName') + \" nexthitem:\" + nexthitem.prop('nodeName'));\n\n                    if (nexthitem.is('label')) {\n                      nexthitem.attr('style', 'background-color: lightgreen');\n                    } else if (hitem.is('option')) {\n                      hitem.attr('style', 'background-color: lightgreen;border:solid 2px green');\n                    }\n                  } else {\n                    // show in slider handle\n                    hitem = item.find('.ui-slider');\n\n                    if (hitem.length > 0) {\n                      //var idhitem = hitem.prop(\"id\");\n                      var currentvalue = hitem.labeledslider('value'); //keep current value\n\n                      var sliderid = hitem.prop('id');\n                      var slidernum = parseInt(Interpreter.extract(sliderid, 'slider'), 10);\n                      var eduanswerint = parseInt(eduanswer, 10);\n                      var eduanswerindex =\n                      /*parser*/\n                      this.sliderValues[slidernum].indexOf(eduanswerint); //moves slider handle to educational value\n\n                      if (eduanswerindex > -1) //move to edu value from sequence\n                        {\n                          //console.log(\"slidervalue:\" + sliderValues[slidernum][eduanswerindex]);\n                          hitem.labeledslider('value',\n                          /*parser*/\n                          this.sliderValues[slidernum][eduanswerindex]);\n                        } else //move to edu value\n                        {\n                          //console.log(\"normal value:\" + eduanswerint);\n                          hitem.labeledslider('value', eduanswerint); //move to edu value\n                        } //var handle = item.find(\".ui-slider-handle\");\n\n\n                      var oldhandle = hitem.find('.ui-slider-handle');\n                      var newhandle = hitem.find('.ui-slider-handle').clone(); //.appendTo(hitem); //clone the handle\n                      //slider already has some style - position, whihc must be preserved\n\n                      hitem.labeledslider('value', currentvalue); //return to current value - the clone will remain on the edu value\n\n                      var oldstyle = oldhandle.attr('style') + 'border:solid 2px blue;';\n                      var newstyle = newhandle.attr('style') + 'background:lightgreen;';\n                      newhandle.attr('style', newstyle);\n                      oldhandle.attr('style', oldstyle);\n                      hitem.labeledslider('disable');\n                      newhandle.appendTo(hitem); //hitem.find(\".ui-slider-handle\").last().attr(\"style\", \"background:green\");\n                    } else {//select\n                      }\n                  }\n                });\n              }\n            }\n          }\n        } //allanswers highlighted, enable tooltip\n\n\n        $('.tooltip').hover(function () {\n          var tooltip = $('> div', this).show();\n          var pos = tooltip.offset();\n          tooltip.hide();\n          var right = pos.left + tooltip.width();\n          var pageWidth = $(document).width();\n\n          if (pos.left < 0) {\n            tooltip.css('marginLeft', '+=' + -pos.left + 'px');\n          } else if (right > pageWidth) {\n            tooltip.css('marginLeft', '-=' + (right - pageWidth));\n          }\n\n          tooltip.fadeIn();\n        }, function () {\n          $('> div', this).fadeOut(function () {\n            $(this).css('marginLeft', '');\n          });\n        });\n      }\n\n      if (atleastoneeduanswer) {\n        var item2 = $('#notification');\n        item2.css('background-color', 'lightgreen');\n        item2.html('Vyznačeny jsou průměrné, nejvíce vybírané hodnoty na uvedené otázky.');\n      } else\n        /*parser*/\n        this.highlighted = false;\n\n      return !atleastoneeduanswer;\n    }\n\n    return true;\n  } //TODO add PsychoTestPauseUrl, construct pausedtestresult, implement resumetest(), add a select box with tests to resume into HTML, after selection load raw test, load results and go into the last screen,\n  ;\n\n  _proto.pausetest = function pausetest() {\n    if (!confirm('Do you want to postpone the test execution? Postponed test can be resumed later from the current screen.')) return; //store results, raw test and screen number into server\n\n    var pausedtestResult = {};\n    pausedtestResult.testname =\n    /*parser*/\n    this.testName; //{ get; set; }\n\n    pausedtestResult.screennumber =\n    /*parser*/\n    this.currentPage; //{ get; set; }\n\n    pausedtestResult.rawtestdefinition =\n    /*parser*/\n    this.currentTest; //{ get; set; }\n    //pausedtestResult.loginname = prompt(\"Enter your unique ID, e.g. email address\");\n\n    pausedtestResult.temporalresults = JSON.stringify(\n    /*parser*/\n    this.result.answers);\n    var METHOD = 'PUT';\n\n    if (\n    /*parser*/\n    this.resumeid > 0) {\n      pausedtestResult.id =\n      /*parser*/\n      this.resumeid;\n      METHOD = 'POST';\n    }\n\n    $.ajax({\n      type: METHOD,\n      url: PsychoTestPauseUrl,\n      contentType: 'application/json',\n      dataType: 'json',\n      data: JSON.stringify(pausedtestResult),\n      processData: false,\n      success: this.pausetestcallback,\n      error: this.postAnswerErrorCallback\n    }); //console.log(\"TODO, not yet implemented pausetest()\");\n  };\n\n  _proto.pausetestcallback = function pausetestcallback(data) {\n    console.log('saved paused test. Response:'); //console.log(data)\n\n    pausedtestid = data.id;\n    this.focusPaused(); //calling back to focus the paused Tab\n  };\n\n  _proto.evaluateScripts = function evaluateScripts() {\n    //evaluate graphs\n    var codes = this.controller.preview.getElementsByTagName('script'); //document.getElementById('preview').getElementsByTagName('script');\n    //console.log(\"codes\"+codes);\n    //console.log(codes);\n\n    for (var i = 0; i < codes.length; i++) {\n      eval(codes[i].text);\n    }\n  };\n\n  _proto.newTrans = function newTrans(row) {\n    var tr = {\n      'raw': row\n    };\n\n    if (_dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].isZvuk(row)) {\n      var soundtype = _dsl__WEBPACK_IMPORTED_MODULE_5__[\"Dsl\"].stimuliType(row);\n\n      if (soundtype) {\n        if (soundtype[1] === 'waveform') {\n          tr = {\n            'isstimulus': true,\n            'iswaveform': true,\n            'src': 'stimuli/3.wav',\n            'id': 'audio2',\n            'type': 'audio/wav',\n            'raw': row\n          };\n        }\n      }\n    }\n\n    console.log('new translation row,tr:', row, tr);\n    return tr;\n  };\n\n  return Interpreter;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiM1FpWC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2ludGVycHJldGVyLmpzP2RkMDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdqcXVlcnknO1xuaW1wb3J0IHtTdGltdWx1c2ludGVycHJldGVyfSBmcm9tICcuL3N0aW11bHVzaW50ZXJwcmV0ZXInO1xuaW1wb3J0IHtSZXNwb25zZWludGVycHJldGVyfSBmcm9tICcuL3Jlc3BvbnNlaW50ZXJwcmV0ZXInO1xuaW1wb3J0IHtSYW5raW5nMmRpbnRlcnByZXRlcn0gZnJvbSAnLi9yYW5raW5nMmRpbnRlcnByZXRlcic7XG5pbXBvcnQge1ByZXByb2Nlc29yfSBmcm9tICcuL3ByZXByb2Nlc29yJztcbmltcG9ydCB7RHNsfSBmcm9tICcuL2RzbCc7XG5cbi8vc2h1ZmZsZSByYW5kb21seSB0aGUgYXJyYXlcbkFycmF5LnByb3RvdHlwZS5zaHVmZmxlID0gZnVuY3Rpb24oKSB7XG4gIGxldCBpID0gdGhpcy5sZW5ndGg7IGxldCBqOyBsZXQgdGVtcDtcbiAgaWYgKGkgPT0gMCkgcmV0dXJuIHRoaXM7XG4gIHdoaWxlICgtLWkpIHtcbiAgICBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgdGVtcCA9IHRoaXNbaV07XG4gICAgdGhpc1tpXSA9IHRoaXNbal07XG4gICAgdGhpc1tqXSA9IHRlbXA7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vL21ha2UgcHJvdG90eXBlIGZ1bmN0aW9uIHN0YXJ0c1dpdGggLSBpZiBpdCBkb2VzIG5vdCBleGlzdFxuaWYgKHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGggIT09ICdmdW5jdGlvbicpIHtcbiAgU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHRoaXMuc2xpY2UoMCwgc3RyLmxlbmd0aCkgPT0gc3RyO1xuICB9O1xufVxuXG5TdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoID0gZnVuY3Rpb24oc3VmZml4KSB7XG4gIHJldHVybiB0aGlzLmluZGV4T2Yoc3VmZml4LCB0aGlzLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpICE9PSAtMTtcbn07XG5cblN0cmluZy5wcm90b3R5cGUuZXh0cmFjdCA9IGZ1bmN0aW9uKHN1YnMpIHtcbiAgcmV0dXJuIHRoaXMuc3Vic3RyaW5nKHRoaXMuaW5kZXhPZihzdWJzKSArIHN1YnMubGVuZ3RoKTtcbn07XG5cblN0cmluZy5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbihzdHIpIHtcbiAgcmV0dXJuIHRoaXMuaW5kZXhPZihzdHIpICE9PSAtMTtcbn07XG5cblxuZXhwb3J0IGNsYXNzIEludGVycHJldGVyIHtcbiAgY29uc3RydWN0b3IoY29udHJvbGxlcikge1xuICAgIHRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7IC8vaXMgdXNlZCB0byBub3RpZnkgZmlyc3Qgb3IgbGFzdCBwYWdlIG9mIHRlc3QgYW5kIHRvIGNvbnRyb2wgdGVzdCBwYWdlIGZsb3dcbiAgICB0aGlzLmN1cnJlbnRDdXJzb3IgPSAwO1xuICAgIHRoaXMuY3VycmVudFBhZ2UgPSAwO1xuICAgIHRoaXMubWF4UGFnZXMgPSAwO1xuICAgIHRoaXMucXVlc3Rpb25QYWdlID0gMDtcbiAgICB0aGlzLnNsaWRlclZhbHVlcyA9IFtdO1xuICAgIHRoaXMudGVzdE5hbWUgPSAnJztcbiAgICB0aGlzLmN1cnJlbnRUZXN0ID0gJyc7XG4gICAgdGhpcy5zbG91cGNlID0gZmFsc2U7XG4gICAgdGhpcy5zbGlkZXJJZCA9IDA7XG4gICAgdGhpcy5wcmV2aW91c3Rva2VuID0gJyc7IC8vaG9sZHMgcHJldmlvdXMgdG9rZW4gLSBmb3IgZGlzdGluZ3Vpc2hpbmcgc3RhdGVzIGR1cmluZyBpbnRlcnByZXRhdGlvblxuICAgIHRoaXMucHJldmlvdXNyb3cgPSAnJzsvL2hvbGRzIHByZXZpb3VzIHJvd1xuICAgIHRoaXMudHN0YXRlID0ge307IC8vaG9sZHMgc3RydWN0dXJlIG9mIHN0YXRlIHZhcmlhYmxlc1xuICAgIC8va2VlcCB0aGUgbGFzdCBxdWVzdGlvbiBhbmQgdmFsdWVzIGZvciBhbnN3ZXJcbiAgICB0aGlzLmFsbG93cHJldiA9IHRydWU7XG4gICAgdGhpcy5lZHVjYXRpb25hbCA9IGZhbHNlO1xuICAgIHRoaXMuaGlnaGxpZ2h0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmVkdWlkID0gMDtcbiAgICB0aGlzLmVkdXJlc3VsdHMgPSB7fTsvL25ldyBSZXNwb25zZXMoKTtcbiAgICB0aGlzLnJlc3VtZWlkID0gMDsgLy9pZCBvZiBwYXVzZWQgdGVzdDsgZm9yIGZ1dHVyZSB1cGRhdGVcblxuICAgIHRoaXMuaG9kbm90eSA9IFtdO1xuICAgIHRoaXMuaG9kbm90eVNldHRlZCA9IHRydWU7XG4gICAgLy8gICAgdGhpcy5jb2x1bW5udW1iZXIgPSAwO1xuICAgIHRoaXMubGFzdGZvcm1pZCA9ICcnO1xuICAgIHRoaXMubGFzdGZvcm1pZGVzY2FwZWQgPSAnJztcbiAgICB0aGlzLnBhdXNlZHRlc3RpZCA9IDA7XG4gICAgdGhpcy5wYXJvdmFvdGF6a2EgPSBmYWxzZTtcblxuICAgIHRoaXMucmVzdWx0ID0gbmV3IFJlc3BvbnNlaW50ZXJwcmV0ZXIodGhpcyk7XG4gICAgd2luZG93LnJpID0gdGhpcy5yZXN1bHQ7XG4gICAgdGhpcy5zdGltdWwgPSBuZXcgU3RpbXVsdXNpbnRlcnByZXRlcih0aGlzKTtcbiAgICB0aGlzLnJhbmtpbmcyZCA9IG5ldyBSYW5raW5nMmRpbnRlcnByZXRlcih0aGlzKTtcbiAgfVxuXG4gIHN0YXRpYyBleHRyYWN0KHMsIHN1YnMpIHtcbiAgICByZXR1cm4gcy5zdWJzdHJpbmcocy5pbmRleE9mKHN1YnMpICsgc3Vicy5sZW5ndGgpO1xuICB9XG5cbiAgc3RhdGljIGVuZHNXaXRoKHMsIHN1ZmZpeCkge1xuICAgIHJldHVybiBzLmluZGV4T2Yoc3VmZml4LCBzLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpICE9PSAtMTtcbiAgfVxuXG4gIHRyYW5zbGF0ZU9icmF6b3ZrYShyb3cpIHtcbiAgICB0aGlzLnJlc3VsdC5yZXNldExhc3QoKTtcbiAgICB0aGlzLnNsb3VwY2UgPSBmYWxzZTtcbiAgICBsZXQgdHJhbnNsYXRlZFJvdyA9IFwiPHNwYW4gY2xhc3M9J2xlZnRoZWFkJz5cIiArIHRoaXMuY3VycmVudFBhZ2UgKyAnLiAnICsgSW50ZXJwcmV0ZXIuZXh0cmFjdChyb3csICdzY3JlZW4nKSArIFwiIDwvc3Bhbj48c3BhbiBjbGFzcz0ncmlnaHRoZWFkJz5cIiArIHRoaXMudGVzdE5hbWUgKyBcIjwvc3Bhbj48cCBzdHlsZT0nY2xlYXI6Ym90aDttYXJnaW46MjBweDsnPjwvcD5cXG5cIjtcbiAgICB0aGlzLnByZXZpb3VzdG9rZW4gPSAnc2NyZWVuJztcbiAgICByZXR1cm4gdHJhbnNsYXRlZFJvdztcbiAgfVxuXG4gIHRyYW5zbGF0ZVRleHQocm93KSB7XG4gICAgbGV0IG91dHB1dCA9ICcnO1xuICAgIGlmICh0aGlzLnNsb3VwY2UpIG91dHB1dCArPSBcIjx0cj48dGQgY29sc3Bhbj0nMic+XCI7XG4gICAgb3V0cHV0ICs9ICc8cD4nICsgSW50ZXJwcmV0ZXIuZXh0cmFjdChyb3csICd0ZXh0JykgKyAnPC9wPic7XG4gICAgaWYgKHRoaXMuc2xvdXBjZSkgb3V0cHV0ICs9ICc8L3RkPjwvdHI+JztcbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG4gIC8vdXNlZCBtdWx0aXBsZXRpbWVzXG4gIGdlbmVyYXRlSHRtbE90YXprYVJvdyhzdWZmaXgpIHtcbiAgICB0aGlzLmxhc3Rmb3JtaWQgPSAncScgKyB0aGlzLmN1cnJlbnRQYWdlICsgJy4nICsgdGhpcy5xdWVzdGlvblBhZ2U7XG4gICAgdGhpcy5sYXN0Zm9ybWlkZXNjYXBlZCA9ICdxJyArIHRoaXMuY3VycmVudFBhZ2UgKyAnXFxcXFxcXFwuJyArIHRoaXMucXVlc3Rpb25QYWdlO1xuICAgIGxldCBteXN1ZmZpeCA9ICcnO1xuICAgIGlmIChzdWZmaXgpIG15c3VmZml4ID0gc3VmZml4O1xuICAgIHJldHVybiBcIjxmb3JtIGlkPSdcIiArIHRoaXMubGFzdGZvcm1pZCArIFwiJyBuYW1lPSdxXCIgKyB0aGlzLmN1cnJlbnRQYWdlICsgJy4nICsgdGhpcy5xdWVzdGlvblBhZ2UgKyBcIic+PGZpZWxkc2V0PjxsZWdlbmQ+XCIgKyB0aGlzLnJlc3VsdC5sYXN0b3RhemthICsgbXlzdWZmaXggKyAnIDwvbGVnZW5kPic7XG4gIH1cblxuICBnZW5lcmF0ZUVkaXRIZWFkZXJSb3coKSB7XG4gICAgdGhpcy5sYXN0Zm9ybWlkID0gJ3EnICsgdGhpcy5jdXJyZW50UGFnZSArICcuJyArIHRoaXMucXVlc3Rpb25QYWdlO1xuICAgIHRoaXMubGFzdGZvcm1pZGVzY2FwZWQgPSAncScgKyB0aGlzLmN1cnJlbnRQYWdlICsgJ1xcXFxcXFxcLicgKyB0aGlzLnF1ZXN0aW9uUGFnZTtcbiAgICByZXR1cm4gXCI8Zm9ybSBpZD0nXCIgKyB0aGlzLmxhc3Rmb3JtaWQgKyBcIicgbmFtZT0ncVwiICsgdGhpcy5jdXJyZW50UGFnZSArICcuJyArIHRoaXMucXVlc3Rpb25QYWdlICsgXCInPjxmaWVsZHNldD48bGVnZW5kPlwiICsgdGhpcy5yZXN1bHQubGFzdG90YXprYSArICc8L2xlZ2VuZD4nO1xuICB9XG5cbiAgdHJhbnNsYXRlVGFza0ZvclN0aW11bGkocm93KSB7XG4gICAgdGhpcy5wYXJvdmFvdGF6a2EgPSBmYWxzZTtcbiAgICB0aGlzLnJlc3VsdC5sYXN0b3RhemthID0gSW50ZXJwcmV0ZXIuZXh0cmFjdChyb3csICd0YXNrZm9yc3RpbXVsaSAnKTsgLy9hZGRzIHRvIHRoZSAjMSB0byB0aGUgcXVlc3Rpb25cbiAgICB0aGlzLmhvZG5vdHlTZXR0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnF1ZXN0aW9uUGFnZSsrO1xuICAgIC8vdmFyIG15dGFibGUgPSBcIlwiO1xuICAgIC8vbXl0YWJsZSArPSB0aGlzLmdlbmVyYXRlSHRtbE90YXprYVJvdygpO1xuICAgIC8vaWYgKHRoaXMuc2xvdXBjZSkgeyAvL21ha2Ugcm93IG9mIHRhYmxlXG4gICAgLy8gICAgICAgIHZhciBteXRhYmxlID0gICsgbXl0YWJsZTsvLyAgKyBcIjwvdGQ+XCI7IC8vXG4gICAgLy99XG4gICAgcmV0dXJuIFwiPHRyPjx0ZCBjbGFzcz0ndGFzayc+XCIgKyB0aGlzLmdlbmVyYXRlSHRtbE90YXprYVJvdygnICMxJyk7XG4gIH1cblxuICAvKlxuICAgKlx0dHJhbnNsYXRlcyBcInRhc2sgLi4uXCIgdG8gdGhlIEhUTUwgZm9ybVxuICAgKi9cbiAgdHJhbnNsYXRlT3RhemthKHJvdykge1xuICAgIHRoaXMucGFyb3Zhb3RhemthID0gZmFsc2U7XG4gICAgdGhpcy5yZXN1bHQubGFzdG90YXprYSA9IEludGVycHJldGVyLmV4dHJhY3Qocm93LCAndGFzayAnKTtcbiAgICB0aGlzLmhvZG5vdHlTZXR0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnF1ZXN0aW9uUGFnZSsrO1xuICAgIHJldHVybiB0aGlzLmdlbmVyYXRlSHRtbE90YXprYVJvdygpO1xuICB9XG4gIC8vbXl0YWJsZWVuZCA9IFwiPC90ZD5cIjtcbiAgLy9pZiAoY29sdW1ubnVtYmVyID09IDEpIG15dGFibGVlbmQgKz0gXCI8L3RyPlwiO1xuICAvL1RPRE8gZmluaXNoIG90YXprYSBhbmQgcGFyb3Zhb3RhemthIGluIHRhYmxlIHdpdGggMiBjb2x1bW5zXG4gIC8qXG4gICAqXHR0cmFuc2xhdGVzIFwicGFyb3Zhb3RhemthIC4uLiBcIiB0byB0aGUgSFRNTCBmb3JtIHdpdGggMiBzb3VuZHMgZWFjaCBpbiAxIGNvbHVtbiBhbmQgZWFjaCByb3cgaGFzIHRoZSBzYW1lIHF1ZXN0aW9uXG4gICAqL1xuICB0cmFuc2xhdGVQYXJvdmFPdGF6a2Eocm93KSB7XG4gICAgLy9sYXN0b3RhemthID0gcm93LnN1YnN0cmluZyhcIm90YXprYVwiLmxlbmd0aCk7XG4gICAgLy9ob2Rub3R5U2V0dGVkID0gZmFsc2U7XG4gICAgdGhpcy5wYXJvdmFvdGF6a2EgPSB0cnVlO1xuICAgIHRoaXMucXVlc3Rpb25QYWdlKys7XG4gICAgdGhpcy5yZXN1bHQubGFzdG90YXprYSA9IEludGVycHJldGVyLmV4dHJhY3Qocm93LCAndGFzayAnKTtcbiAgICB0aGlzLmxhc3Rmb3JtaWQgPSAncScgKyB0aGlzLmN1cnJlbnRQYWdlICsgJy4nICsgdGhpcy5xdWVzdGlvblBhZ2U7XG4gICAgdGhpcy5sYXN0Zm9ybWlkZXNjYXBlZCA9ICdxJyArIHRoaXMuY3VycmVudFBhZ2UgKyAnXFxcXFxcXFwuJyArIHRoaXMucXVlc3Rpb25QYWdlO1xuICAgIHJldHVybiBcIjx0cj48dGQgY29sc3Bhbj0nMic+PGZvcm0gaWQ9J1wiICsgdGhpcy5sYXN0Zm9ybWlkICsgXCInPjxmaWVsZHNldD48bGVnZW5kPlwiICsgdGhpcy5yZXN1bHQubGFzdG90YXprYSArICc8L2xlZ2VuZD4nO1xuICB9XG4gIC8qXG4gICAqXHR0cmFuc2xhdGVzIFwiaG9uZG90eSAuLi5cIiB0byB0aGUgb3BlbmVkIEhUTUwgZm9ybSwgaW50ZXJwcmV0cyBhcyBhbGxvd2VkIHZhbHVlcyB0byBiZSBjaG9zZW4gYnkgdXNlclxuICAgKi9cbiAgLypmdW5jdGlvbiB0cmFuc2xhdGVIb2Rub3R5KHJvd3NwbGl0dGVkKSB7XG4gICByZXR1cm4gdHJhbnNsYXRlSG9kbm90eShyb3dzcGxpdHRlZCwgdHJ1ZSxmYWxzZSk7XG4gICB9XG4gICAqL1xuXG4gIGhhc2hDb2RlKHMpIHtcbiAgICByZXR1cm4gcy5zcGxpdCgnJykucmVkdWNlKGZ1bmN0aW9uKGEsIGIpIHsgYSA9ICgoYSA8PCA1KSAtIGEpICsgYi5jaGFyQ29kZUF0KDApOyByZXR1cm4gYSAmIGE7IH0sIDApO1xuICB9XG5cbiAgZ2VuZXJhdGVIdG1sUm93KHJvd3NwbGl0dGVkLCByYWRpb2J1dHRvbnMsIHRhc2tpbmRleCkge1xuICAgIGxldCB0cmFuc2xhdGVkUm93ID0gJyc7XG4gICAgZm9yIChsZXQgaiA9IDE7IGogPCByb3dzcGxpdHRlZC5sZW5ndGg7IGorKykge1xuICAgICAgbGV0IG15YnIgPSAnPGJyIC8+JztcbiAgICAgIGxldCBteXZhbHVlID0gcm93c3BsaXR0ZWRbal07XG4gICAgICBsZXQgbXlpZCA9IHRoaXMuaGFzaENvZGUodGhpcy5sYXN0Zm9ybWlkICsgJ3YnICsgbXl2YWx1ZSk7XG4gICAgICBpZiAodGhpcy5wYXJvdmFvdGF6a2EgfHwgdGhpcy52YWx1ZXNvbnJvdykgbXliciA9ICcmbmJzcDsgJm5ic3A7JzsgLy9kb24ndCBtYWtlIG5ldyBsaW5lIGluIHBhcm92YSBvdGF6a2Egb3Igd2hlbiB2YWx1ZXMgb24gcm93XG4gICAgICBpZiAocmFkaW9idXR0b25zKSB7dHJhbnNsYXRlZFJvdyArPSBcIjxpbnB1dCBpZD0nXCIgKyBteWlkICsgXCIndHlwZT0ncmFkaW8nIG5hbWU9J290YXprYScgdmFsdWU9J1wiICsgbXl2YWx1ZSArIFwiJyBvbmNsaWNrPSdyaS5zZXRBbnN3ZXIoXCIgKyB0aGlzLmN1cnJlbnRQYWdlICsgJywnICsgdGhpcy5xdWVzdGlvblBhZ2UgKyBcIix0aGlzKScvPjxsYWJlbCBmb3I9J1wiICsgbXlpZCArIFwiJyBjbGFzcz0nYW5zd2VyJz48c3Bhbj48c3Bhbj48L3NwYW4+PC9zcGFuPlwiICsgbXl2YWx1ZSArICc8L2xhYmVsPicgKyBteWJyO30gZWxzZSB7dHJhbnNsYXRlZFJvdyArPSBcIjxpbnB1dCBpZD0nXCIgKyBteWlkICsgXCInIHR5cGU9J2NoZWNrYm94JyBuYW1lPSdvdGF6a2EnIHZhbHVlPSdcIiArIG15dmFsdWUgKyBcIicgb25jbGljaz0nc2V0Q2hlY2tBbnN3ZXIoXCIgKyB0aGlzLmN1cnJlbnRQYWdlICsgJywnICsgdGhpcy5xdWVzdGlvblBhZ2UgKyBcIix0aGlzKScvPjxsYWJlbCBmb3I9J1wiICsgbXlpZCArIFwiJ3NwYW4gY2xhc3M9J2Fuc3dlcic+PHNwYW4+PC9zcGFuPlwiICsgbXl2YWx1ZSArICc8L2xhYmVsPicgKyBteWJyO31cbiAgICAgIHRoaXMucmVzdWx0LnNldERlZmF1bHRBbnN3ZXIodGhpcy5jdXJyZW50UGFnZSwgdGhpcy5xdWVzdGlvblBhZ2UsIHRhc2tpbmRleCk7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2xhdGVkUm93O1xuICB9XG5cbiAgdHJhbnNsYXRlSG9kbm90eShyb3dzcGxpdHRlZCkge1xuICAgIGxldCByYWRpb2J1dHRvbnMgPSAhIERzbC5pc0NoZWNrYm94dmFsdWVzKHJvd3NwbGl0dGVkWzBdKTtcbiAgICB0aGlzLnZhbHVlc29ucm93ID0gRHNsLmlzQ2hlY2tib3h2YWx1ZXNPblJvdyhyb3dzcGxpdHRlZFswXSkgfHwgRHNsLmlzVmFsdWVzT25Sb3cocm93c3BsaXR0ZWRbMF0pO1xuICAgIGxldCB0cmFuc2xhdGVkUm93ID0gJyc7XG4gICAgbGV0IHRhc2tpbmRleCA9ICcnOyBpZiAodGhpcy5zbG91cGNlICYmICF0aGlzLnBhcm92YW90YXprYSkgdGFza2luZGV4ID0gJyAjMSc7XG4gICAgdHJhbnNsYXRlZFJvdyArPSB0aGlzLmdlbmVyYXRlSHRtbFJvdyhyb3dzcGxpdHRlZCwgcmFkaW9idXR0b25zLCB0YXNraW5kZXgpO1xuICAgIHRyYW5zbGF0ZWRSb3cgKz0gJzwvZmllbGRzZXQ+PC9mb3JtPlxcbic7XG4gICAgaWYgKHRoaXMuc2xvdXBjZSkgLy9jb3BwaWVzIHRoZSBzYW1lIHRhc2sgYW5kIHZhbHVlcyB0byB0aGUgc2Vjb25kIGNvbGx1bW4gb2YgdGhlIHBhaXJzXG4gICAge1xuICAgICAgaWYgKHRoaXMucGFyb3Zhb3RhemthKSB7XG4gICAgICAgIHRyYW5zbGF0ZWRSb3cgKz0gJzwvdGQ+PC90cj4nO1xuICAgICAgfSBlbHNlIHsvL2Nsb3NlIHRoZSBjb2x1bW4sIGR1cGxpY2F0ZSBxdWVzdGlvbiB0byBzZWNvbmQgY29sdW1uIGFuZCBjbG9zZSB0aGUgcm93XG4gICAgICAgIHRoaXMucXVlc3Rpb25QYWdlKys7XG4gICAgICAgIHRhc2tpbmRleCA9ICcgIzInO1xuICAgICAgICB0cmFuc2xhdGVkUm93ICs9IFwiPC9maWVsZHNldD48L2Zvcm0+PC90ZD48dGQgY2xhc3M9J3Rhc2snPlwiICsgdGhpcy5nZW5lcmF0ZUh0bWxPdGF6a2FSb3codGFza2luZGV4KTsgLy9maXggYnVnIzI0OSBhZGRlZCBjbG9zaW5nIGZvcm0gdGFnXG4gICAgICAgIHRyYW5zbGF0ZWRSb3cgKz0gdGhpcy5nZW5lcmF0ZUh0bWxSb3cocm93c3BsaXR0ZWQsIHJhZGlvYnV0dG9ucywgdGFza2luZGV4KTtcbiAgICAgICAgdHJhbnNsYXRlZFJvdyArPSAnPC9maWVsZHNldD48L2Zvcm0+PC90ZD48L3RyPic7XG4gICAgICB9XG4gICAgfVxuICAgIC8vd2lsbCByZW1lbWJlciB0aGUgdmFsdWVzIG9mIGxhc3QgcXVlc3Rpb24gLSBpdCBpcyBub3QgbmVlZGVkIHRvIHJlcGVhdCB0aGVtXG4gICAgdGhpcy5ob2Rub3R5W3RoaXMucmVzdWx0Lmxhc3RvdGF6a2FdID0gcm93c3BsaXR0ZWQ7XG4gICAgdGhpcy5ob2Rub3R5U2V0dGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gdHJhbnNsYXRlZFJvdztcbiAgfVxuXG4gIHNwbGl0VmFsdWVzKHJvdykge1xuICAgIGxldCByZTEgPSAvWyA7LF0rLzsgLy8gZml4IGZlYXR1cmUgYnVnICMyNDAsIGNvbWEgJywnIGlzIHVzZWQgdG8gc2VwYXJhdGUgaW50ZXJ2YWwgbnVtYmVyc1xuICAgIGlmICghcm93LmNvbnRhaW5zKCdcIicpKSByZXR1cm4gcm93LnNwbGl0KHJlMSk7XG4gICAgbGV0IHJvd3NwbGl0dGVkID0gW107XG4gICAgbGV0IHF1b3RlID0gZmFsc2U7XG4gICAgbGV0IGN1cnJlbnRpdGVtID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3cubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghcXVvdGUpIC8vbm9ybWFsIHNwbGl0XG4gICAgICB7XG4gICAgICAgIGlmICgvW1xcXCJdLy50ZXN0KHJvd1tpXSkpIHF1b3RlID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoL1ssIDtdLy50ZXN0KHJvd1tpXSkpIHtcbiAgICAgICAgICBpZiAoY3VycmVudGl0ZW0ubGVuZ3RoID4gMCkgcm93c3BsaXR0ZWQucHVzaChjdXJyZW50aXRlbSk7XG4gICAgICAgICAgY3VycmVudGl0ZW0gPSAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50aXRlbSArPSByb3dbaV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7IC8vcXVvdGVzIGFkZCBldmVyeXRoaW5nIGJldHdlZW4gcXVvdGVzXG4gICAgICAgIGlmICgvW1xcXCJdLy50ZXN0KHJvd1tpXSkpIHtcbiAgICAgICAgICByb3dzcGxpdHRlZC5wdXNoKGN1cnJlbnRpdGVtKTtcbiAgICAgICAgICBjdXJyZW50aXRlbSA9ICcnO1xuICAgICAgICAgIHF1b3RlID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudGl0ZW0gKz0gcm93W2ldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjdXJyZW50aXRlbS5sZW5ndGggPiAwKSByb3dzcGxpdHRlZC5wdXNoKGN1cnJlbnRpdGVtKTtcbiAgICByZXR1cm4gcm93c3BsaXR0ZWQ7XG4gIH1cblxuICB0cmFuc2xhdGVTY2FsZShwcmV2aW91c3Jvdywgcm93c3BsaXR0ZWQpIHtcbiAgICBpZiAodGhpcy5zbG91cGNlICYmICEgdGhpcy5wYXJvdmFvdGF6a2EpIHsgLy9tYWtlcyB0d28gY29wcGllcyBvZiB0aGUgdGFzayBmb3IgZWFjaCBzdGltdWx1cyBpbiBwYWlyXG4gICAgICBsZXQgdHJhbnNsYXRlZCA9ICdcXG4nICsgdGhpcy50cmFuc2xhdGVTa2Fsb3ZhY2koKSArIHRoaXMudHJhbnNsYXRlU2thbG92YWNpSG9kbm90eShyb3dzcGxpdHRlZCwgJyAjMScpO1xuICAgICAgdGhpcy5xdWVzdGlvblBhZ2UrKztcbiAgICAgIHRyYW5zbGF0ZWQgKz0gJzwvZmllbGRzZXQ+PC9mb3JtPjwvdGQ+PHRkPicgKyB0aGlzLmdlbmVyYXRlSHRtbE90YXprYVJvdygnICMyJykgKyB0aGlzLnRyYW5zbGF0ZVNrYWxvdmFjaSgpICsgdGhpcy50cmFuc2xhdGVTa2Fsb3ZhY2lIb2Rub3R5KHJvd3NwbGl0dGVkLCAnICMyJykgKyAnPC9maWVsZHNldD48L2Zvcm0+PC90cj48L3RkPlxcbic7XG4gICAgICByZXR1cm4gdHJhbnNsYXRlZDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlU2thbG92YWNpKHByZXZpb3Vzcm93KSArIHRoaXMudHJhbnNsYXRlU2thbG92YWNpSG9kbm90eShyb3dzcGxpdHRlZCk7XG4gIH1cblxuICB0cmFuc2xhdGVWQVNjYWxlKHByZXZpb3Vzcm93LCByb3dzcGxpdHRlZCkge1xuICAgIGlmICh0aGlzLnNsb3VwY2UgJiYgISB0aGlzLnBhcm92YW90YXprYSkgey8vbWFrZXMgdHdvIGNvcHBpZXMgb2YgdGhlIHRhc2sgZm9yIGVhY2ggc3RpbXVsdXMgaW4gcGFpclxuICAgICAgbGV0IHRyYW5zbGF0ZWQgPSAnXFxuJyArIHRoaXMudHJhbnNsYXRlU2thbG92YWNpKCkgKyB0aGlzLnRyYW5zbGF0ZVNrYWxvdmFjaVZBSG9kbm90eShyb3dzcGxpdHRlZCwgJyAjMScpO1xuICAgICAgdGhpcy5xdWVzdGlvblBhZ2UrKztcbiAgICAgIHRyYW5zbGF0ZWQgKz0gJzwvZmllbGRzZXQ+PC9mb3JtPjwvdGQ+PHRkPicgKyB0aGlzLmdlbmVyYXRlSHRtbE90YXprYVJvdygnICMyJykgKyB0aGlzLnRyYW5zbGF0ZVNrYWxvdmFjaSgpICsgdGhpcy50cmFuc2xhdGVTa2Fsb3ZhY2lWQUhvZG5vdHkocm93c3BsaXR0ZWQsICcgIzInKSArICc8L2ZpZWxkc2V0PjwvZm9ybT48L3RyPjwvdGQ+XFxuJztcbiAgICAgIHJldHVybiB0cmFuc2xhdGVkO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdGVTa2Fsb3ZhY2kocHJldmlvdXNyb3cpICsgdGhpcy50cmFuc2xhdGVTa2Fsb3ZhY2lWQUhvZG5vdHkocm93c3BsaXR0ZWQpO1xuICB9XG5cbiAgLyogIHRyYW5zbGF0ZVNrYWxvdmFjaUhvZG5vdHkocm93c3BsaXR0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdGVTa2Fsb3ZhY2lIb2Rub3R5KHJvd3NwbGl0dGVkLFwiXCIpO1xuICB9O1xuKi9cbiAgdHJhbnNsYXRlU2thbG92YWNpSG9kbm90eShyb3dzcGxpdHRlZCwgdGFza2luZGV4ID0gJycpIHtcbiAgICAvL21vdmVkIHRvIHRyYW5zbGF0ZVNrYWxvdmFjaSBxdWVzdGlvblBhZ2UrKzsgLy9pbmNyZWFzZSBpbmRleCBvZiBhbnN3ZXJcbiAgICB0aGlzLnJlc3VsdC5zZXREZWZhdWx0QW5zd2VyKHRoaXMuY3VycmVudFBhZ2UsIHRoaXMucXVlc3Rpb25QYWdlLCB0YXNraW5kZXgpOyAvL2ZpeCBidWcgIyAxOThcbiAgICAvL3ZhciByb3dzcGxpdHRlZCA9IHNwbGl0VmFsdWVzKHJvdyk7XG4gICAgbGV0IHRyYW5zbGF0ZWRSb3cgPSAnJztcbiAgICB0aGlzLnNsaWRlclZhbHVlc1t0aGlzLnNsaWRlcklkXSA9IHJvd3NwbGl0dGVkLnNsaWNlKDEpO1xuICAgIHRyYW5zbGF0ZWRSb3cgKz0gJzxzY3JpcHQ+SW50ZXJwcmV0ZXIubWFrZVNsaWRlcigwLCAwLCcgKyAodGhpcy5zbGlkZXJWYWx1ZXNbdGhpcy5zbGlkZXJJZF0ubGVuZ3RoIC0gMSkgKyAnLCAxLCAnICsgdGhpcy5zbGlkZXJJZCArICcsJyArIHRoaXMucXVlc3Rpb25QYWdlICsgJyk7PC9zY3JpcHQ+JztcbiAgICAvLyAgICBpZiAodGhpcy5zbG91cGNlKVxuICAgIC8vICAgICAgICBpZiAodGhpcy5wYXJvdmFvdGF6a2EpIHtcbiAgICAvLyAgICAgICAgICAgIHRyYW5zbGF0ZWRSb3cgKz0gXCI8L3RkPjwvdHI+XCI7XG4gICAgLyogICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvblBhZ2UrKztcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlcklkKys7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJWYWx1ZXNbdGhpcy5zbGlkZXJJZF0gPSByb3dzcGxpdHRlZC5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5zZXREZWZhdWx0QW5zd2VyKHRoaXMuY3VycmVudFBhZ2UsIHRoaXMucXVlc3Rpb25QYWdlKTsgLy9maXggYnVnICMgMTk4XG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlZFJvdyArPSBcIjxzY3JpcHQ+bWFrZVNsaWRlcigwLCAwLFwiICsgKHRoaXMuc2xpZGVyVmFsdWVzW3RoaXMuc2xpZGVySWRdLmxlbmd0aC0xKSArIFwiLCAxLCBcIiArIHRoaXMuc2xpZGVySWQgKyBcIixcIiArIHRoaXMucXVlc3Rpb25QYWdlICsgXCIpOzwvc2NyaXB0PlwiO1xuICAgICAgICAgICAgfSovXG4gICAgLy99IGVsc2Uge1xuICAgIC8vICAgIHRoaXMucXVlc3Rpb25QYWdlKys7XG4gICAgLy8gICAgdGhpcy5zbGlkZXJJZCsrO1xuICAgIC8vICAgIHRoaXMucmVzdWx0LnNldERlZmF1bHRBbnN3ZXIodGhpcy5jdXJyZW50UGFnZSwgdGhpcy5xdWVzdGlvblBhZ2UpOyAvL2ZpeCBidWcgIyAxOThcbiAgICAvLyAgICAvL3ZhciByb3dzcGxpdHRlZCA9IHNwbGl0VmFsdWVzKHJvdyk7XG4gICAgLy8gICAgLy90cmFuc2xhdGVkUm93ID0gXCJcIjtcbiAgICAvLyAgICB0aGlzLnNsaWRlclZhbHVlc1t0aGlzLnNsaWRlcklkXSA9IHJvd3NwbGl0dGVkLnNsaWNlKDEpO1xuICAgIC8vICAgIHRyYW5zbGF0ZWRSb3cgKz0gXCI8dGQ+PHRyPjxzY3JpcHQ+bWFrZVNsaWRlcigwLCAwLFwiICsgKHRoaXMuc2xpZGVyVmFsdWVzW3RoaXMuc2xpZGVySWRdLmxlbmd0aC0xKSArIFwiLCAxLCBcIiArIHRoaXMuc2xpZGVySWQgKyBcIixcIiArIHRoaXMucXVlc3Rpb25QYWdlICsgXCIpOzwvc2NyaXB0PlwiO1xuICAgIC8vfVxuICAgIHJldHVybiB0cmFuc2xhdGVkUm93O1xuICB9XG5cbiAgLyogdHJhbnNsYXRlU2thbG92YWNpVkFIb2Rub3R5KHJvd3NwbGl0dGVkKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlU2thbG92YWNpVkFIb2Rub3R5KHJvd3NwbGl0dGVkLFwiXCIpO1xuICB9O1xuXG4gICovXG5cbiAgdHJhbnNsYXRlU2thbG92YWNpVkFIb2Rub3R5KHJvd3NwbGl0dGVkLCB0YXNraW5kZXggPSAnJykge1xuICAgIC8vbW92ZWQgdG8gdHJhbnNsYXRlU2thbG92YWNpIHF1ZXN0aW9uUGFnZSsrOyAvL2luY3JlYXNlIGluZGV4IG9mIGFuc3dlclxuICAgIHRoaXMucmVzdWx0LnNldERlZmF1bHRBbnN3ZXIodGhpcy5jdXJyZW50UGFnZSwgdGhpcy5xdWVzdGlvblBhZ2UsIHRhc2tpbmRleCk7IC8vZml4IGJ1ZyAjMTk4XG4gICAgbGV0IHRyYW5zbGF0ZWRSb3cgPSAnJztcbiAgICBsZXQgbXlTbGlkZXJWYWx1ZXMgPSBbXTtcbiAgICAvL2NvbnNvbGUubG9nKFwidHJhbnNsYXRlU2thbG9jYXZpIHJvd3NwbGl0dGVkOlwiKTtcbiAgICAvL2NvbnNvbGUubG9nKHJvd3NwbGl0dGVkKVxuICAgIC8qZm9yICh2YXIgaSA9IDM7IGkgPCByb3dzcGxpdHRlZC5sZW5ndGg7aT1pKzIgKSB7XG4gICAgIG15U2xpZGVyVmFsdWVzW3BhcnNlSW50KHJvd3NwbGl0dGVkW2ldKV09IHJvd3NwbGl0dGVkW2krMV07XG4gICAgIH1cbiAgICAgc2xpZGVyVmFsdWVzW3NsaWRlcklkXSA9IG15U2xpZGVyVmFsdWVzO1xuICAgICAqL1xuICAgIGlmIChyb3dzcGxpdHRlZFsyXS5pbmRleE9mKCcoJykgPiAwKSB7IC8vZml4IGJ1ZyAjMjY5IHNjYWxlIDAgMTAwKDAuNSkgd2lsbCBiZSB0cmFuc2xhdGVkIGFzIDAgMTAwIHdpdGggc3RlcCAwLjVcbiAgICAgIGxldCBtYXhzdGVwID0gcm93c3BsaXR0ZWRbMl0uc3BsaXQoL1tcXChcXCldLyk7XG4gICAgICAvL2NvbnNvbGUubG9nKFwibWF4c3RlcFwiKTtcbiAgICAgIC8vY29uc29sZS5sb2cobWF4c3RlcClcbiAgICAgIGZvciAodmFyIGkgPSAzOyBpIDwgcm93c3BsaXR0ZWQubGVuZ3RoOyBpID0gaSArIDIpIHtcbiAgICAgICAgLy9teVNsaWRlclZhbHVlc1tNYXRoLmZsb29yKHBhcnNlSW50KHJvd3NwbGl0dGVkW2ldKS9tYXhzdGVwWzFdIC0gcm93c3BsaXR0ZWRbMV0pXSA9IHJvd3NwbGl0dGVkW2kgKyAxXTsvL2ZpeCBidWcgIzI2OSBhZGQgY29ycmVjdCBpbmRpY2VzIHRvIHRpY2tzIC0xMDAgMTAwKDAuNSkgd2lsbCBtYWtlIC0yMDAgMjAwXG4gICAgICAgIG15U2xpZGVyVmFsdWVzW3BhcnNlRmxvYXQocm93c3BsaXR0ZWRbaV0pXSA9IHJvd3NwbGl0dGVkW2kgKyAxXTsgLy9maXggYnVnICMyNjkgbmV3IHZlcnNpb24gb2YgbGFiZWxlZCwgY2hhbmdlZCB0byBwYXJzZWZsb2F0XG4gICAgICAgIC8vbXlTbGlkZXJWYWx1ZXNbcm93c3BsaXR0ZWRbaV1dID0gcm93c3BsaXR0ZWRbaSArIDFdOyAvL2ZpeCBidWcgI21pbnVzIGZsb2F0IHZhbHVlcyBub3QgZGV0ZXJtaW5lZD8/XG4gICAgICB9XG4gICAgICB0aGlzLnNsaWRlclZhbHVlc1t0aGlzLnNsaWRlcklkXSA9IG15U2xpZGVyVmFsdWVzO1xuXG4gICAgICB0cmFuc2xhdGVkUm93ICs9ICc8c2NyaXB0PkludGVycHJldGVyLm1ha2VWQVNsaWRlcignICsgdGhpcy5zbGlkZXJJZCArICcsJyArIHJvd3NwbGl0dGVkWzFdICsgJywnICsgbWF4c3RlcFswXSArICcsICcgKyB0aGlzLnF1ZXN0aW9uUGFnZSArICcsJyArIG1heHN0ZXBbMV0gKyAnKTs8L3NjcmlwdD4nO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGkgPSAzOyBpIDwgcm93c3BsaXR0ZWQubGVuZ3RoOyBpID0gaSArIDIpIHtcbiAgICAgICAgbXlTbGlkZXJWYWx1ZXNbcGFyc2VJbnQocm93c3BsaXR0ZWRbaV0pXSA9IHJvd3NwbGl0dGVkW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2xpZGVyVmFsdWVzW3RoaXMuc2xpZGVySWRdID0gbXlTbGlkZXJWYWx1ZXM7XG4gICAgICB0cmFuc2xhdGVkUm93ICs9ICc8c2NyaXB0PkludGVycHJldGVyLm1ha2VWQVNsaWRlcignICsgdGhpcy5zbGlkZXJJZCArICcsJyArIHJvd3NwbGl0dGVkWzFdICsgJywnICsgcm93c3BsaXR0ZWRbMl0gKyAnLCAnICsgdGhpcy5xdWVzdGlvblBhZ2UgKyAnKTs8L3NjcmlwdD4nO1xuICAgIH1cbiAgICAvL2NvbnNvbGUubG9nKFwidmEgaG9kbm90eSBqczpcIiArIHRyYW5zbGF0ZWRSb3cpO1xuXG4gICAgcmV0dXJuIHRyYW5zbGF0ZWRSb3c7XG4gIH1cblxuXG4gIHRyYW5zbGF0ZVNrYWxvdmFjaShyb3cpIHtcbiAgICBsZXQgdHJhbnNsYXRlZFJvdyA9ICcnOy8vXCI8YnIgLz5cIjtcbiAgICB0aGlzLnNsaWRlcklkKys7XG4gICAgaWYgKHJvdykgdGhpcy5yZXN1bHQubGFzdG90YXprYSA9IEludGVycHJldGVyLmV4dHJhY3Qocm93LCAndGFzayAnKTsgIC8vZml4IGJ1ZyAjMTk4XG4gICAgLy9tb3ZlIHRvIHRhc2sgcXVlc3Rpb25QYWdlKys7IC8vbW92ZWQgZnJvbSBza2Fsb3ZhY2k/P2hvZG5vdHlcbiAgICAvL2ZpeCAjMjEyICAgIHRyYW5zbGF0ZWRSb3cgKz0gXCI8cCBpZD0ncVwiICsgY3VycmVudFBhZ2UgKyBcIi5cIiArIHF1ZXN0aW9uUGFnZSArIFwiJyBjbGFzcz0nbGFiZWwnPjxpbnB1dCBjbGFzcz0nc2xpZGVybGFiZWwnIHJlYWRvbmx5PSd0cnVlJyB0eXBlPSd0ZXh0JyBpZD0nc2xpZGVyXCIgKyBzbGlkZXJJZCArIFwiVmFsdWUnPjwvcD5cIjtcbiAgICB0cmFuc2xhdGVkUm93ICs9IFwiPHAgY2xhc3M9J2xhYmVsJz48aW5wdXQgY2xhc3M9J3NsaWRlcmxhYmVsJyByZWFkb25seT0ndHJ1ZScgdHlwZT0ndGV4dCcgaWQ9J3NsaWRlclwiICsgdGhpcy5zbGlkZXJJZCArIFwiVmFsdWUnPjwvcD5cIjtcbiAgICB0cmFuc2xhdGVkUm93ICs9IFwiPGRpdiBpZD0nc2xpZGVyXCIgKyB0aGlzLnNsaWRlcklkICsgXCInPjwvZGl2PlwiO1xuICAgIC8vdHJhbnNsYXRlZFJvdyArPSBcIjxiciAvPjxiciAvPlwiO1xuICAgIC8vY29uc29sZS5sb2coXCJ0cmFuc2xhdGVTa2Fsb3ZhY2kgXCIgKyBzbGlkZXJJZCk7XG4gICAgLy9tb3ZlIGl0IHRvIHNrYWxvdmFjaWhvZG5vdHlcbiAgICByZXR1cm4gdHJhbnNsYXRlZFJvdztcbiAgfVxuXG5cbiAgdHJhbnNsYXRlUG9waXMocm93KSB7XG4gICAgbGV0IHRhc2tpbmRleCA9ICcnOyBpZiAodGhpcy5zbG91cGNlICYmICF0aGlzLnBhcm92YW90YXprYSkgdGFza2luZGV4ID0gJyAjMSc7XG4gICAgaWYgKEludGVycHJldGVyLmVuZHNXaXRoKHJvdywgJz8nKSkgdGhpcy5yZXN1bHQuc2V0RGVmYXVsdE9wdGlvbmFsQW5zd2VyKHRoaXMuY3VycmVudFBhZ2UsIHRoaXMucXVlc3Rpb25QYWdlLCB0YXNraW5kZXgpO1xuICAgIGVsc2UgdGhpcy5yZXN1bHQuc2V0RGVmYXVsdEFuc3dlcih0aGlzLmN1cnJlbnRQYWdlLCB0aGlzLnF1ZXN0aW9uUGFnZSwgdGFza2luZGV4KTtcbiAgICBsZXQgdHJhbnNsYXRlZHJvdyA9IFwiPHRleHRhcmVhIHJvd3M9JzEnIG9ua2V5dXA9J3dpbmRvdy5yaS5zZXRBbnN3ZXIoXCIgKyB0aGlzLmN1cnJlbnRQYWdlICsgJywnICsgdGhpcy5xdWVzdGlvblBhZ2UgKyBcIix0aGlzKSc+PC90ZXh0YXJlYT5cIjtcbiAgICBpZiAodGhpcy5zbG91cGNlKSB7XG4gICAgICBpZiAodGhpcy5wYXJvdmFvdGF6a2EpIHtcbiAgICAgICAgdHJhbnNsYXRlZHJvdyArPSAnPC9maWVsZHNldD48L2Zvcm0+PC90ZD48L3RyPic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1ZXN0aW9uUGFnZSsrO1xuICAgICAgICB0YXNraW5kZXggPSAnICMyJztcbiAgICAgICAgdHJhbnNsYXRlZHJvdyArPSAnPC9maWVsZHNldD48L2Zvcm0+PC90ZD48dGQ+JyArIHRoaXMuZ2VuZXJhdGVIdG1sT3RhemthUm93KHRhc2tpbmRleCk7IC8vZml4IGJ1ZyMyNDkgYWRkZWQgY2xvc2luZyBmb3JtIHRhZ1xuICAgICAgICBpZiAoSW50ZXJwcmV0ZXIuZW5kc1dpdGgocm93LCAnPycpKSB0aGlzLnJlc3VsdC5zZXREZWZhdWx0T3B0aW9uYWxBbnN3ZXIodGhpcy5jdXJyZW50UGFnZSwgdGhpcy5xdWVzdGlvblBhZ2UsICcgIzInKTtcbiAgICAgICAgZWxzZSB0aGlzLnJlc3VsdC5zZXREZWZhdWx0QW5zd2VyKHRoaXMuY3VycmVudFBhZ2UsIHRoaXMucXVlc3Rpb25QYWdlLCB0YXNraW5kZXgpO1xuICAgICAgICB0cmFuc2xhdGVkcm93ICs9IFwiPHRleHRhcmVhIHJvd3M9JzEnIG9ua2V5dXA9J3dpbmRvdy5yaS5zZXRBbnN3ZXIoXCIgKyB0aGlzLmN1cnJlbnRQYWdlICsgJywnICsgdGhpcy5xdWVzdGlvblBhZ2UgKyBcIix0aGlzKSc+PC90ZXh0YXJlYT5cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zbGF0ZWRyb3c7XG4gIH1cblxuICAvL2lmIHRoZSBxdWVzdGlvbiBpcyBub3QgY2xvc2VkIHB1dCB2YWx1ZXMgZnJvbSBwcmV2aW91c2x5IGRlZmluZWQgcXVlc3Rpb24gd2l0aCB2YWx1ZXNcbiAgY2xvc2VPdGF6a2EoKSB7XG4gICAgaWYgKCF0aGlzLmhvZG5vdHlTZXR0ZWQpIHtcbiAgICAgIC8vY29uc29sZS5sb2coXCJjbG9zZU90YXprYSgpIGxhc3QgdmFsdWVzIG5vdCBzZXRcIik7XG4gICAgICAvL2NvbnNvbGUubG9nKGhvZG5vdHkpO1xuICAgICAgLy9jb25zb2xlLmxvZyhsYXN0b3RhemthKTtcXFxuICAgICAgdGhpcy5ob2Rub3R5U2V0dGVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGlzLmhvZG5vdHlbdGhpcy5yZXN1bHQubGFzdG90YXprYV0pIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInNldHRpbmcgZnJvbSBsYXN0IHZhbHVlc1wiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlSG9kbm90eSh0aGlzLmhvZG5vdHlbdGhpcy5yZXN1bHQubGFzdG90YXprYV0pO1xuICAgICAgfSByZXR1cm4gJzwvZmllbGRzZXQ+PC9mb3JtPlxcbic7XG4gICAgfSByZXR1cm4gJyc7XG4gIH1cbiAgLypcbiAgICpcdFwic2xvdXBjZVwiIGNvbW1hbmQgaW5pdGlhdGUgdGhlIEhUTUwgb3V0cHV0IHRvIGJlIGdlbmVyYXRlIGludG8gdGhlIEhUTUwgdGFibGUgd2l0aCAyIGNvbGx1bW5zXG4gICAqL1xuICB0cmFuc2xhdGVTbG91cGNlKCkge1xuICAgIGlmICghdGhpcy5zbG91cGNlKSB7XG4gICAgICB0aGlzLnNsb3VwY2UgPSB0cnVlO1xuICAgICAgLy9yZXR1cm4gXCI8dGFibGU+PHRoZWFkPjx0cj48dGggY2xhc3M9J3RhYmxlZmlyc3QnLz48dGggY2xhc3M9J3RhYmxlc2Vjb25kJy8+PC90aGVhZD48dGJvZHk+PHRyPlwiO1xuICAgICAgcmV0dXJuICc8dGFibGU+PHRyPic7XG4gICAgfSByZXR1cm4gJyc7XG4gIH1cblxuICBjbG9zZVNsb3VwY2UoKSB7XG4gICAgaWYgKHRoaXMuc2xvdXBjZSkge1xuICAgICAgdGhpcy5zbG91cGNlID0gZmFsc2U7XG4gICAgICByZXR1cm4gJzwvdHI+PC90Ym9keT48L3RhYmxlPic7XG4gICAgfSByZXR1cm4gJyc7XG4gIH1cblxuICAvL3NlbGVjdCBnZW5lcmF0ZXMgc2VsZWN0IG1lbnVcbiAgdHJhbnNsYXRlU2VsZWN0KHJvd3NwbGl0dGVkKSB7XG4gICAgLy9maXggYnVnIC4uLiBpbmRpY2F0ZSB0aGF0IHRoZSBlbGVtZW50IHdhcyBhbnN3ZXJlZCBieSBjaGFuZ2luZyB0aGUgYmFja2dyb3VuZFxuICAgIGxldCByb3cgPSBcIjxzZWxlY3Qgb25jbGljaz0ndGhpcy5zdHlsZS5iYWNrZ3JvdW5kPVxcXCJsaWdodGJsdWVcXFwiOyB3aW5kb3cucmkuc2V0QW5zd2VyKFwiICsgdGhpcy5jdXJyZW50UGFnZSArICcsJyArIHRoaXMucXVlc3Rpb25QYWdlICsgXCIsdGhpcyk7JyBvbmNoYW5nZT0nd2luZG93LnJpLnNldEFuc3dlcihcIiArIHRoaXMuY3VycmVudFBhZ2UgKyAnLCcgKyB0aGlzLnF1ZXN0aW9uUGFnZSArIFwiLHRoaXMpOyc+XCI7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCByb3dzcGxpdHRlZC5sZW5ndGg7IGkrKykge1xuICAgICAgcm93ICs9IFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyByb3dzcGxpdHRlZFtpXSArIFwiJz5cIiArIHJvd3NwbGl0dGVkW2ldICsgJzwvb3B0aW9uPic7XG4gICAgfVxuICAgIHJvdyArPSAnPC9zZWxlY3Q+JztcbiAgICB0aGlzLnJlc3VsdC5zZXREZWZhdWx0QW5zd2VyKHRoaXMuY3VycmVudFBhZ2UsIHRoaXMucXVlc3Rpb25QYWdlKTsgLy9maXggYnVnICMgMTk4XG4gICAgcmV0dXJuIHJvdztcbiAgfVxuXG4gIHRyYW5zbGF0ZVN0eWxlKHByZXZpb3VzdG9rZW4sIHJvdykge1xuICAgIGxldCBmaXJzdHRva2VuID0gcm93LnRyaW0oKS5zcGxpdCgnICcsIDIpWzBdOyAvL2dldHMgI3N0eWxlIG9yICNzdHlsZWJ1dHRvbiBvciAjc3R5bGVmb3JtXG4gICAgbGV0IHN0eWxlZGVmaW5pdGlvbiA9IEludGVycHJldGVyLmV4dHJhY3Qocm93LCBmaXJzdHRva2VuKTsgLy9leHRyYWN0IHRoZSBwcmV2aW91c2x5IG9idGFpbmVkIHRva2VuXG4gICAgaWYgKERzbC5pc09icmF6b3ZrYShwcmV2aW91c3Rva2VuKSkgLy9zdHlsZSBvZiBib2R5IGUuZy46bWF4LXdpZHRoOjQwZW1cbiAgICB7cmV0dXJuIFwiXFxuPHNjcmlwdD5kb2N1bWVudC5ib2R5LnN0eWxlPSdcIiArIHN0eWxlZGVmaW5pdGlvbiArIFwiJzwvc2NyaXB0PlxcblwiO31cbiAgICBpZiAoRHNsLmlzWnZ1ayhwcmV2aW91c3Rva2VuKSkgLy9zdHlsZSBvZiBhbGwgc3RpbXVsdXMgYXR0cmlidXRlIGUuZy46IHdpZHRoOjEwJTtcbiAgICB7cmV0dXJuIFwiXFxuPHNjcmlwdD4kKCcuc3RpbXVsdXMnKS5hdHRyKCdzdHlsZScsJ1wiICsgc3R5bGVkZWZpbml0aW9uICsgXCInKTs8L3NjcmlwdD5cXG5cIjt9XG4gICAgaWYgKHByZXZpb3VzdG9rZW4gPT09ICdidXR0b24nKSB7cmV0dXJuIFwiXFxuPHNjcmlwdD4kKCcuc291bmQtYnV0dG9uJykuYXR0cignc3R5bGUnLCdcIiArIHN0eWxlZGVmaW5pdGlvbiArIFwiJyk7PC9zY3JpcHQ+XFxuXCI7fVxuICAgIGlmIChEc2wuaXNPdGF6a2EocHJldmlvdXN0b2tlbikpIHtyZXR1cm4gXCJcXG48c2NyaXB0PiQoJy50YXNrJykuYXR0cignc3R5bGUnLCdcIiArIHN0eWxlZGVmaW5pdGlvbiArIFwiJyk7PC9zY3JpcHQ+XFxuXCI7fVxuICAgIGlmIChwcmV2aW91c3Rva2VuID09PSAnZm9ybScpIHtcbiAgICAgIHJldHVybiAnXFxuPHNjcmlwdD4nICtcbiAgICAgICAgLy9cImNvbnNvbGUubG9nKCdcIiArbGFzdGZvcm1pZGVzY2FwZWQrXCInKTtcIisgLy9sb2dzXG4gICAgICAgIFwiJCgnI1wiICsgdGhpcy5sYXN0Zm9ybWlkZXNjYXBlZCArIFwiJykuYXR0cignc3R5bGUnLCdcIiArIHN0eWxlZGVmaW5pdGlvbiArIFwiJyk7XCIgKyAvL3NldHMgc3R5bGUgZm9yIHRoZSBmb3JtIGVsZW1lbnQgd2l0aCBsYXN0IGZvcm1pZFxuICAgICAgICBcIiQoJyNcIiArIHRoaXMubGFzdGZvcm1pZGVzY2FwZWQgKyBcIiB+IGZvcm0nKS5hdHRyKCdzdHlsZScsJ1wiICsgc3R5bGVkZWZpbml0aW9uICsgXCInKTtcIiArIC8vYW5kIHNldHMgc3R5bGUgZm9yIGFsbCBvdGhlciBzaWJsaW5nIGZvcm1zXG4gICAgICAgICc8L3NjcmlwdD5cXG4nO1xuICAgIH1cbiAgICAvL2ZpeCAjMjEyLCAyNDhcbiAgICAvL3JldHVybiBcIlxcbjxzY3JpcHQ+JCgnLnRhc2snKS5jaGlsZHJlbignZm9ybScpLmF0dHIoJ3N0eWxlJywnXCIgKyBzdHlsZWRlZmluaXRpb24gKyBcIicpOzwvc2NyaXB0PlxcblwiO1xuICAgIHJldHVybiAnJztcbiAgfVxuXG5cbiAgdHJhbnNsYXRlVHlwZShyb3cpIHtcbiAgICAvL3RyYW5zbGF0ZXMgdHlwZSAtIGVkdWNhdGlvbmFsIG1vZGUsIHByZXZpb3VzIGJ1dHRvbiBhbGxvd2VkL25vdGFsbG93ZWQgZXRjLlxuICAgIGlmIChyb3cuY29udGFpbnMoJ25vcHJldmlvdXNidXR0b24nKSkgdGhpcy5hbGxvd3ByZXYgPSBmYWxzZTtcbiAgICBpZiAocm93LmNvbnRhaW5zKCd5ZXNwcmV2aW91c2J1dHRvbicpKSB0aGlzLmFsbG93cHJldiA9IHRydWU7XG4gICAgaWYgKHJvdy5jb250YWlucygnZWR1Y2F0aW9uYWwnKSkgdGhpcy5lZHVjYXRpb25hbCA9IHRydWU7XG4gICAgaWYgKHRoaXMuZWR1Y2F0aW9uYWwpIHtcbiAgICAgIHRoaXMuZWR1aWQgPSByb3cubWF0Y2goL2VkdWNhdGlvbmFsXFwoKFtcXGRdKylcXCkvKVsxXTtcbiAgICAgIGlmICh0aGlzLmVkdWlkICE9PSAnJykgdGhpcy5nZXRFZHVSZXN1bHRzKCk7XG4gICAgfSAvL2luZGV4T2YoXCJlZHVjYXRpb25hbFwiKSsxXG4gIH1cblxuICBnZXRFZHVSZXN1bHRzKCkge1xuICAgICQuZ2V0SlNPTihQc3ljaG9SZXN1bHRJZFVybCArIHRoaXMuZWR1aWQsIG51bGwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIC8vY29uc29sZS5sb2coXCJyZXRyaWV2ZWQgZWR1Y2F0aW9uYWwgcmF3IHJlc3VsdHNcIik7XG4gICAgICAvL2NvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgdGhpcy5lZHVyZXN1bHRzID0ge307XG4gICAgICBkYXRhWzBdLnJlc3VsdEl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwicGFyc2luZyBpdGVtOlwiKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhpdGVtKTtcbiAgICAgICAgbGV0IGl0ZW1vYmogPSBSZXBhaXJKU09OUmVzdWx0SXRlbShpdGVtKTtcbiAgICAgICAgaWYgKCF0aGlzLmVkdXJlc3VsdHNbaXRlbW9iai5jYXNlXSkgdGhpcy5lZHVyZXN1bHRzW2l0ZW1vYmouY2FzZV0gPSB7fTtcbiAgICAgICAgaWYgKCF0aGlzLmVkdXJlc3VsdHNbaXRlbW9iai5jYXNlXS5hbnN3ZXIpIHRoaXMuZWR1cmVzdWx0c1tpdGVtb2JqLmNhc2VdLmFuc3dlciA9IFtdO1xuICAgICAgICB0aGlzLmVkdXJlc3VsdHNbaXRlbW9iai5jYXNlXS5hbnN3ZXJbaXRlbW9iai5xdWVzdGlvbi50cmltKCldID0gaXRlbW9iai5hbnN3ZXI7XG4gICAgICAgIGlmICghdGhpcy5lZHVyZXN1bHRzW2l0ZW1vYmouY2FzZV0ubm90ZSkgdGhpcy5lZHVyZXN1bHRzW2l0ZW1vYmouY2FzZV0ubm90ZSA9IFtdO1xuICAgICAgICBpZiAoIWl0ZW1vYmoubm90ZSkgdGhpcy5lZHVyZXN1bHRzW2l0ZW1vYmouY2FzZV0ubm90ZVtpdGVtb2JqLnF1ZXN0aW9uLnRyaW0oKV0gPSBpdGVtb2JqLmRhdGU7IC8vVE9ETyBuZXcgY29sbHVtbiBmb3Igbm90ZSwgY3VycmVudCB3b3JrYXJvdW5kLCBub3RlIGludG8gZGF0ZSBjb2xsdW1uXG4gICAgICAgIGVsc2UgdGhpcy5lZHVyZXN1bHRzW2l0ZW1vYmouY2FzZV0ubm90ZVtpdGVtb2JqLnF1ZXN0aW9uLnRyaW0oKV0gPSBpdGVtb2JqLm5vdGU7XG4gICAgICB9KTtcbiAgICAgIC8vY29uc29sZS5sb2coXCJyZXRyaWV2ZWQgZWR1Y2F0aW9uYWwgcmVzdWx0c1wiKTtcbiAgICAgIC8vY29uc29sZS5sb2coZWR1cmVzdWx0cyk7XG4gICAgfSk7XG4gIH1cbiAgLy90cmFuc2xhdGUgb25lIHJvd1xuICB0cmFuc2xhdGVUZXN0SXRlbXMocm93KSB7XG4gICAgbGV0IHRyYW5zbGF0ZWRSb3cgPSAnJztcbiAgICByb3cgPSByb3cudHJpbSgpO1xuICAgIC8vY29uc29sZS5sb2coJ3Rlc3QgaXRlbTonKTtcbiAgICAvL2NvbnNvbGUubG9nKHJvdyk7XG4gICAgLyp2YXIgcmUxID0gL1sgOyxdKy87IC8vIGZpeCBmZWF0dXJlIGJ1ZyAjMjQwLCBjb21hICcsJyBpcyB1c2VkIHRvIHNlcGFyYXRlIGludGVydmFsIG51bWJlcnNcbiAgICAgdmFyIHJvd3NwbGl0dGVkID0gcm93LnNwbGl0KHJlMSk7Ki9cbiAgICBsZXQgcm93c3BsaXR0ZWQgPSB0aGlzLnNwbGl0VmFsdWVzKHJvdyk7IC8vZml4IGJ1ZywgY29tYXMgYW5kIHNwYWNlcyBpbiBxdW90ZXNcbiAgICBpZiAocm93c3BsaXR0ZWQubGVuZ3RoID09PSAwKSByZXR1cm4gdHJhbnNsYXRlZFJvdztcblxuICAgIGlmIChEc2wuaXNadnVrKHJvd3NwbGl0dGVkWzBdKSkgdHJhbnNsYXRlZFJvdyArPSB0aGlzLnN0aW11bC50cmFuc2xhdGVadnVrKHJvd3NwbGl0dGVkLCB0aGlzLnRzdGF0ZS5wb3JhZGl2bnRpY2luYWhvZG5lLCB0aGlzLnJlc3VsdCwgdGhpcy5zbG91cGNlKTtcbiAgICBlbHNlIGlmICghRHNsLnN0YXJ0c1dpdGhDb21tZW50KHJvd3NwbGl0dGVkWzBdKSkgdHJhbnNsYXRlZFJvdyArPSB0aGlzLnN0aW11bC50cmFuc2xhdGVOb25adnVrKHJvdyk7IC8vZG8gc2VwYXJhdGlvbiBiZXR3ZWVuIHN0aW11bGkgYW5kIG90aGVyIGVsZW1lbnRzXG5cbiAgICBpZiAoRHNsLmlzWnZ1ayhyb3dzcGxpdHRlZFswXSkpIHsgLyogYWxyZWFkeSBkb25lIGluIHByZXZpb3VzIGNhbGwsIG5vIGFjdGlvbiovIH1cbiAgICAvL2Vsc2UgaWYgKERzbC5pc1ZpZGVvKHJvd3NwbGl0dGVkWzBdKSkgdHJhbnNsYXRlZFJvdyArPSB0aGlzLnN0aW11bGkudHJhbnNsYXRlVmlkZW8ocm93c3BsaXR0ZWQpOyAvL2RlcHJlY2F0ZWRcbiAgICBlbHNlIGlmIChEc2wuaXNUZXh0KHJvd3NwbGl0dGVkWzBdKSkgdHJhbnNsYXRlZFJvdyArPSB0aGlzLnRyYW5zbGF0ZVRleHQocm93KTtcbiAgICBlbHNlIGlmIChEc2wuaXNTbG91cGNlKHJvd3NwbGl0dGVkWzBdKSkgdHJhbnNsYXRlZFJvdyArPSB0aGlzLnRyYW5zbGF0ZVNsb3VwY2UoKTtcbiAgICAvKmVsc2UgaWYgKERzbC5pc1Bhcm92YU90YXprYShyb3dzcGxpdHRlZFswXSkpIHsgLy9wcmlvcml0eSBvdmVyIERzbC5pc090YXprYVxuICAgICAgICB0cmFuc2xhdGVkUm93ICs9IHRoaXMuY2xvc2VPdGF6a2EoKTtcbiAgICAgICAgdHJhbnNsYXRlZFJvdyArPSB0aGlzLnRyYW5zbGF0ZVBhcm92YU90YXprYShyb3cpO1xuICAgIH0gLy9lbHNlIGlmIChEc2wuaXNTa2Fsb3ZhY2kocm93c3BsaXR0ZWRbMF0pKSB0cmFuc2xhdGVkUm93ICs9IHRyYW5zbGF0ZVNrYWxvdmFjaShyb3cpOyAvL3ByaW9yaXR5IG92ZXIgRHNsLmlzT3RhemthXG4gICAgKi9cbiAgICBlbHNlIGlmIChEc2wuaXNUYXNrRm9yU3RpbXVsaShyb3dzcGxpdHRlZFswXSkpIHtcbiAgICAgIHRyYW5zbGF0ZWRSb3cgKz0gdGhpcy5jbG9zZU90YXprYSgpO1xuICAgICAgaWYgKHRoaXMuc2xvdXBjZSkgdHJhbnNsYXRlZFJvdyArPSB0aGlzLnRyYW5zbGF0ZVRhc2tGb3JTdGltdWxpKHJvdyk7XG4gICAgICBlbHNlIENvbnNvbGUubG9nKFwiV2FybmluZzogdW5leHBlY3RlZCB0b2tlbiAndGFza2ZvcnN0aW11bGknIG5vdCBpbiBwYWlyIFwiKTtcbiAgICB9IGVsc2UgaWYgKERzbC5pc090YXprYShyb3dzcGxpdHRlZFswXSkpIHtcbiAgICAgIHRyYW5zbGF0ZWRSb3cgKz0gdGhpcy5jbG9zZU90YXprYSgpO1xuICAgICAgaWYgKHRoaXMuc2xvdXBjZSkgdHJhbnNsYXRlZFJvdyArPSB0aGlzLnRyYW5zbGF0ZVBhcm92YU90YXprYShyb3cpO1xuICAgICAgZWxzZSB0cmFuc2xhdGVkUm93ICs9IHRoaXMudHJhbnNsYXRlT3RhemthKHJvdyk7XG4gICAgfSBlbHNlIGlmIChEc2wuaXNQYW5lbChyb3dzcGxpdHRlZFswXSkpIHtcbiAgICAgIHRyYW5zbGF0ZWRSb3cgKz0gdGhpcy5jbG9zZU90YXprYSgpO1xuICAgIH0gZWxzZSBpZiAoRHNsLmlzSG9kbm90eShyb3dzcGxpdHRlZFswXSkgfHwgRHNsLmlzQ2hlY2tib3h2YWx1ZXMocm93c3BsaXR0ZWRbMF0pKSB0cmFuc2xhdGVkUm93ICs9IHRoaXMudHJhbnNsYXRlSG9kbm90eShyb3dzcGxpdHRlZCk7IC8vd2lsbCBtYXRjaCBhbHNvIHZhbHVlc29ucm93IGFuZCBjaGVja2JveHZhbHVlc29ucm93XG4gICAgLy8gbW92ZSBkZWNEc2wuaXNpb24gb24gdHlwZSBvZiBob2Rub3R5IG9uIGZ1bmN0aW9uIHRyYW5zbGF0ZVZhbHVlcyBlbHNlIGlmIChEc2wuaXNIb2Rub3R5KHJvd3NwbGl0dGVkWzBdKSkgdHJhbnNsYXRlZFJvdyArPSB0cmFuc2xhdGVIb2Rub3R5KHJvd3NwbGl0dGVkLHRydWUpO1xuICAgIC8vZWxzZSBpZiAoRHNsLmlzQ2hlY2tib3h2YWx1ZXMocm93c3BsaXR0ZWRbMF0pKSB0cmFuc2xhdGVkUm93ICs9IHRyYW5zbGF0ZUhvZG5vdHkocm93c3BsaXR0ZWQsIGZhbHNlKTtcblxuICAgIGVsc2UgaWYgKERzbC5pc1NrYWxvdmFjaUhvZG5vdHkocm93c3BsaXR0ZWRbMF0pKSB0cmFuc2xhdGVkUm93ICs9IHRoaXMudHJhbnNsYXRlU2NhbGUodGhpcy5wcmV2aW91c3Jvdywgcm93c3BsaXR0ZWQpO1xuICAgIGVsc2UgaWYgKERzbC5pc1NrYWxhKHJvd3NwbGl0dGVkWzBdKSkgdHJhbnNsYXRlZFJvdyArPSB0aGlzLnRyYW5zbGF0ZVZBU2NhbGUodGhpcy5wcmV2aW91c3Jvdywgcm93c3BsaXR0ZWQpO1xuICAgIGVsc2UgaWYgKERzbC5pc1BvcGlzKHJvd3NwbGl0dGVkWzBdKSkgdHJhbnNsYXRlZFJvdyArPSB0aGlzLnRyYW5zbGF0ZVBvcGlzKHJvdyk7XG4gICAgZWxzZSBpZiAoRHNsLmlzU2VyYWQyZChyb3dzcGxpdHRlZFswXSkpIHRyYW5zbGF0ZWRSb3cgKz0gdGhpcy5yYW5raW5nMmQudHJhbnNsYXRlU2VyYWQyZChyb3cuc2xpY2UoJ3JhbmtpbmcyZCcubGVuZ3RoKSwgdGhpcy5zdGltdWwuYXVkaW9pZCwgdGhpcy5jdXJyZW50UGFnZSwgdGhpcy5xdWVzdGlvblBhZ2UrKyk7XG4gICAgZWxzZSBpZiAoRHNsLmlzU2VsZWN0KHJvd3NwbGl0dGVkWzBdKSkgdHJhbnNsYXRlZFJvdyArPSB0aGlzLnRyYW5zbGF0ZVNlbGVjdChyb3dzcGxpdHRlZCk7XG4gICAgZWxzZSBpZiAoRHNsLmlzU3R5bGVCdXR0b24ocm93c3BsaXR0ZWRbMF0pKSB0cmFuc2xhdGVkUm93ICs9IHRoaXMudHJhbnNsYXRlU3R5bGUoJ2J1dHRvbicsIHJvdyk7XG4gICAgZWxzZSBpZiAoRHNsLmlzU3R5bGVGb3JtKHJvd3NwbGl0dGVkWzBdKSkgdHJhbnNsYXRlZFJvdyArPSB0aGlzLnRyYW5zbGF0ZVN0eWxlKCdmb3JtJywgcm93KTtcbiAgICBlbHNlIGlmIChEc2wuaXNTdHlsZShyb3dzcGxpdHRlZFswXSkpIHRyYW5zbGF0ZWRSb3cgKz0gdGhpcy50cmFuc2xhdGVTdHlsZSh0aGlzLnByZXZpb3VzdG9rZW4sIHJvdyk7XG4gICAgZWxzZSBpZiAoRHNsLmlzVHlwZShyb3dzcGxpdHRlZFswXSkpIHRoaXMudHJhbnNsYXRlVHlwZShyb3cpO1xuICAgIHRoaXMucHJldmlvdXN0b2tlbiA9IHJvd3NwbGl0dGVkWzBdO1xuICAgIGlmICghRHNsLnN0YXJ0c1dpdGhDb21tZW50KHJvd3NwbGl0dGVkWzBdKSkgdGhpcy5wcmV2aW91c3JvdyA9IHJvdztcbiAgICByZXR1cm4gdHJhbnNsYXRlZFJvdztcbiAgfVxuXG4gIGZvb3RlclBhZ2VOdW1iZXIoKSB7XG4gICAgcmV0dXJuIFwiPHAgYWxpZ249J2NlbnRlcicgY2xhc3M9J2Zvb3Rlcic+T2JyYXpvdmthIFwiICsgdGhpcy5jdXJyZW50UGFnZSArICcgeiBjZWxrZW0gJyArIHRoaXMubWF4UGFnZXMgKyAnLjwvcD4nO1xuICB9XG5cbiAgLy9zaHVmZmxlIHJhbmRvbWx5IHRoZSBhcnJheVxuICBzaHVmZmxlKCkge1xuICAgIGxldCBpID0gdGhpcy5sZW5ndGg7IGxldCBqOyBsZXQgdGVtcDtcbiAgICBpZiAoaSA9PSAwKSByZXR1cm4gdGhpcztcbiAgICB3aGlsZSAoLS1pKSB7XG4gICAgICBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgICB0ZW1wID0gdGhpc1tpXTtcbiAgICAgIHRoaXNbaV0gPSB0aGlzW2pdO1xuICAgICAgdGhpc1tqXSA9IHRlbXA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cblxuICAvKlxuICAgKlx0dGhpcyBzY3JpcHQgd2lsbCBwcmVwcm9jZXNzIHRoZSB0ZXN0IC0gbWFrZSBjb21iaW5hdGlvbiBvZiBzY3JlZW5zIGV0Yy4gYmVmb3JlIGl0IGlzIGludGVycHJldHRlZFxuICAgKiBlLmcuIFwicGFyb3Z5dGVzdFwiLCB0aGVyZSBhcmUgbWFkZSBwYWlycyBmcm9tIHRoZSBzb3VuZHMgd2l0aGluIHRoaXMgdGVzdCBhbmQgZ2VuZXJhdGVkIHNjcmVlbnMsXG4gICAqICAgICAgZm9yIDIgc291bmQgdGhlcmUgaXMgMSBwYWlyLCBmb3IgMyBzb3VuZHMgdGhlcmUgYXJlIDMgcGFpciBjb21iaW5hdGlvbiBbMSwyXVsxLDNdWzIsM10sIC4uLlxuICAgKi9cbiAgLy8gICAgdGhpcy5wcmVwID0gbmV3IFByZXByb2Nlc29yKHRoaXMpOyAvL2JhY2t3YXJkIHJlZmVyZW5jZVxuICBpc1p2dWs7XG5cbiAgLy9yZXNldCBhbGwgdmFsdWVzXG4gIGluaXRUZXN0KGN1cnJlbnRSYXdUZXN0KSB7XG4gICAgLyp0aGlzLnRzdGF0ZS5wb3JhZGl2bnRpY2luYWhvZG5lID0gZmFsc2U7XG4gICAgdGhpcy50c3RhdGUucG9yYWRpenZ1a3VuYWhvZG5lID0gZmFsc2U7XG4gICAgdGhpcy50c3RhdGUucG9yYWRpY2FzZW5haG9kbmUgPSBmYWxzZTsqL1xuICAgIHRoaXMuZWR1Y2F0aW9uYWwgPSBmYWxzZTtcbiAgICB0aGlzLmhpZ2hsaWdodGVkID0gZmFsc2U7XG4gICAgdGhpcy5wcmVwID0gbmV3IFByZXByb2Nlc29yKHRoaXMpO1xuXG4gICAgdGhpcy5jdXJyZW50VGVzdCA9IHRoaXMucHJlcC5wcmVwcm9jZXNzVGVzdChjdXJyZW50UmF3VGVzdCk7IC8vcHJlcHJvY2VzcyBmcm9tIGN1cnJlbnRSYXdUZXN0IHRvIGN1cnJlbnRUZXN0XG4gICAgdGhpcy50c3RhdGUgPSB0aGlzLnByZXAudHN0YXRlO1xuICAgIC8vY29uc29sZS5sb2coY3VycmVudFRlc3QpO1xuICAgIHRoaXMubWF4UGFnZXMgPSB0aGlzLmN1cnJlbnRUZXN0Lm1hdGNoKC9cXG5bXFxzXSpzY3JlZW4vaWcpLmxlbmd0aDtcbiAgICB0aGlzLnRlc3ROYW1lID0gSW50ZXJwcmV0ZXIuZXh0cmFjdCh0aGlzLmN1cnJlbnRUZXN0Lm1hdGNoKC90ZXN0IC4qL2kpLnRvU3RyaW5nKCksICd0ZXN0ICcpO1xuXG4gICAgdGhpcy5jdXJyZW50Q3Vyc29yID0gMDtcbiAgICB0aGlzLmN1cnJlbnRQYWdlID0gMDtcbiAgICB0aGlzLnJlc3VtZWlkID0gMDtcblxuICAgIHRoaXMucmVzdWx0LmFuc3dlcnMgPSBbXTsvL3Jlc2V0IGFuc3dlcnMgVE9ETyBjaGVja1xuICAgIHRoaXMuc2xpZGVyVmFsdWVzID0gW107Ly9yZXNldCBzbGlkZXIgdmFsdWVzXG4gIH1cblxuICByZXN1bWVUZXN0KGN1cnJlbnRSYXdUZXN0LCBwYWdlLCBhbnN3ZXJzLCByZXN1bWVpZCkge1xuICAgIHRoaXMuZWR1Y2F0aW9uYWwgPSBmYWxzZTsgLy9UT0RPIHBlcnNpc3RcbiAgICB0aGlzLmhpZ2hsaWdodGVkID0gZmFsc2U7IC8vVE9ETyBwZXJzaXN0XG4gICAgdGhpcy5zbGlkZXJWYWx1ZXMgPSBbXTsvL1RPRE8gcGVyc2lzdD9cbiAgICB0aGlzLnJlc3VtZWlkID0gcmVzdW1laWQ7XG4gICAgdGhpcy5wcmVwID0gbmV3IFByZXByb2Nlc29yKHRoaXMpO1xuXG4gICAgdGhpcy5jdXJyZW50VGVzdCA9IGN1cnJlbnRSYXdUZXN0OyAvL2E7cmVhZHkgcHJlcHJvY2Vzc2VkXG4gICAgdGhpcy50c3RhdGUgPSB0aGlzLnByZXAudHN0YXRlO1xuICAgIC8vY29uc29sZS5sb2coY3VycmVudFRlc3QpO1xuICAgIHRoaXMubWF4UGFnZXMgPSB0aGlzLmN1cnJlbnRUZXN0Lm1hdGNoKC9cXG5bXFxzXSpzY3JlZW4vaWcpLmxlbmd0aDtcbiAgICB0aGlzLnRlc3ROYW1lID0gSW50ZXJwcmV0ZXIuZXh0cmFjdCh0aGlzLmN1cnJlbnRUZXN0Lm1hdGNoKC90ZXN0IC4qL2kpLnRvU3RyaW5nKCksICd0ZXN0ICcpO1xuXG4gICAgdGhpcy5jdXJyZW50Q3Vyc29yID0gMDtcbiAgICB0aGlzLmN1cnJlbnRQYWdlID0gMDtcbiAgICAvLyAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZTsgLy9wZXJzaXN0ZW50XG4gICAgaWYgKHBhZ2UgPiAwKSB7XG4gICAgICBwYWdlLS07XG4gICAgICB3aGlsZSAodGhpcy5jdXJyZW50UGFnZSA8IHBhZ2UpIHRoaXMubmV4dHBhZ2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ3dlaXJkIHBhdXNlZCBhdCBwYWdlIDA7IG9yIDE7Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXN1bHQuYW5zd2VycyA9IGFuc3dlcnM7Ly9yZXNldCBhbnN3ZXJzXG4gIH1cblxuICBmaW5kUHJldmlvdXNPYnJhem92a2EodGVzdERTTCkge1xuICAgIGxldCBzcGxpdHRlZCA9IHRlc3REU0wuc3BsaXQoJ1xcbicpO1xuICAgIHRoaXMuY3VycmVudEN1cnNvci0tO1xuICAgIHRoaXMuY3VycmVudFBhZ2UgLT0gMjtcbiAgICB3aGlsZSAoKHRoaXMuY3VycmVudEN1cnNvciA+IDApICYmICghc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yXS5zdGFydHNXaXRoKCdzY3JlZW4nKSkpIHRoaXMuY3VycmVudEN1cnNvci0tO1xuICAgIGlmICh0aGlzLmN1cnJlbnRDdXJzb3IgPiAwKSB0aGlzLmN1cnJlbnRDdXJzb3ItLTsgLy9zdGVwIG92ZXIgdGhlIGN1cmVudCBpdGVtXG4gICAgd2hpbGUgKCh0aGlzLmN1cnJlbnRDdXJzb3IgPiAwKSAmJiAoIXNwbGl0dGVkW3RoaXMuY3VycmVudEN1cnNvcl0uc3RhcnRzV2l0aCgnc2NyZWVuJykpKSB0aGlzLmN1cnJlbnRDdXJzb3ItLTtcbiAgfVxuXG4gIC8qbmV4dHBhZ2UoKXtcbiAgICByZXR1cm4gXCI8cD5zb21lIGRlbW8gdGVzdDwvcD5cIjtcbiAgfSovXG5cbiAgc3RhdGljIG1ha2VTbGlkZXIoc2xpZGVyVmFsLCBzbGlkZXJNaW4sIHNsaWRlck1heCwgc2xpZGVyU3RlcCwgc2xpZGVySWQsIG15UXVlc3Rpb25QYWdlKSB7XG4gICAgLy9jb25zb2xlLmxvZyhcInNsaWRlclwiKTtcbiAgICB0aGlzLnJlc3VsdC5zZXREZWZhdWx0QW5zd2VyKC8qcGFyc2VyKi90aGlzLmN1cnJlbnRQYWdlLCBteVF1ZXN0aW9uUGFnZSk7XG4gICAgbGV0IG15c2xpZGVyID0gJCgnI3NsaWRlcicgKyBzbGlkZXJJZCk7XG4gICAgbXlzbGlkZXIubGFiZWxlZHNsaWRlcih7XG4gICAgICB2YWx1ZTogc2xpZGVyVmFsLCBtaW46IHNsaWRlck1pbiwgbWF4OiBzbGlkZXJNYXgsIHN0ZXA6IHNsaWRlclN0ZXAsIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgJCgnI3NsaWRlcicgKyBzbGlkZXJJZCArICdWYWx1ZScpLnZhbCgvKnBhcnNlciovdGhpcy5zbGlkZXJWYWx1ZXNbc2xpZGVySWRdW3VpLnZhbHVlXSk7XG4gICAgICAgIC8vdWkuaGFuZGxlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwibGlnaHRibHVlXCI7Ly9jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsXCJsaWdodGJsdWVcIik7IGpxdWVyeSB1aVxuICAgICAgICB0aGlzLnN0eWxlLmJhY2tncm91bmQgPSAnbGlnaHRibHVlJztcbiAgICAgICAgd2luZG93LnJpLnNldEFuc3dlcigvKnBhcnNlciovdGhpcy5jdXJyZW50UGFnZSwgbXlRdWVzdGlvblBhZ2UsIC8qcGFyc2VyKi90aGlzLnNsaWRlclZhbHVlc1tzbGlkZXJJZF1bdWkudmFsdWVdKTtcbiAgICAgIH0sXG4gICAgICBzdGFydDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgICQoJyNzbGlkZXInICsgc2xpZGVySWQgKyAnVmFsdWUnKS52YWwoLypwYXJzZXIqL3RoaXMuc2xpZGVyVmFsdWVzWy8qcGFyc2VyKi90aGlzLnNsaWRlcklkXVt1aS52YWx1ZV0pO1xuICAgICAgICAvL3VpLmhhbmRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImxpZ2h0Ymx1ZVwiO1xuICAgICAgICB0aGlzLnN0eWxlLmJhY2tncm91bmQgPSAnbGlnaHRibHVlJztcbiAgICAgICAgd2luZG93LnJpLnNldEFuc3dlcigvKnBhcnNlciovdGhpcy5jdXJyZW50UGFnZSwgbXlRdWVzdGlvblBhZ2UsIC8qcGFyc2VyKi90aGlzLnNsaWRlclZhbHVlc1svKnBhcnNlciovdGhpcy5zbGlkZXJJZF1bdWkudmFsdWVdKTtcbiAgICAgIH0sXG4gICAgICB0aWNrTGFiZWxzOiAvKnBhcnNlciovdGhpcy5zbGlkZXJWYWx1ZXNbc2xpZGVySWRdXG4gICAgfSk7XG4gICAgbGV0IHdpZHRoID0gbXlzbGlkZXIud2lkdGgoKSAvICgvKnBhcnNlciovdGhpcy5zbGlkZXJWYWx1ZXNbLypwYXJzZXIqL3RoaXMuc2xpZGVySWRdLmxlbmd0aCAtIDEpO1xuICB9XG5cbiAgc3RhdGljIG1ha2VWQVNsaWRlcihzbGlkZXJJZCwgc2xpZGVyTWluLCBzbGlkZXJNYXgsIG15UXVlc3Rpb25QYWdlLCBzbGlkZXJTdGVwID0gMSkge1xuICAgIC8vY29uc29sZS5sb2coXCJWQXNsaWRlclwiKTtcbiAgICB0aGlzLnJlc3VsdC5zZXREZWZhdWx0QW5zd2VyKC8qcGFyc2VyKi90aGlzLmN1cnJlbnRQYWdlLCBteVF1ZXN0aW9uUGFnZSk7XG4gICAgbGV0IHNsaWRlcktleXNzdHIgPSBPYmplY3Qua2V5cygvKnBhcnNlciovdGhpcy5zbGlkZXJWYWx1ZXNbc2xpZGVySWRdKTtcbiAgICBsZXQgc2xpZGVyS2V5cyA9IHNsaWRlcktleXNzdHIubWFwKE51bWJlcik7IC8vZml4IGJ1ZyAjMjY5IG5ldyB2ZXJzaW9uIG9mIGxhYmVsZWRzbGlkZXIgcmVxdWlyZXMgbnVtYmVyc1xuXG4gICAgJCgnI3NsaWRlcicgKyBzbGlkZXJJZCkubGFiZWxlZHNsaWRlcih7XG4gICAgICB2YWx1ZTogc2xpZGVyTWluLCBtaW46IHNsaWRlck1pbiwgbWF4OiBzbGlkZXJNYXgsIHN0ZXA6IHNsaWRlclN0ZXAsIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgJCgnI3NsaWRlcicgKyBzbGlkZXJJZCArICdWYWx1ZScpLnZhbCh1aS52YWx1ZSk7XG4gICAgICAgIHRoaXMuc3R5bGUuYmFja2dyb3VuZCA9ICdsaWdodGJsdWUnO1xuICAgICAgICB3aW5kb3cucmkuc2V0QW5zd2VyKC8qcGFyc2VyKi90aGlzLmN1cnJlbnRQYWdlLCBteVF1ZXN0aW9uUGFnZSwgdWkudmFsdWUpO1xuICAgICAgfSxcbiAgICAgIHN0YXJ0OiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgJCgnI3NsaWRlcicgKyBzbGlkZXJJZCArICdWYWx1ZScpLnZhbCh1aS52YWx1ZSk7XG4gICAgICAgIHRoaXMuc3R5bGUuYmFja2dyb3VuZCA9ICdsaWdodGJsdWUnO1xuICAgICAgICAvLyQoXCIjc2xpZGVyXCIgKyBzbGlkZXJJZCkuY3NzKFwiYmFja2dyb3VuZFwiLFwibGlnaHRibHVlXCIpO1xuICAgICAgICB3aW5kb3cucmkuc2V0QW5zd2VyKC8qcGFyc2VyKi90aGlzLmN1cnJlbnRQYWdlLCBteVF1ZXN0aW9uUGFnZSwgdWkudmFsdWUpO1xuICAgICAgfSxcbiAgICAgIC8vdGlja0ludGVydmFsOnNsaWRlclN0ZXAsXG4gICAgICB0aWNrQXJyYXk6IHNsaWRlcktleXMsXG4gICAgICB0aWNrTGFiZWxzOiAvKnBhcnNlciovdGhpcy5zbGlkZXJWYWx1ZXNbc2xpZGVySWRdXG4gICAgfSk7XG4gIH1cblxuICBzdGFydHRlc3QoKSB7XG4gICAgJCgnI3RhYjJoZWxwJykuaGlkZSgpOy8vLmZhZGVPdXQoNTAwKTsgVE9ETyBodG1sIHNwZWNpZmljXG4gICAgbGV0IGN1cnJlbnRSYXdUZXN0ID0gdGhpcy5zZWxlY3RlZFRlc3REZWZpbml0aW9uO1xuICAgIGlmICh0eXBlb2YgdGhpcy5lZGl0b3IgIT09ICd1bmRlZmluZWQnKSBjdXJyZW50UmF3VGVzdCA9IHRoaXMuZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgLy8gICAgcGFyc2VyID0gbmV3IEludGVycHJldGVyKCk7XG4gICAgdGhpcy5pbml0VGVzdChjdXJyZW50UmF3VGVzdCk7XG4gICAgdGhpcy5oaWRlTm9uQW5zd2VyZWQoKTtcbiAgICB0aGlzLmNvbnRyb2xsZXIucHJldmlldy5pbm5lckhUTUwgPSB0aGlzLm5leHRwYWdlKCk7Ly8vKnBhcnNlciovdGhpcy5jdXJyZW50VGVzdCk7XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLmNvbnRyb2xsZXIucHJldmlldy5pbm5lckhUTUwpO1xuICAgIHRoaXMuZXZhbHVhdGVTY3JpcHRzKCk7XG4gIH1cblxuICByZXN1bWV0ZXN0KCkge1xuICAgICQoJyN0YWIyaGVscCcpLmhpZGUoKTsvLy5mYWRlT3V0KDUwMCk7IFRPRE8gaHRtbCBzcGVjaWZpY1xuICAgIC8vdmFyIGN1cnJlbnRSYXdUZXN0ID0gc2VsZWN0ZWRUZXN0RGVmaW5pdGlvbjtcbiAgICAvL2lmICh0eXBlb2YgZWRpdG9yICE9PSBcInVuZGVmaW5lZFwiKSBjdXJyZW50UmF3VGVzdCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgIC8vcGFyc2VyID0gbmV3IEludGVycHJldGVyKCk7XG4gICAgdGhpcy5yZXN1bWVUZXN0KHRoaXMuc2VsZWN0ZWRUZXN0RGVmaW5pdGlvbiwgdGhpcy5zZWxlY3RlZFRlc3RTY3JlZW5udW1iZXIsIHRoaXMuc2VsZWN0ZWRUZXN0QW5zd2VycywgdGhpcy5zZWxlY3RlZFRlc3RJZCk7XG4gICAgdGhpcy5oaWRlTm9uQW5zd2VyZWQoKTtcbiAgICB0aGlzLmNvbnRyb2xsZXIucHJldmlldy5pbm5lckhUTUwgPSB0aGlzLm5leHRwYWdlKCk7Ly8vKnBhcnNlciovdGhpcy5jdXJyZW50VGVzdCk7XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLmNvbnRyb2xsZXIucHJldmlldy5pbm5lckhUTUwpO1xuICAgIHRoaXMuZXZhbHVhdGVTY3JpcHRzKCk7XG4gIH1cblxuXG4gIG5leHRwYWdlKCkge1xuICAgIGxldCB0ZXN0RFNMID0gdGhpcy5jdXJyZW50VGVzdDtcbiAgICB0aGlzLmN1cnJlbnRQYWdlKys7XG4gICAgdGhpcy5xdWVzdGlvblBhZ2UgPSAwO1xuICAgIHRoaXMuc3RpbXVsLmF1ZGlvaWQgPSAwOyAvL3Jlc2V0IGF1ZGlvaWRcbiAgICBjb25zb2xlLmxvZygnbmV4dCBwYWdlJywgdGhpcy5jdXJyZW50UGFnZSk7XG4gICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPj0gdGhpcy5tYXhQYWdlcykge2lmICh0aGlzLmN1cnJlbnRQYWdlID09PSAxKSB0aGlzLmNvbnRyb2xsZXIubGFzdE5vUHJldlBhZ2UoKTsgZWxzZSB0aGlzLmNvbnRyb2xsZXIubGFzdFBhZ2UoKTt9IGVsc2UgaWYgKHRoaXMuY3VycmVudFBhZ2UgPT09IDEpIHRoaXMuY29udHJvbGxlci5maXJzdFBhZ2UoKTtcbiAgICBlbHNlIHRoaXMuY29udHJvbGxlci5taWRkbGVQYWdlKCk7XG4gICAgbGV0IHRyYW5zbGF0ZWRoZWFkZXIgPSAnJztcblxuICAgIGxldCBzcGxpdHRlZCA9IHRlc3REU0wuc3BsaXQoJ1xcbicpO1xuICAgIC8vZ28gZnJvbSBjdXJzb3IgdG8gdGhlIGZpcnN0IFwic2NyZWVuXCIgd2hpY2ggd2lsbCBiZSBzdGFydCBvZiBpbnRlcnByZXRhdGlvblxuICAgIHdoaWxlICgoLypwYXJzZXIqL3RoaXMuY3VycmVudEN1cnNvciA8IHNwbGl0dGVkLmxlbmd0aCkgJiYgKCFEc2wuaXNPYnJhem92a2Eoc3BsaXR0ZWRbLypwYXJzZXIqL3RoaXMuY3VycmVudEN1cnNvcl0pKSkgLypwYXJzZXIqL3RoaXMuY3VycmVudEN1cnNvcisrO1xuICAgIHRoaXMubnQgPSBbXTtcbiAgICAvL3RyYW5zbGF0ZSBvYnJhem92a2Egcm93XG4gICAgaWYgKC8qcGFyc2VyKi90aGlzLmN1cnJlbnRDdXJzb3IgPCBzcGxpdHRlZC5sZW5ndGgpIHtcbiAgICAgIHRyYW5zbGF0ZWRoZWFkZXIgKz0gLypwYXJzZXIqL3RoaXMudHJhbnNsYXRlT2JyYXpvdmthKHNwbGl0dGVkWy8qcGFyc2VyKi90aGlzLmN1cnJlbnRDdXJzb3JdKTtcbiAgICAgIHRoaXMubnQucHVzaCh0aGlzLm5ld1RyYW5zKHNwbGl0dGVkW3RoaXMuY3VycmVudEN1cnNvcl0pKTtcbiAgICAgIC8qcGFyc2VyKi90aGlzLmN1cnJlbnRDdXJzb3IrKztcbiAgICB9XG5cbiAgICAvL2ludGVycHJldCBldmVyeXRoaW5nIHVudGlsIG5leHQgJ29icmF6b3ZrYSBvciBlbmQnXG4gICAgd2hpbGUgKCgvKnBhcnNlciovdGhpcy5jdXJyZW50Q3Vyc29yIDwgc3BsaXR0ZWQubGVuZ3RoKSAmJiAoIURzbC5pc09icmF6b3ZrYShzcGxpdHRlZFsvKnBhcnNlciovdGhpcy5jdXJyZW50Q3Vyc29yXSkpKSB7XG4gICAgICB0cmFuc2xhdGVkaGVhZGVyICs9IC8qcGFyc2VyKi90aGlzLnRyYW5zbGF0ZVRlc3RJdGVtcyhzcGxpdHRlZFsvKnBhcnNlciovdGhpcy5jdXJyZW50Q3Vyc29yXSk7XG4gICAgICB0aGlzLm50LnB1c2godGhpcy5uZXdUcmFucyhzcGxpdHRlZFt0aGlzLmN1cnJlbnRDdXJzb3JdKSk7XG4gICAgICAvKnBhcnNlciovdGhpcy5jdXJyZW50Q3Vyc29yKys7XG4gICAgfVxuICAgIC8vY29uc29sZS5sb2coXCJ0cmFuc2xhdGVkIDA6XCIgKyB0cmFuc2xhdGVkaGVhZGVyKTtcbiAgICB0cmFuc2xhdGVkaGVhZGVyICs9IC8qcGFyc2VyKi90aGlzLmNsb3NlT3RhemthKCk7IC8vY2xvc2Ugb3BlbiBxdWVzdGlvbnMgd2l0aG91dCB2YWx1ZXNcbiAgICB0cmFuc2xhdGVkaGVhZGVyICs9IC8qcGFyc2VyKi90aGlzLmNsb3NlU2xvdXBjZSgpO1xuXG4gICAgdHJhbnNsYXRlZGhlYWRlciArPSAvKnBhcnNlciovdGhpcy5zdGltdWwuY2xvc2VRdWVzdGlvbkRpdigpO1xuICAgIHRyYW5zbGF0ZWRoZWFkZXIgKz0gLypwYXJzZXIqL3RoaXMuZm9vdGVyUGFnZU51bWJlcigpO1xuICAgIGNvbnNvbGUubG9nKCd0cmFuc2xhdGVkIGhlYWRlcjonLCB0cmFuc2xhdGVkaGVhZGVyKTtcbiAgICByZXR1cm4gdHJhbnNsYXRlZGhlYWRlcjtcbiAgfVxuXG4gIHRyYXZlcnNldGVzdChkZWZpbml0aW9uLCBjYWxsYmFjaywgZXJyb3JjYWxsYmFjaykge1xuICAgIC8qcGFyc2VyKi90aGlzLmluaXRUZXN0KGRlZmluaXRpb24pO1xuICAgIHdoaWxlICgvKnBhcnNlciovdGhpcy5jdXJyZW50UGFnZSA8IC8qcGFyc2VyKi90aGlzLm1heFBhZ2VzKSB0aGlzLm5leHRwYWdlKCk7XG4gICAgLy9ldmFsdWF0ZVNjcmlwdHMoKTsgLy90aGVyZSBhcmUgbm8gc2NyaXB0cywgb25seSBpbm5lcmh0bWxcbiAgICB0aGlzLnBvc3RBbnN3ZXJzKGNhbGxiYWNrLCBlcnJvcmNhbGxiYWNrKTtcbiAgfVxuXG4gIC8vVE9ETyBjaGVjayBpZiBuZWVkZWQgLSByZW1vdmVcbiAgY2xlYXJ0ZXN0KCkge1xuICAgIHRoaXMuY29udHJvbGxlci5wcmV2aWV3LmlubmVySFRNTCA9ICcnO1xuICAgIC8vdGhpcy5zaG93QnV0dG9uc1N0YXJ0KCk7XG4gICAgdGhpcy5jb250cm9sbGVyLnN0YXJ0UGFnZSgpO1xuICB9XG5cbiAgLy9UT0RPIGNoZWNrIGlmIG5lZWRlZCAtIHJlbW92ZVxuICBwcmV2aW91c3Rlc3RpdGVtKCkge1xuICAgIC8qcGFyc2VyKi90aGlzLmZpbmRQcmV2aW91c09icmF6b3ZrYSgvKnBhcnNlciovdGhpcy5jdXJyZW50VGVzdCk7XG4gICAgdGhpcy5jb250cm9sbGVyLnByZXZpZXcuaW5uZXJIVE1MID0gdGhpcy5uZXh0cGFnZSgpO1xuICAgIHRoaXMuZXZhbHVhdGVTY3JpcHRzKCk7XG4gIH1cblxuICAvL1RPRE8gdmlvbGF0aW9uIG9mIHNlcGFyYXRpb24sIG1peGVkIHBhcnNlci1pbnRlcnByZXRlciBhbmQgY29udGVudFxuICBjaGVja0Fuc3dlcnNJblNjcmVlbigpIHtcbiAgICBsZXQgZm91bmROQSA9IGZhbHNlO1xuICAgIGxldCBpdGVtO1xuICAgIGlmICgvKnBhcnNlciovdGhpcy5yZXN1bHQuYW5zd2Vyc1svKnBhcnNlciovdGhpcy5jdXJyZW50UGFnZSAtIDFdKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8LypwYXJzZXIqL3RoaXMucmVzdWx0LmFuc3dlcnNbLypwYXJzZXIqL3RoaXMuY3VycmVudFBhZ2UgLSAxXS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoLypwYXJzZXIqL3RoaXMucmVzdWx0LmFuc3dlcnNbLypwYXJzZXIqL3RoaXMuY3VycmVudFBhZ2UgLSAxXVtpXSAmJiAvKnBhcnNlciovdGhpcy5yZXN1bHQuYW5zd2Vyc1svKnBhcnNlciovdGhpcy5jdXJyZW50UGFnZSAtIDFdW2ldLmFuc3dlcikge1xuICAgICAgICAgIGlmICgvKnBhcnNlciovdGhpcy5yZXN1bHQuYW5zd2Vyc1svKnBhcnNlciovdGhpcy5jdXJyZW50UGFnZSAtIDFdW2ldLmFuc3dlciA9PT0gJ04vQScpIHtcbiAgICAgICAgICAvL2hpZ2hsaWdodCAtIC8qcGFyc2VyKi90aGlzLnJlc3VsdFxuXG4gICAgICAgICAgICBpdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3EnICsgLypwYXJzZXIqL3RoaXMuY3VycmVudFBhZ2UgKyAnLicgKyAoaSArIDEpKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZmllbGRzZXQnKTsvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxJyArIC8qcGFyc2VyKi90aGlzLmN1cnJlbnRQYWdlICsgJy4nICsgKGkgKyAxKSk7XG4gICAgICAgICAgICBpZiAoIWl0ZW0ubGVuZ3RoKSBpdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3EnICsgLypwYXJzZXIqL3RoaXMuY3VycmVudFBhZ2UgKyAnXFxcXC4nICsgKGkgKyAxKSk7XG4gICAgICAgICAgICAvL2lmIChpdGVtLmxlbmd0aClcbiAgICAgICAgICAgIGl0ZW1bMF0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmZmRkZGQnO1xuICAgICAgICAgICAgZm91bmROQSA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjaGVja0Fuc3dlcnNpbnNjcmVlbjogJyArICdxJyArIC8qcGFyc2VyKi90aGlzLmN1cnJlbnRQYWdlICsgJy4nICsgKGkgKyAxKSk7XG4gICAgICAgICAgICBpdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3EnICsgLypwYXJzZXIqL3RoaXMuY3VycmVudFBhZ2UgKyAnLicgKyAoaSArIDEpKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZmllbGRzZXQnKTsvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxJyArIC8qcGFyc2VyKi90aGlzLmN1cnJlbnRQYWdlICsgJy4nICsgKGkgKyAxKSk7XG4gICAgICAgICAgICBpZiAoIWl0ZW0ubGVuZ3RoKSBpdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3EnICsgLypwYXJzZXIqL3RoaXMuY3VycmVudFBhZ2UgKyAnXFxcXC4nICsgKGkgKyAxKSk7XG4gICAgICAgICAgICBpZiAoaXRlbS5sZW5ndGgpIGl0ZW1bMF0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmZmZmZmYnO1xuICAgICAgICAgIC8vaWYgKGl0ZW0pIGl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZmZmZmZmXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmb3VuZE5BO1xuICB9XG5cblxuICAvKiByZXR1cm5zIHRydWUgaWYgYWxsIHF1ZXN0aW9ucyBhcmUgYW5zd2VyZWQsIGZhbHNlIGlmIGF0IGxlYXN0IG9uZSBhbnN3ZXIgaXMgbm90Ki9cbiAgY2hlY2tBbnN3ZXJzKCkge1xuICAgIC8vZm9yIGVhY2ggYW5zd2Vyc1twYWdlbnVtLTFdIGFuc3dlciE9IE4vQVxuICAgIC8vdmFyIGZvdW5kTkEgPSBmYWxzZTtcbiAgICBsZXQgZG9udGNoZWNrYW5zd2VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb250Y2hlY2thbnN3ZXJzJyk7XG4gICAgaWYgKGRvbnRjaGVja2Fuc3dlcnMgJiYgZG9udGNoZWNrYW5zd2Vycy5wcm9wKCdjaGVja2VkJykpIHJldHVybiB0cnVlOyAvL2Rvbid0IGNoZWNrIGluIGVkaXRvciBtb2RlXG4gICAgbGV0IGZvdW5kTkEgPSB0aGlzLmNoZWNrQW5zd2Vyc0luU2NyZWVuKCk7XG4gICAgcmV0dXJuICFmb3VuZE5BO1xuICB9XG5cbiAgaGlnaGxpZ2h0Tm9uQW5zd2VyZWQoKSB7XG4gICAgbGV0IGl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnI25vdGlmaWNhdGlvbicpO1xuICAgIGl0ZW0uY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJyNmZGQnKTtcbiAgICBpdGVtLmh0bWwoJyBQcm8gcG9rcmHEjW92w6Fuw60sIHByb3PDrW0sIHZ5cGzFiHRlIHZ5em5hxI1lbsOpIG90w6F6a3khJyk7XG4gIH1cblxuICBoaWRlTm9uQW5zd2VyZWQoKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vdGlmaWNhdGlvbicpLmlubmVySFRNTCA9ICcnO1xuICB9XG5cbiAgbmV4dHRlc3RpdGVtKCkge1xuICAgIGlmICh0aGlzLmNoZWNrQW5zd2VycygpKSB7IC8vY2hlY2sgd2hldGhlciBhbGwgbWFuZGF0b3J5IHF1ZXN0aW9ucyBhcmUgYW5zd2VyZWQgLSBzZXQgdG8gbm9uLWRlZmF1bHQgdmFsdWVcbiAgICAgIGlmICh0aGlzLmhpZ2hsaWdodEVkdWNhdGlvbigpKSB7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5wcmV2aWV3LmlubmVySFRNTCA9IHRoaXMubmV4dHBhZ2UoKTtcbiAgICAgICAgLypwYXJzZXIqL3RoaXMuaGlnaGxpZ2h0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ldmFsdWF0ZVNjcmlwdHMoKTtcbiAgICAgICAgdGhpcy5oaWRlTm9uQW5zd2VyZWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vbm90IGhpZ2hsaWdodGVkXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGlnaGxpZ2h0Tm9uQW5zd2VyZWQoKTtcbiAgICB9XG4gIH1cblxuICAvLyBUT0RPIGNvbnZlcnQgJCB0byBhdXJlbGlhIGJhc2VkIGh0bWwgcHJvY2Vzc2luZ1xuICBoaWdobGlnaHRFZHVjYXRpb24oKSB7XG4gICAgbGV0IGF0bGVhc3RvbmVlZHVhbnN3ZXIgPSBmYWxzZTtcbiAgICBpZiAoLypwYXJzZXIqL3RoaXMuZWR1Y2F0aW9uYWwpIHtcbiAgICAgIGlmICghIC8qcGFyc2VyKi90aGlzLnJlc3VsdC5hbnN3ZXJzWy8qcGFyc2VyKi90aGlzLmN1cnJlbnRQYWdlIC0gMV0pIHJldHVybiB0cnVlO1xuICAgICAgaWYgKC8qcGFyc2VyKi90aGlzLmhpZ2hsaWdodGVkKSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub3RpZmljYXRpb24nKS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICAvKnBhcnNlciovdGhpcy5oaWdobGlnaHRlZCA9IHRydWU7XG4gICAgICBpZiAoLypwYXJzZXIqL3RoaXMucmVzdWx0LmFuc3dlcnNbLypwYXJzZXIqL3RoaXMuY3VycmVudFBhZ2UgLSAxXSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IC8qcGFyc2VyKi90aGlzLnJlc3VsdC5hbnN3ZXJzWy8qcGFyc2VyKi90aGlzLmN1cnJlbnRQYWdlIC0gMV0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoLypwYXJzZXIqL3RoaXMucmVzdWx0LmFuc3dlcnNbLypwYXJzZXIqL3RoaXMuY3VycmVudFBhZ2UgLSAxXVtpXSAmJiAoJ2Fuc3dlcicgaW4gLypwYXJzZXIqL3RoaXMucmVzdWx0LmFuc3dlcnNbLypwYXJzZXIqL3RoaXMuY3VycmVudFBhZ2UgLSAxXVtpXSkpIHsvL2ZpeCBidWcgMjY4XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxJyArIC8qcGFyc2VyKi90aGlzLmN1cnJlbnRQYWdlICsgJ1xcXFwuJyArIChpICsgMSkpOyAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxJyArIGN1cnJlbnRQYWdlICsgJy4nICsgKGkgKyAxKSk7XG4gICAgICAgICAgICAvL2Rpc2FibGUgZWRpdGluZyB0aGUgc3ViZWxlbWVudCB3aXRoaW4gdGhpcyBmb3JtXG4gICAgICAgICAgICBpdGVtLmZpbmQoJ2lucHV0JykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICAgIGl0ZW0uZmluZCgnb3B0aW9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICAgIGl0ZW0uZmluZCgnLnVpLXNsaWRlcicpLmxhYmVsZWRzbGlkZXIoJ2Rpc2FibGUnKTtcblxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIiNxXCIgKyBjdXJyZW50UGFnZSArIFwiXFxcXC5cIiArIChpICsgMSkpO1xuICAgICAgICAgICAgLy9pZiAoaXRlbSkgaXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNlZWZmZWVcIjtcbiAgICAgICAgICAgIGxldCBhcXVlc3Rpb24gPSAvKnBhcnNlciovdGhpcy5yZXN1bHQuYW5zd2Vyc1svKnBhcnNlciovdGhpcy5jdXJyZW50UGFnZSAtIDFdW2ldLnF1ZXN0aW9uLnRyaW0oKTtcbiAgICAgICAgICAgIGxldCBhY2FzZSA9IC8qcGFyc2VyKi90aGlzLnJlc3VsdC5hbnN3ZXJzWy8qcGFyc2VyKi90aGlzLmN1cnJlbnRQYWdlIC0gMV1baV0uY2FzZTtcbiAgICAgICAgICAgIGxldCBhbnN3ZXIgPSAvKnBhcnNlciovdGhpcy5yZXN1bHQuYW5zd2Vyc1svKnBhcnNlciovdGhpcy5jdXJyZW50UGFnZSAtIDFdW2ldLmFuc3dlcjtcbiAgICAgICAgICAgIC8vdmFyIG15ZWR1YW5zd2VyO1xuICAgICAgICAgICAgaWYgKC8qcGFyc2VyKi90aGlzLmVkdXJlc3VsdHNbYWNhc2VdKSB7XG4gICAgICAgICAgICAgIGxldCBteWVkdWFuc3dlciA9IC8qcGFyc2VyKi90aGlzLmVkdXJlc3VsdHNbYWNhc2VdLmFuc3dlclthcXVlc3Rpb25dO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZWR1YW5zd2VyJyk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKC8qcGFyc2VyKi90aGlzLmVkdXJlc3VsdHNbYWNhc2VdKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCInXCIgKyBhcXVlc3Rpb24gKyBcIidcIik7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKE9iamVjdC5rZXlzKC8qcGFyc2VyKi90aGlzLmVkdXJlc3VsdHNbYWNhc2VdLmFuc3dlcikpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhteWVkdWFuc3dlcik7XG4gICAgICAgICAgICAgIGlmIChteWVkdWFuc3dlcikge1xuICAgICAgICAgICAgICAgIGF0bGVhc3RvbmVlZHVhbnN3ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vY3JlYXRpbmcgdG9vbHRpcCBkaXZcbiAgICAgICAgICAgICAgICAkKFwiPGRpdiBjbGFzcz0ndG9vbHRpcENvbnRlbnQnPlwiICsgLypwYXJzZXIqL3RoaXMuZWR1cmVzdWx0c1thY2FzZV0ubm90ZVthcXVlc3Rpb25dICsgJzwvZGl2PicpLmFwcGVuZFRvKGl0ZW0pO1xuICAgICAgICAgICAgICAgIC8vYWRkaW5nIHRvb2x0aXAgY2xhc3MgdG8gdGhlIGZvcm1cbiAgICAgICAgICAgICAgICBpdGVtLmFkZENsYXNzKCd0b29sdGlwJyk7XG4gICAgICAgICAgICAgICAgLy9wcm9jZXNzIGFsbCBlZHVhbnN3ZXJzO1xuICAgICAgICAgICAgICAgIGxldCBlZHVhbnN3ZXJtdWx0aSA9IG15ZWR1YW5zd2VyLnNwbGl0KCc7Jyk7IC8vc2hvdyBtdWx0aXBsZSB2YWx1ZXMgZGVsaW1pdGVkIGJ5IDtcbiAgICAgICAgICAgICAgICBlZHVhbnN3ZXJtdWx0aS5mb3JFYWNoKGZ1bmN0aW9uKGVkdWFuc3dlcikge1xuICAgICAgICAgICAgICAgICAgbGV0IGhpdGVtID0gaXRlbS5maW5kKFwiW3ZhbHVlfD0nXCIgKyBlZHVhbnN3ZXIgKyBcIiddXCIpOyAvL3NlbGVjdHMgPGlucHV0PlxuICAgICAgICAgICAgICAgICAgaWYgKGhpdGVtLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRoaXRlbSA9IGhpdGVtLm5leHQoKTsgLy9zZWxlY3RzIHJlbGF0ZWQgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiaXRlbTpcIiArIGl0ZW0ucHJvcCgnbm9kZU5hbWUnKSArIFwiIGhpdGVtOlwiICsgaGl0ZW0ucHJvcCgnbm9kZU5hbWUnKSArIFwiIG5leHRoaXRlbTpcIiArIG5leHRoaXRlbS5wcm9wKCdub2RlTmFtZScpKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dGhpdGVtLmlzKCdsYWJlbCcpKSB7bmV4dGhpdGVtLmF0dHIoJ3N0eWxlJywgJ2JhY2tncm91bmQtY29sb3I6IGxpZ2h0Z3JlZW4nKTt9IGVsc2UgaWYgKGhpdGVtLmlzKCdvcHRpb24nKSkge2hpdGVtLmF0dHIoJ3N0eWxlJywgJ2JhY2tncm91bmQtY29sb3I6IGxpZ2h0Z3JlZW47Ym9yZGVyOnNvbGlkIDJweCBncmVlbicpO31cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHNob3cgaW4gc2xpZGVyIGhhbmRsZVxuICAgICAgICAgICAgICAgICAgICBoaXRlbSA9IGl0ZW0uZmluZCgnLnVpLXNsaWRlcicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGl0ZW0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIGlkaGl0ZW0gPSBoaXRlbS5wcm9wKFwiaWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnR2YWx1ZSA9IGhpdGVtLmxhYmVsZWRzbGlkZXIoJ3ZhbHVlJyk7IC8va2VlcCBjdXJyZW50IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgbGV0IHNsaWRlcmlkID0gaGl0ZW0ucHJvcCgnaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgc2xpZGVybnVtID0gcGFyc2VJbnQoSW50ZXJwcmV0ZXIuZXh0cmFjdChzbGlkZXJpZCwgJ3NsaWRlcicpLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgbGV0IGVkdWFuc3dlcmludCA9IHBhcnNlSW50KGVkdWFuc3dlciwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgIGxldCBlZHVhbnN3ZXJpbmRleCA9IC8qcGFyc2VyKi90aGlzLnNsaWRlclZhbHVlc1tzbGlkZXJudW1dLmluZGV4T2YoZWR1YW5zd2VyaW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAvL21vdmVzIHNsaWRlciBoYW5kbGUgdG8gZWR1Y2F0aW9uYWwgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZWR1YW5zd2VyaW5kZXggPiAtMSkgLy9tb3ZlIHRvIGVkdSB2YWx1ZSBmcm9tIHNlcXVlbmNlXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcInNsaWRlcnZhbHVlOlwiICsgc2xpZGVyVmFsdWVzW3NsaWRlcm51bV1bZWR1YW5zd2VyaW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdGVtLmxhYmVsZWRzbGlkZXIoJ3ZhbHVlJywgLypwYXJzZXIqL3RoaXMuc2xpZGVyVmFsdWVzW3NsaWRlcm51bV1bZWR1YW5zd2VyaW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgLy9tb3ZlIHRvIGVkdSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJub3JtYWwgdmFsdWU6XCIgKyBlZHVhbnN3ZXJpbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGl0ZW0ubGFiZWxlZHNsaWRlcigndmFsdWUnLCBlZHVhbnN3ZXJpbnQpOyAvL21vdmUgdG8gZWR1IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIGhhbmRsZSA9IGl0ZW0uZmluZChcIi51aS1zbGlkZXItaGFuZGxlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgIGxldCBvbGRoYW5kbGUgPSBoaXRlbS5maW5kKCcudWktc2xpZGVyLWhhbmRsZScpO1xuICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdoYW5kbGUgPSBoaXRlbS5maW5kKCcudWktc2xpZGVyLWhhbmRsZScpLmNsb25lKCk7IC8vLmFwcGVuZFRvKGhpdGVtKTsgLy9jbG9uZSB0aGUgaGFuZGxlXG4gICAgICAgICAgICAgICAgICAgICAgLy9zbGlkZXIgYWxyZWFkeSBoYXMgc29tZSBzdHlsZSAtIHBvc2l0aW9uLCB3aGloYyBtdXN0IGJlIHByZXNlcnZlZFxuICAgICAgICAgICAgICAgICAgICAgIGhpdGVtLmxhYmVsZWRzbGlkZXIoJ3ZhbHVlJywgY3VycmVudHZhbHVlKTsgLy9yZXR1cm4gdG8gY3VycmVudCB2YWx1ZSAtIHRoZSBjbG9uZSB3aWxsIHJlbWFpbiBvbiB0aGUgZWR1IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgbGV0IG9sZHN0eWxlID0gb2xkaGFuZGxlLmF0dHIoJ3N0eWxlJykgKyAnYm9yZGVyOnNvbGlkIDJweCBibHVlOyc7XG4gICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld3N0eWxlID0gbmV3aGFuZGxlLmF0dHIoJ3N0eWxlJykgKyAnYmFja2dyb3VuZDpsaWdodGdyZWVuOyc7XG4gICAgICAgICAgICAgICAgICAgICAgbmV3aGFuZGxlLmF0dHIoJ3N0eWxlJywgbmV3c3R5bGUpO1xuICAgICAgICAgICAgICAgICAgICAgIG9sZGhhbmRsZS5hdHRyKCdzdHlsZScsIG9sZHN0eWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICBoaXRlbS5sYWJlbGVkc2xpZGVyKCdkaXNhYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgbmV3aGFuZGxlLmFwcGVuZFRvKGhpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAvL2hpdGVtLmZpbmQoXCIudWktc2xpZGVyLWhhbmRsZVwiKS5sYXN0KCkuYXR0cihcInN0eWxlXCIsIFwiYmFja2dyb3VuZDpncmVlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAvL3NlbGVjdFxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvL2FsbGFuc3dlcnMgaGlnaGxpZ2h0ZWQsIGVuYWJsZSB0b29sdGlwXG4gICAgICAgICQoJy50b29sdGlwJykuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbGV0IHRvb2x0aXAgPSAkKCc+IGRpdicsIHRoaXMpLnNob3coKTtcbiAgICAgICAgICBsZXQgcG9zID0gdG9vbHRpcC5vZmZzZXQoKTtcbiAgICAgICAgICB0b29sdGlwLmhpZGUoKTtcbiAgICAgICAgICBsZXQgcmlnaHQgPSBwb3MubGVmdCArIHRvb2x0aXAud2lkdGgoKTtcbiAgICAgICAgICBsZXQgcGFnZVdpZHRoID0gJChkb2N1bWVudCkud2lkdGgoKTtcbiAgICAgICAgICBpZiAocG9zLmxlZnQgPCAwKSB7XG4gICAgICAgICAgICB0b29sdGlwLmNzcygnbWFyZ2luTGVmdCcsICcrPScgKyAoLXBvcy5sZWZ0KSArICdweCcpO1xuICAgICAgICAgIH0gZWxzZSBpZiAocmlnaHQgPiBwYWdlV2lkdGgpIHtcbiAgICAgICAgICAgIHRvb2x0aXAuY3NzKCdtYXJnaW5MZWZ0JywgJy09JyArIChyaWdodCAtIHBhZ2VXaWR0aCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0b29sdGlwLmZhZGVJbigpO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkKCc+IGRpdicsIHRoaXMpLmZhZGVPdXQoZnVuY3Rpb24oKSB7ICQodGhpcykuY3NzKCdtYXJnaW5MZWZ0JywgJycpOyB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYXRsZWFzdG9uZWVkdWFuc3dlcikge1xuICAgICAgICBsZXQgaXRlbTIgPSAkKCcjbm90aWZpY2F0aW9uJyk7XG4gICAgICAgIGl0ZW0yLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICdsaWdodGdyZWVuJyk7XG4gICAgICAgIGl0ZW0yLmh0bWwoJ1Z5em5hxI1lbnkganNvdSBwcsWvbcSbcm7DqSwgbmVqdsOtY2Ugdnliw61yYW7DqSBob2Rub3R5IG5hIHV2ZWRlbsOpIG90w6F6a3kuJyk7XG4gICAgICB9IGVsc2UgLypwYXJzZXIqL3RoaXMuaGlnaGxpZ2h0ZWQgPSBmYWxzZTtcbiAgICAgIHJldHVybiAoIWF0bGVhc3RvbmVlZHVhbnN3ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG5cbiAgLy9UT0RPIGFkZCBQc3ljaG9UZXN0UGF1c2VVcmwsIGNvbnN0cnVjdCBwYXVzZWR0ZXN0cmVzdWx0LCBpbXBsZW1lbnQgcmVzdW1ldGVzdCgpLCBhZGQgYSBzZWxlY3QgYm94IHdpdGggdGVzdHMgdG8gcmVzdW1lIGludG8gSFRNTCwgYWZ0ZXIgc2VsZWN0aW9uIGxvYWQgcmF3IHRlc3QsIGxvYWQgcmVzdWx0cyBhbmQgZ28gaW50byB0aGUgbGFzdCBzY3JlZW4sXG4gIHBhdXNldGVzdCgpIHtcbiAgICBpZiAoIWNvbmZpcm0oJ0RvIHlvdSB3YW50IHRvIHBvc3Rwb25lIHRoZSB0ZXN0IGV4ZWN1dGlvbj8gUG9zdHBvbmVkIHRlc3QgY2FuIGJlIHJlc3VtZWQgbGF0ZXIgZnJvbSB0aGUgY3VycmVudCBzY3JlZW4uJykpIHJldHVybjtcbiAgICAvL3N0b3JlIHJlc3VsdHMsIHJhdyB0ZXN0IGFuZCBzY3JlZW4gbnVtYmVyIGludG8gc2VydmVyXG4gICAgbGV0IHBhdXNlZHRlc3RSZXN1bHQgPSB7fTtcbiAgICBwYXVzZWR0ZXN0UmVzdWx0LnRlc3RuYW1lID0gLypwYXJzZXIqL3RoaXMudGVzdE5hbWU7Ly97IGdldDsgc2V0OyB9XG4gICAgcGF1c2VkdGVzdFJlc3VsdC5zY3JlZW5udW1iZXIgPSAvKnBhcnNlciovdGhpcy5jdXJyZW50UGFnZTsvL3sgZ2V0OyBzZXQ7IH1cbiAgICBwYXVzZWR0ZXN0UmVzdWx0LnJhd3Rlc3RkZWZpbml0aW9uID0gLypwYXJzZXIqL3RoaXMuY3VycmVudFRlc3Q7Ly97IGdldDsgc2V0OyB9XG5cbiAgICAvL3BhdXNlZHRlc3RSZXN1bHQubG9naW5uYW1lID0gcHJvbXB0KFwiRW50ZXIgeW91ciB1bmlxdWUgSUQsIGUuZy4gZW1haWwgYWRkcmVzc1wiKTtcbiAgICBwYXVzZWR0ZXN0UmVzdWx0LnRlbXBvcmFscmVzdWx0cyA9IEpTT04uc3RyaW5naWZ5KC8qcGFyc2VyKi90aGlzLnJlc3VsdC5hbnN3ZXJzKTtcbiAgICBsZXQgTUVUSE9EID0gJ1BVVCc7XG4gICAgaWYgKC8qcGFyc2VyKi90aGlzLnJlc3VtZWlkID4gMCkge3BhdXNlZHRlc3RSZXN1bHQuaWQgPSAvKnBhcnNlciovdGhpcy5yZXN1bWVpZDsgTUVUSE9EID0gJ1BPU1QnO31cbiAgICAkLmFqYXgoe1xuICAgICAgdHlwZTogTUVUSE9ELFxuICAgICAgdXJsOiBQc3ljaG9UZXN0UGF1c2VVcmwsXG4gICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHBhdXNlZHRlc3RSZXN1bHQpLFxuICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLFxuICAgICAgc3VjY2VzczogdGhpcy5wYXVzZXRlc3RjYWxsYmFjayxcbiAgICAgIGVycm9yOiB0aGlzLnBvc3RBbnN3ZXJFcnJvckNhbGxiYWNrXG4gICAgfSk7XG4gICAgLy9jb25zb2xlLmxvZyhcIlRPRE8sIG5vdCB5ZXQgaW1wbGVtZW50ZWQgcGF1c2V0ZXN0KClcIik7XG4gIH1cblxuICBwYXVzZXRlc3RjYWxsYmFjayhkYXRhKSB7XG4gICAgY29uc29sZS5sb2coJ3NhdmVkIHBhdXNlZCB0ZXN0LiBSZXNwb25zZTonKTtcbiAgICAvL2NvbnNvbGUubG9nKGRhdGEpXG4gICAgcGF1c2VkdGVzdGlkID0gZGF0YS5pZDtcbiAgICB0aGlzLmZvY3VzUGF1c2VkKCk7IC8vY2FsbGluZyBiYWNrIHRvIGZvY3VzIHRoZSBwYXVzZWQgVGFiXG4gIH1cblxuICBldmFsdWF0ZVNjcmlwdHMoKSB7XG4gICAgLy9ldmFsdWF0ZSBncmFwaHNcbiAgICBsZXQgY29kZXMgPSB0aGlzLmNvbnRyb2xsZXIucHJldmlldy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XG4gICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlldycpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgICAvL2NvbnNvbGUubG9nKFwiY29kZXNcIitjb2Rlcyk7XG4gICAgLy9jb25zb2xlLmxvZyhjb2Rlcyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgZXZhbChjb2Rlc1tpXS50ZXh0KTtcbiAgICB9XG4gIH1cblxuICBuZXdUcmFucyhyb3cpIHtcbiAgICBsZXQgdHIgPSB7J3Jhdyc6IHJvd307XG4gICAgaWYgKERzbC5pc1p2dWsocm93KSkge1xuICAgICAgbGV0IHNvdW5kdHlwZSA9IERzbC5zdGltdWxpVHlwZShyb3cpO1xuICAgICAgaWYgKHNvdW5kdHlwZSApIHtcbiAgICAgICAgaWYgKHNvdW5kdHlwZVsxXSA9PT0gJ3dhdmVmb3JtJykge1xuICAgICAgICAgIHRyID0geydpc3N0aW11bHVzJzogdHJ1ZSwgJ2lzd2F2ZWZvcm0nOiB0cnVlLCAnc3JjJzogJ3N0aW11bGkvMy53YXYnLCAnaWQnOiAnYXVkaW8yJywgJ3R5cGUnOiAnYXVkaW8vd2F2JywgJ3Jhdyc6IHJvd307XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coJ25ldyB0cmFuc2xhdGlvbiByb3csdHI6Jywgcm93LCB0cik7XG4gICAgcmV0dXJuIHRyO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBDQTtBQXNDQTtBQUNBO0FBQ0E7QUF4Q0E7QUEwQ0E7QUFDQTtBQUNBO0FBNUNBO0FBQ0E7QUFEQTtBQThDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBEQTtBQXNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzREE7QUFDQTtBQURBO0FBOERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcEVBO0FBc0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExRUE7QUE0RUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7OztBQXhGQTtBQUNBO0FBREE7QUE0RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7OztBQXJHQTtBQUNBO0FBREE7QUF5R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFHQTs7OztBQXJIQTtBQUNBO0FBREE7QUEySEE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBN0hBO0FBK0hBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUExSUE7QUE0SUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5LQTtBQXFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBak1BO0FBbU1BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUEzTUE7QUE2TUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTs7OztBQXROQTtBQUNBO0FBREE7QUEwTkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7Ozs7QUF2UEE7QUFDQTtBQURBO0FBNlBBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTs7Ozs7O0FBS0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhTQTtBQW1TQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUEvU0E7QUFrVEE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQW5VQTtBQUNBO0FBREE7QUF1VUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTs7O0FBbFZBO0FBQ0E7QUFEQTtBQXNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUE1VkE7QUE4VkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFsV0E7QUFDQTtBQURBO0FBc1dBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBL1dBO0FBaVhBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBcFlBO0FBdVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQWhaQTtBQWtaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFwYUE7QUFDQTtBQURBO0FBdWFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7OztBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUlBOzs7OztBQURBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZkQTtBQXlkQTtBQUNBO0FBMWRBO0FBQ0E7QUFEQTtBQThkQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7Ozs7O0FBS0E7QUEvZUE7QUFDQTtBQWlmQTtBQWxmQTtBQW9mQTs7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQXhnQkE7QUEwZ0JBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWxpQkE7QUFvaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTs7O0FBNWlCQTtBQUNBO0FBREE7QUFpakJBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFiQTtBQWVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBcmtCQTtBQXNrQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQWRBO0FBZ0JBO0FBQ0E7QUE3bEJBO0FBK2xCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQXptQkE7QUEybUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBcm5CQTtBQXduQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTNwQkE7QUE2cEJBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFqcUJBO0FBQ0E7QUFEQTtBQXFxQkE7QUFDQTtBQUNBO0FBQ0E7QUF4cUJBO0FBQ0E7QUFEQTtBQTRxQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUEvcUJBO0FBQ0E7QUFEQTtBQW1yQkE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUE5c0JBO0FBQ0E7QUFEQTtBQWd0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBdnRCQTtBQXl0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTd0QkE7QUErdEJBO0FBQ0E7QUFDQTtBQWp1QkE7QUFtdUJBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS91QkE7QUFDQTtBQURBO0FBbXZCQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBbDJCQTtBQUNBO0FBREE7QUF1MkJBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBV0E7QUFDQTtBQTkzQkE7QUFnNEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXI0QkE7QUF1NEJBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaDVCQTtBQWs1QkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUE5NUJBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3QiX\n");

/***/ }),

/***/ "MmLu":
/*!***************************************!*\
  !*** ./src/components/preprocesor.js ***!
  \***************************************/
/*! exports provided: Preprocesor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Preprocesor\", function() { return Preprocesor; });\n/* harmony import */ var _dsl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dsl */ \"UbAQ\");\n/* harmony import */ var _interpreter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interpreter */ \"3QiX\");\n\n //splice array into array\n\nArray.prototype.spliceArray = function (index, n, array) {\n  return Array.prototype.splice.apply(this, [index, n].concat(array));\n};\n\nvar TestState = {\n  UND: 0,\n  OBR: 1,\n  PAR: 2,\n  KAT: 3,\n  END: 4,\n  START: 5,\n  EXT: 6,\n  STIMGR: 7,\n  REPSTIM: 8,\n  REPGRP: 9\n};\nvar Preprocesor = /*#__PURE__*/function () {\n  /**\n   * Created by tomaton on 10/22/2015.\n   */\n  function Preprocesor(parent) {\n    this.currentCursor = 0;\n    this.state = TestState.UND; // getState(this.splitted, currentCursor++);\n\n    this.tstate = {};\n    this.myTest = '';\n    this.expandedTest = [];\n    this.expandedGroup = [];\n    this.replaceableStimuli = [];\n    this.tempTest = '';\n    this.parent = parent; //expects parser\n  } //console.log(this.splitted);\n\n\n  var _proto = Preprocesor.prototype;\n\n  _proto.getState = function getState() {\n    //console.log(\"getState() \"+currentCursor);\n    //console.log(this.splitted[currentCursor]);\n    if (this.currentCursor >= this.splitted.length) return TestState.END;\n    if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isParovy(this.splitted[this.currentCursor])) return TestState.PAR;\n    if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isKategorie(this.splitted[this.currentCursor])) return TestState.KAT;\n    if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isObrazovka(this.splitted[this.currentCursor])) return TestState.OBR;\n    if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isExtends(this.splitted[this.currentCursor])) return TestState.EXT;\n    if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isStimuliGroup(this.splitted[this.currentCursor])) return TestState.STIMGR; //        if (Dsl.isReplaceStimuli(this.splitted[this.currentCursor])) return TestState.REPSTIM;\n    //        if (Dsl.isReplaceGroup(this.splitted[this.currentCursor])) return TestState.REPGRP;\n\n    if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isRandomPairs(this.splitted[this.currentCursor])) {\n      this.tstate.randompairs = true;\n      return TestState.UND;\n    }\n\n    if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isPoradiVNtici(this.splitted[this.currentCursor])) {\n      this.tstate.poradivnticinahodne = true;\n      return TestState.UND;\n    }\n\n    if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isPoradiZvuku(this.splitted[this.currentCursor])) {\n      this.tstate.poradizvukunahodne = true;\n      return TestState.UND;\n    }\n\n    if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isPoradiCase(this.splitted[this.currentCursor])) {\n      this.tstate.poradicasenahodne = true;\n      return TestState.UND;\n    }\n\n    if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isType(this.splitted[this.currentCursor])) this.parent.translateType(this.splitted[this.currentCursor]); // feature #208, type in the beginning of test definition\n\n    return TestState.UND;\n  };\n\n  _proto.copyTest = function copyTest() {\n    this.currentCursor++;\n    this.myTest += this.splitted[this.currentCursor - 1] + '\\n'; //copy of row with obrazovka or test ...\n\n    while (this.getState() === TestState.UND) {\n      this.myTest += this.splitted[this.currentCursor++] + '\\n';\n    } //copy of rows\n\n  } //all after the cursor will be shuffled per screens\n  ;\n\n  _proto.shuffleTest = function shuffleTest() {\n    //readalltestToArray\n    var tempcursor = this.currentCursor++;\n    var testArray = [];\n\n    while (this.getState() !== TestState.END) {\n      this.tempTest = this.splitted[this.currentCursor - 1] + '\\n';\n\n      while (this.getState() === TestState.UND) {\n        this.tempTest += this.splitted[this.currentCursor++] + '\\n';\n      } //copy of rows\n\n\n      testArray.push(this.tempTest); //each item is a screen\n\n      this.currentCursor++;\n    } //shuffle screens\n\n\n    testArray.shuffle(); //expandArrayToText\n\n    this.currentCursor = tempcursor;\n    var testCase = [];\n\n    for (var i = 0; i < testArray.length; i++) {\n      testCase = testArray[i].split('\\n');\n\n      for (var j = 0; j < testCase.length; j++) {\n        this.splitted[this.currentCursor++] = testCase[j];\n      }\n    } //console.log(\"test after shuffle\", this.splitted);    //this.splitted[this.currentCursor]\n\n\n    this.currentCursor = tempcursor;\n  };\n\n  _proto.collectSounds = function collectSounds() {\n    var zvuks = [];\n\n    while (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].startsWithZvuk(this.splitted[this.currentCursor])) {\n      zvuks.push(this.splitted[this.currentCursor++]);\n    }\n\n    if (this.tstate.poradizvukunahodne) {\n      zvuks.shuffle(); //console.log(\"zvuks after random shuffling:\", zvuks);\n    }\n\n    return zvuks;\n  };\n\n  _proto.foreachSoundGenerateObrazovka = function foreachSoundGenerateObrazovka(zvuks, title) {\n    var obrazovkacontent = [];\n\n    while (this.getState() === TestState.UND) {\n      obrazovkacontent.push(this.splitted[this.currentCursor++]);\n    }\n\n    for (var i = 0; i < zvuks.length; i++) {\n      this.myTest += 'screen ' + _interpreter__WEBPACK_IMPORTED_MODULE_1__[\"Interpreter\"].extract(title, 'screen per 1') + '\\n' + zvuks[i] + '\\n';\n\n      for (var j = 0; j < obrazovkacontent.length; j++) {\n        this.myTest += obrazovkacontent[j] + '\\n';\n      }\n    }\n  };\n\n  _proto.expandKategorie = function expandKategorie() {\n    var title = this.splitted[this.currentCursor++]; //skip over the row defining the kategory test\n\n    while (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].startsWithComment(this.splitted[this.currentCursor])) {\n      //skip over comments - there might be some styling\n      title += '\\n' + this.splitted[this.currentCursor++];\n    }\n\n    var zvuks = this.collectSounds();\n    this.foreachSoundGenerateObrazovka(zvuks, title);\n  };\n\n  _proto.makePairs = function makePairs(zvuks) {\n    var combinations = []; //recursive generation of all possib/le pairs\n\n    var getpairs = function getpairs(active, rest) {\n      //console.log(\"iteration\");\n      //console.log(active);\n      //console.log(rest)\n      if (rest.length === 0) {\n        if (active.length === 2) {\n          combinations.push(active); //console.log(\"found:\");\n          //console.log(active);\n        }\n      } else {\n        var active1 = active.slice();\n        active.push(rest[0]);\n        getpairs(active, rest.slice(1));\n        getpairs(active1, rest.slice(1));\n      }\n    };\n\n    this.getpairs([], zvuks);\n    return combinations;\n  };\n\n  _proto.foreachPairofSoundsGenerateObrazovka = function foreachPairofSoundsGenerateObrazovka(pairs, title) {\n    var obrazovkacontent = [];\n\n    while (this.getState() === TestState.UND) {\n      obrazovkacontent.push(this.splitted[this.currentCursor++]);\n    }\n\n    for (var i = 0; i < pairs.length; i++) {\n      this.myTest += 'screen ' + _interpreter__WEBPACK_IMPORTED_MODULE_1__[\"Interpreter\"].extract(title, 'screen per 2') + '\\n' + 'column\\n' + pairs[i][0] + '\\n' + pairs[i][1] + '\\n';\n\n      for (var j = 0; j < obrazovkacontent.length; j++) {\n        this.myTest += obrazovkacontent[j] + '\\n';\n      }\n      /*myTest += \"sloupec\\n\" + pairs[i][1] + \"\\n\";\n       for (var j = 0; j < obrazovkacontent.length; j++) {\n       myTest += obrazovkacontent[j] + \"\\n\";\n       }*/\n\n    } //fix bug ranodm in tuple\n\n  };\n\n  _proto.expandParovy = function expandParovy() {\n    var title = this.splitted[this.currentCursor++]; //skip row defining par test\n\n    var zvuks = this.collectSounds();\n    var pairs = this.makePairs(zvuks);\n    if (this.tstate.poradicasenahodne || this.tstate.randompairs) pairs.shuffle();\n    if (pairs.length === 0) console.log('Expected more rows with stimulus to generate pairs, but no pairs generated.');\n    this.foreachPairofSoundsGenerateObrazovka(pairs, title);\n  } //expands inherited test - read definition into separated array.\n  ;\n\n  _proto.expandInheritance = function expandInheritance() {\n    var parentrow = this.splitted[this.currentCursor].split(/[ ;,]+/); //each inherited test is separated\n    //for (var i=indexofnames;i<parentrow.lengt h;i++){ //\n    //extends [0] test [1] withstimuli [2] a,b,c,d [3,4,5,6]\n\n    var parent = parentrow[1]; //gets from url test definition\n\n    var myurl = PsychoTest2Url + parent;\n    $.ajax({\n      dataType: 'json',\n      url: myurl,\n      data: null,\n      success: function success(testdto) {\n        if (parser.prep.expandedTest[parent]) console.log('expandInheritance, Warning: test definition already exists for ' + parent);\n        parser.prep.expandedTest[parent] = testdto[0].definition;\n      },\n      error: function error(jq, status, _error) {\n        console.log('expandInheritance, Error: When loading data for the test definition ' + myurl + ' ' + _error);\n      },\n      async: false\n    });\n\n    if (parentrow.length > 3) {\n      //extends with replacement of stimuli\n      if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isWithStimuli(parentrow[2])) {\n        var stimuli = parentrow.slice(3); //stimuli names without previous -- TODO parse with apostrophes\n        //this.replaceStimuli(parent,stimuli);//replace stimuli with new one from array\n        //inserts a extended test with replaced stimuli\n\n        this.splitted.spliceArray(this.currentCursor, 1, this.replaceStimuli(this.expandedTest[parent], stimuli));\n      } else if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isWithStimuligroup(parentrow[2])) {\n        var parent2 = parentrow[3];\n        myurl = PsychoTest2Url + parent2;\n        $.ajax({\n          dataType: 'json',\n          url: myurl,\n          data: null,\n          success: function success(testdto) {\n            if (parser.prep.expandedGroup[parent2]) console.log('expandGroup, Warning: test definition already loaded for ' + parent2);\n            parser.prep.expandedGroup[parent2] = testdto[0].definition;\n          },\n          error: function error(jq, status, _error2) {\n            console.log('expandGroup, Error: When loading data for the test definition ' + myurl + ' ' + _error2);\n          },\n          async: false\n        });\n\n        if (this.expandedTest[parent]) {\n          if (this.expandedGroup[parent2]) this.splitted.spliceArray(this.currentCursor, 1, this.replaceStimuliGroup(this.expandedTest[parent], this.expandedGroup[parent2]));else {\n            console.log('expandinheritance: Info, nothing to replace from group');\n            this.splitted.spliceArray(this.currentCursor, 1, this.expandedTest[parent]);\n          }\n        } else console.log('expandinheritance: Info, nothing to expand');\n      } else console.log('expandinheritance: Warning unrecognized extend attribute:' + parentrow[2]);\n    } else {\n      //extends without replacement\n      if (this.expandedTest[parent]) {\n        console.log('expandinheritance: Info, nothing to replace from group');\n        this.splitted.spliceArray(this.currentCursor, 1, this.splitExtendTestDefinition(this.expandedTest[parent]));\n      } else console.log('expandinheritance: Info, nothing to expand');\n    }\n\n    this.currentCursor++;\n  } //expands stimuligroup into the current test - reads all stimulus in a group into separate array\n  ;\n\n  _proto.expandStimuliGroup = function expandStimuliGroup() {\n    var parentrow = this.splitted[this.currentCursor].split(/[ ;,]+/); //each expanded group is split\n    //for (var i=indexofnames;i<parentrow.lengt h;i++){ //\n    //stimuligroup [0] [groupname] [1...]\n\n    var parent = parentrow[1]; //gets from url test definition\n\n    var myurl = PsychoTest2Url + parent; //TODO move ajax call to shared class\n\n    $.ajax({\n      dataType: 'json',\n      url: myurl,\n      data: null,\n      success: function success(testdto) {\n        if (this.expandedGroup[parent]) console.log('expandGroup, Warning: test definition already loaded for ' + parent);\n        this.expandedGroup[parent] = testdto[0].definition;\n      },\n      error: function error(jq, status, _error3) {\n        console.log('expandGroup, Error: When loading data for the test definition ' + myurl + ' ' + _error3);\n      },\n      async: false\n    });\n\n    if (this.expandedGroup[parent]) {\n      this.splitted.spliceArray(this.currentCursor, 1, this.splitStimuliDefinition(this.expandedGroup[parent]));\n    } else console.log('expandGroup: Info, nothing to expand from stimuligroup.'); //this.currentCursor++;\n\n  } //splits only stimulus from group definition into array\n  ;\n\n  _proto.splitExtendTestDefinition = function splitExtendTestDefinition(testdefinition) {\n    var rawtest = testdefinition.split('\\n'); //rawtest.shift(); //removes first row -- usually definition of test name\n\n    rawtest[0] = '# ' + rawtest[0]; //comments out the first row -- usually definition of test name\n\n    return rawtest;\n  } //splits only stimulus from group definition into array\n  ;\n\n  _proto.splitStimuliDefinition = function splitStimuliDefinition(groupdefinition) {\n    var rawstimuli = groupdefinition.split('\\n');\n    var stimuli = []; //    var newrows = [];\n\n    for (var i = 1; i < rawstimuli.length; i++) {\n      //step over first row\n      var mystimuli = rawstimuli[i].trim();\n\n      if (mystimuli.length > 0) {\n        stimuli.push('stimulus ' + rawstimuli[i]);\n      }\n    } //adds only rows with stimulus prefix\n\n\n    return stimuli;\n  } //replace each occurence of stimuli with a stimulus row from group definition,\n  // if some stimulus remains, it is inserted at the last position of stimulus in definition\n  ;\n\n  _proto.replaceStimuliGroup = function replaceStimuliGroup(definition, groupdefinition) {\n    var defrows = definition.split('\\n'); //splits per row\n\n    var stimuli = this.splitStimuliDefinition(groupdefinition);\n    var laststimulusindex = 0;\n\n    for (var i = 0; i < defrows.length; i++) {\n      //parse each row\n      if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isZvuk(defrows[i])) {\n        if (stimuli.length > 0) {\n          laststimulusindex = i;\n          defrows[i] = stimuli.shift();\n        } //stimulus keyword with new stimulus from array\n        else console.log('replaceStimuli: Warning not enough stimuli for replacement.');\n      }\n    }\n\n    if (stimuli.length > 0) {\n      console.log('replaceStimuli: Info adding remaining stimuli after last stimulus in extended test');\n      defrows.spliceArray(laststimulusindex, 0, stimuli);\n    }\n\n    return defrows;\n  } //replace each occurence of stimuli with a stimulus row from group definition,\n  // if some stimulus remains, it is inserted at the last position of stimulus in definition\n  ;\n\n  _proto.replaceStimuli = function replaceStimuli(definition, stimuli) {\n    var defrows = definition.split('\\n'); //splits per row\n\n    defrows[0] = '# ' + defrows[0]; //comment out first row of definition --usually testname\n    //    var newrows = [];\n\n    var laststimulusindex = 0;\n\n    for (var i = 0; i < stimuli.length; i++) {\n      stimuli[i] = 'stimulus ' + stimuli[i];\n    } //adds stimulus keyword as prefix\n\n\n    for (var _i = 0; _i < defrows.length; _i++) {\n      //parse each row\n      if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isZvuk(defrows[_i])) {\n        if (stimuli.length > 0) {\n          laststimulusindex = _i;\n          defrows[_i] = stimuli.shift();\n        } //stimulus keyword with new stimulus from array\n        else console.log('replaceStimuli: Warning not enough stimuli for replacement.');\n      }\n    }\n\n    if (stimuli.length > 0) {\n      console.log('replaceStimuli: Info adding remaining stimuli after last stimulus in extended test');\n      defrows.spliceArray(laststimulusindex + 1, 0, stimuli);\n    }\n\n    return defrows;\n  } //preprocessing\n  //copy everything before first state\n  //this.currentCursor++;\n  ;\n\n  _proto.preprocessTest = function preprocessTest(rawTest) {\n    this.currentCursor = 0;\n    this.splitted = rawTest.split('\\n'); //split to rows and parse rows\n\n    this.state = TestState.UND; // getState(this.splitted, currentCursor++);\n\n    this.tstate = {};\n    this.myTest = '';\n    this.tempTest = ''; //copy between test and first screen\n\n    this.copyTest();\n    if (this.tstate.poradicasenahodne) this.shuffleTest(); //console.log(\"cursor \" + this.currentCursor + \" row \" + this.splitted[this.currentCursor]);\n\n    this.state = this.getState();\n\n    while (this.state !== TestState.END) {\n      if (this.state === TestState.OBR) this.copyTest();else if (this.state === TestState.KAT) this.expandKategorie();else if (this.state === TestState.PAR) this.expandParovy();else if (this.state === TestState.EXT) this.expandInheritance();else if (this.state === TestState.STIMGR) this.expandStimuliGroup(); //        else if (this.state == TestState.REPSTIM) this.replaceStimuli();\n      //        else if (this.state == TestState.REPGRP) this.replaceStimuliGroup();\n      else {\n          //console.log(\"Parse error. \" + this.state + \". Not expected state. Line \" + this.currentCursor + \" row:\" + this.splitted[this.currentCursor++]);\n          this.myTest += this.splitted[this.currentCursor++] + '\\n'; //probably extension - copy test.\n        }\n      this.state = this.getState(); //if (this.currentCursor<this.splitted.length) console.log(\"cursor \" + this.currentCursor + \" row \" + this.splitted[this.currentCursor]);\n    } //return coppiedTest;\n\n\n    return this.myTest;\n  } //flatenize inheritance\n  //TODO continue with recursive - flatenize, remove statement from preprocess and add them to recursive call, or use ajax(async:false)\n  //flatenize -- collect artefacts\n  ;\n\n  _proto.flatenizeTest = function flatenizeTest(rawTest) {\n    this.splitted = rawTest.split('\\n');\n    var i = 0;\n    var j = 0;\n    var artefacts = [];\n\n    for (i = 0; i < this.splitted.length; i++) {\n      if (_dsl__WEBPACK_IMPORTED_MODULE_0__[\"Dsl\"].isExtends(this.splitted[i]) || isStimuliGroup(this.splitted[i])) {\n        var parentrow = this.splitted[i].split(/[ ;,]+/);\n\n        for (j = 1; j < parentrow.length; j++) {\n          artefacts.push(parentrow[j]); //add artefact names that will be recursively obtained from server\n        }\n      }\n    }\n  };\n\n  _proto.loadTestDefinition = function loadTestDefinition(row) {\n    var parentrow = this.splitted[this.currentCursor++].split(' ');\n\n    for (var i = 1; i < parentrow.length; i++) {\n      var parent = parentrow[i];\n      this.myTest += this.getTestDefinition(parent); //gets test definition by name, skip first row with test name and copy&paste to\n    }\n  };\n\n  return Preprocesor;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTW1MdS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3ByZXByb2Nlc29yLmpzPzMyNjIiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQge0RzbH0gZnJvbSAnLi9kc2wnO1xuaW1wb3J0IHtJbnRlcnByZXRlcn0gZnJvbSAnLi9pbnRlcnByZXRlcic7XG5cbi8vc3BsaWNlIGFycmF5IGludG8gYXJyYXlcbkFycmF5LnByb3RvdHlwZS5zcGxpY2VBcnJheSA9IGZ1bmN0aW9uKGluZGV4LCBuLCBhcnJheSkge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseSh0aGlzLCBbaW5kZXgsIG5dLmNvbmNhdChhcnJheSkpO1xufTtcblxubGV0IFRlc3RTdGF0ZSA9IHsgVU5EOiAwLCBPQlI6IDEsIFBBUjogMiwgS0FUOiAzLCAgRU5EOiA0LCBTVEFSVDogNSwgRVhUOiA2LCBTVElNR1I6IDcsIFJFUFNUSU06IDgsIFJFUEdSUDogOSB9O1xuXG5leHBvcnQgY2xhc3MgUHJlcHJvY2Vzb3Ige1xuICAvKipcbiAgICogQ3JlYXRlZCBieSB0b21hdG9uIG9uIDEwLzIyLzIwMTUuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihwYXJlbnQpIHtcbiAgICB0aGlzLmN1cnJlbnRDdXJzb3IgPSAwO1xuICAgIHRoaXMuc3RhdGUgPSBUZXN0U3RhdGUuVU5EOy8vIGdldFN0YXRlKHRoaXMuc3BsaXR0ZWQsIGN1cnJlbnRDdXJzb3IrKyk7XG4gICAgdGhpcy50c3RhdGUgPSB7fTtcbiAgICB0aGlzLm15VGVzdCA9ICcnO1xuICAgIHRoaXMuZXhwYW5kZWRUZXN0ID0gW107XG4gICAgdGhpcy5leHBhbmRlZEdyb3VwID0gW107XG4gICAgdGhpcy5yZXBsYWNlYWJsZVN0aW11bGkgPSBbXTtcbiAgICB0aGlzLnRlbXBUZXN0ID0gJyc7XG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7IC8vZXhwZWN0cyBwYXJzZXJcbiAgfVxuICAvL2NvbnNvbGUubG9nKHRoaXMuc3BsaXR0ZWQpO1xuICBnZXRTdGF0ZSgpIHtcbiAgICAvL2NvbnNvbGUubG9nKFwiZ2V0U3RhdGUoKSBcIitjdXJyZW50Q3Vyc29yKTtcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuc3BsaXR0ZWRbY3VycmVudEN1cnNvcl0pO1xuICAgIGlmICh0aGlzLmN1cnJlbnRDdXJzb3IgPj0gdGhpcy5zcGxpdHRlZC5sZW5ndGgpIHJldHVybiBUZXN0U3RhdGUuRU5EO1xuICAgIGlmIChEc2wuaXNQYXJvdnkodGhpcy5zcGxpdHRlZFt0aGlzLmN1cnJlbnRDdXJzb3JdKSkgcmV0dXJuIFRlc3RTdGF0ZS5QQVI7XG4gICAgaWYgKERzbC5pc0thdGVnb3JpZSh0aGlzLnNwbGl0dGVkW3RoaXMuY3VycmVudEN1cnNvcl0pKSByZXR1cm4gVGVzdFN0YXRlLktBVDtcbiAgICBpZiAoRHNsLmlzT2JyYXpvdmthKHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yXSkpIHJldHVybiBUZXN0U3RhdGUuT0JSO1xuICAgIGlmIChEc2wuaXNFeHRlbmRzKHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yXSkpIHJldHVybiBUZXN0U3RhdGUuRVhUO1xuICAgIGlmIChEc2wuaXNTdGltdWxpR3JvdXAodGhpcy5zcGxpdHRlZFt0aGlzLmN1cnJlbnRDdXJzb3JdKSkgcmV0dXJuIFRlc3RTdGF0ZS5TVElNR1I7XG4gICAgLy8gICAgICAgIGlmIChEc2wuaXNSZXBsYWNlU3RpbXVsaSh0aGlzLnNwbGl0dGVkW3RoaXMuY3VycmVudEN1cnNvcl0pKSByZXR1cm4gVGVzdFN0YXRlLlJFUFNUSU07XG4gICAgLy8gICAgICAgIGlmIChEc2wuaXNSZXBsYWNlR3JvdXAodGhpcy5zcGxpdHRlZFt0aGlzLmN1cnJlbnRDdXJzb3JdKSkgcmV0dXJuIFRlc3RTdGF0ZS5SRVBHUlA7XG4gICAgaWYgKERzbC5pc1JhbmRvbVBhaXJzKHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yXSkpIHsgdGhpcy50c3RhdGUucmFuZG9tcGFpcnMgPSB0cnVlOyByZXR1cm4gVGVzdFN0YXRlLlVORDt9XG4gICAgaWYgKERzbC5pc1BvcmFkaVZOdGljaSh0aGlzLnNwbGl0dGVkW3RoaXMuY3VycmVudEN1cnNvcl0pKSB7IHRoaXMudHN0YXRlLnBvcmFkaXZudGljaW5haG9kbmUgPSB0cnVlOyByZXR1cm4gVGVzdFN0YXRlLlVORDt9XG4gICAgaWYgKERzbC5pc1BvcmFkaVp2dWt1KHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yXSkpIHsgdGhpcy50c3RhdGUucG9yYWRpenZ1a3VuYWhvZG5lID0gdHJ1ZTsgcmV0dXJuIFRlc3RTdGF0ZS5VTkQ7fVxuICAgIGlmIChEc2wuaXNQb3JhZGlDYXNlKHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yXSkpIHsgdGhpcy50c3RhdGUucG9yYWRpY2FzZW5haG9kbmUgPSB0cnVlOyByZXR1cm4gVGVzdFN0YXRlLlVORDt9XG4gICAgaWYgKERzbC5pc1R5cGUodGhpcy5zcGxpdHRlZFt0aGlzLmN1cnJlbnRDdXJzb3JdKSkgdGhpcy5wYXJlbnQudHJhbnNsYXRlVHlwZSh0aGlzLnNwbGl0dGVkW3RoaXMuY3VycmVudEN1cnNvcl0pOyAvLyBmZWF0dXJlICMyMDgsIHR5cGUgaW4gdGhlIGJlZ2lubmluZyBvZiB0ZXN0IGRlZmluaXRpb25cbiAgICByZXR1cm4gVGVzdFN0YXRlLlVORDtcbiAgfVxuXG4gIGNvcHlUZXN0KCkge1xuICAgIHRoaXMuY3VycmVudEN1cnNvcisrO1xuICAgIHRoaXMubXlUZXN0ICs9IHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yIC0gMV0gKyAnXFxuJzsgLy9jb3B5IG9mIHJvdyB3aXRoIG9icmF6b3ZrYSBvciB0ZXN0IC4uLlxuICAgIHdoaWxlICh0aGlzLmdldFN0YXRlKCkgPT09IFRlc3RTdGF0ZS5VTkQpIHRoaXMubXlUZXN0ICs9IHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yKytdICsgJ1xcbic7IC8vY29weSBvZiByb3dzXG4gIH1cblxuICAvL2FsbCBhZnRlciB0aGUgY3Vyc29yIHdpbGwgYmUgc2h1ZmZsZWQgcGVyIHNjcmVlbnNcbiAgc2h1ZmZsZVRlc3QoKSB7XG4gICAgLy9yZWFkYWxsdGVzdFRvQXJyYXlcbiAgICBsZXQgdGVtcGN1cnNvciA9IHRoaXMuY3VycmVudEN1cnNvcisrO1xuICAgIGxldCB0ZXN0QXJyYXkgPSBbXTtcbiAgICB3aGlsZSAodGhpcy5nZXRTdGF0ZSgpICE9PSBUZXN0U3RhdGUuRU5EKSB7XG4gICAgICB0aGlzLnRlbXBUZXN0ID0gdGhpcy5zcGxpdHRlZFt0aGlzLmN1cnJlbnRDdXJzb3IgLSAxXSArICdcXG4nO1xuICAgICAgd2hpbGUgKHRoaXMuZ2V0U3RhdGUoKSA9PT0gVGVzdFN0YXRlLlVORCkgdGhpcy50ZW1wVGVzdCArPSB0aGlzLnNwbGl0dGVkW3RoaXMuY3VycmVudEN1cnNvcisrXSArICdcXG4nOyAvL2NvcHkgb2Ygcm93c1xuICAgICAgdGVzdEFycmF5LnB1c2godGhpcy50ZW1wVGVzdCk7IC8vZWFjaCBpdGVtIGlzIGEgc2NyZWVuXG4gICAgICB0aGlzLmN1cnJlbnRDdXJzb3IrKztcbiAgICB9XG4gICAgLy9zaHVmZmxlIHNjcmVlbnNcbiAgICB0ZXN0QXJyYXkuc2h1ZmZsZSgpO1xuXG4gICAgLy9leHBhbmRBcnJheVRvVGV4dFxuICAgIHRoaXMuY3VycmVudEN1cnNvciA9IHRlbXBjdXJzb3I7XG4gICAgbGV0IHRlc3RDYXNlID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXN0QXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRlc3RDYXNlID0gdGVzdEFycmF5W2ldLnNwbGl0KCdcXG4nKTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGVzdENhc2UubGVuZ3RoOyBqKyspIHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yKytdID0gdGVzdENhc2Vbal07XG4gICAgfVxuICAgIC8vY29uc29sZS5sb2coXCJ0ZXN0IGFmdGVyIHNodWZmbGVcIiwgdGhpcy5zcGxpdHRlZCk7ICAgIC8vdGhpcy5zcGxpdHRlZFt0aGlzLmN1cnJlbnRDdXJzb3JdXG4gICAgdGhpcy5jdXJyZW50Q3Vyc29yID0gdGVtcGN1cnNvcjtcbiAgfVxuXG4gIGNvbGxlY3RTb3VuZHMoKSB7XG4gICAgbGV0IHp2dWtzID0gW107XG4gICAgd2hpbGUgKERzbC5zdGFydHNXaXRoWnZ1ayh0aGlzLnNwbGl0dGVkW3RoaXMuY3VycmVudEN1cnNvcl0pKSB7XG4gICAgICB6dnVrcy5wdXNoKHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yKytdKTtcbiAgICB9XG4gICAgaWYgKHRoaXMudHN0YXRlLnBvcmFkaXp2dWt1bmFob2RuZSkge1xuICAgICAgenZ1a3Muc2h1ZmZsZSgpO1xuICAgICAgLy9jb25zb2xlLmxvZyhcInp2dWtzIGFmdGVyIHJhbmRvbSBzaHVmZmxpbmc6XCIsIHp2dWtzKTtcbiAgICB9XG4gICAgcmV0dXJuIHp2dWtzO1xuICB9XG5cbiAgZm9yZWFjaFNvdW5kR2VuZXJhdGVPYnJhem92a2EoenZ1a3MsIHRpdGxlKSB7XG4gICAgbGV0IG9icmF6b3ZrYWNvbnRlbnQgPSBbXTtcbiAgICB3aGlsZSAodGhpcy5nZXRTdGF0ZSgpID09PSBUZXN0U3RhdGUuVU5EKSB7XG4gICAgICBvYnJhem92a2Fjb250ZW50LnB1c2godGhpcy5zcGxpdHRlZFt0aGlzLmN1cnJlbnRDdXJzb3IrK10pO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHp2dWtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLm15VGVzdCArPSAnc2NyZWVuICcgKyBJbnRlcnByZXRlci5leHRyYWN0KHRpdGxlLCdzY3JlZW4gcGVyIDEnKSArICdcXG4nICsgenZ1a3NbaV0gKyAnXFxuJztcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgb2JyYXpvdmthY29udGVudC5sZW5ndGg7IGorKykge1xuICAgICAgICB0aGlzLm15VGVzdCArPSBvYnJhem92a2Fjb250ZW50W2pdICsgJ1xcbic7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZXhwYW5kS2F0ZWdvcmllKCkge1xuICAgIGxldCB0aXRsZSA9IHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yKytdOyAvL3NraXAgb3ZlciB0aGUgcm93IGRlZmluaW5nIHRoZSBrYXRlZ29yeSB0ZXN0XG4gICAgd2hpbGUgKERzbC5zdGFydHNXaXRoQ29tbWVudCh0aGlzLnNwbGl0dGVkW3RoaXMuY3VycmVudEN1cnNvcl0pKSB7Ly9za2lwIG92ZXIgY29tbWVudHMgLSB0aGVyZSBtaWdodCBiZSBzb21lIHN0eWxpbmdcbiAgICAgIHRpdGxlICs9ICdcXG4nICsgdGhpcy5zcGxpdHRlZFt0aGlzLmN1cnJlbnRDdXJzb3IrK107XG4gICAgfVxuICAgIGxldCB6dnVrcyA9IHRoaXMuY29sbGVjdFNvdW5kcygpO1xuICAgIHRoaXMuZm9yZWFjaFNvdW5kR2VuZXJhdGVPYnJhem92a2EoenZ1a3MsIHRpdGxlKTtcbiAgfVxuXG4gIG1ha2VQYWlycyh6dnVrcykge1xuICAgIGxldCBjb21iaW5hdGlvbnMgPSBbXTtcbiAgICAvL3JlY3Vyc2l2ZSBnZW5lcmF0aW9uIG9mIGFsbCBwb3NzaWIvbGUgcGFpcnNcbiAgICB2YXIgZ2V0cGFpcnMgPSBmdW5jdGlvbihhY3RpdmUsIHJlc3QpIHtcbiAgICAgIC8vY29uc29sZS5sb2coXCJpdGVyYXRpb25cIik7XG4gICAgICAvL2NvbnNvbGUubG9nKGFjdGl2ZSk7XG4gICAgICAvL2NvbnNvbGUubG9nKHJlc3QpXG4gICAgICBpZiAocmVzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKGFjdGl2ZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICBjb21iaW5hdGlvbnMucHVzaChhY3RpdmUpO1xuICAgICAgICAgIC8vY29uc29sZS5sb2coXCJmb3VuZDpcIik7XG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhhY3RpdmUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgYWN0aXZlMSA9IGFjdGl2ZS5zbGljZSgpO1xuICAgICAgICBhY3RpdmUucHVzaChyZXN0WzBdKTtcbiAgICAgICAgZ2V0cGFpcnMoYWN0aXZlLCByZXN0LnNsaWNlKDEpKTtcbiAgICAgICAgZ2V0cGFpcnMoYWN0aXZlMSwgcmVzdC5zbGljZSgxKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmdldHBhaXJzKFtdLCB6dnVrcyk7XG4gICAgcmV0dXJuIGNvbWJpbmF0aW9ucztcbiAgfVxuXG4gIGZvcmVhY2hQYWlyb2ZTb3VuZHNHZW5lcmF0ZU9icmF6b3ZrYShwYWlycywgdGl0bGUpIHtcbiAgICBsZXQgb2JyYXpvdmthY29udGVudCA9IFtdO1xuICAgIHdoaWxlICh0aGlzLmdldFN0YXRlKCkgPT09IFRlc3RTdGF0ZS5VTkQpIHtcbiAgICAgIG9icmF6b3ZrYWNvbnRlbnQucHVzaCh0aGlzLnNwbGl0dGVkW3RoaXMuY3VycmVudEN1cnNvcisrXSk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFpcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMubXlUZXN0ICs9ICdzY3JlZW4gJyArIEludGVycHJldGVyLmV4dHJhY3QodGl0bGUsJ3NjcmVlbiBwZXIgMicpICsgJ1xcbicgKyAnY29sdW1uXFxuJyArIHBhaXJzW2ldWzBdICsgJ1xcbicgKyBwYWlyc1tpXVsxXSArICdcXG4nO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBvYnJhem92a2Fjb250ZW50Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHRoaXMubXlUZXN0ICs9IG9icmF6b3ZrYWNvbnRlbnRbal0gKyAnXFxuJztcbiAgICAgIH1cbiAgICAgIC8qbXlUZXN0ICs9IFwic2xvdXBlY1xcblwiICsgcGFpcnNbaV1bMV0gKyBcIlxcblwiO1xuICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JyYXpvdmthY29udGVudC5sZW5ndGg7IGorKykge1xuICAgICAgIG15VGVzdCArPSBvYnJhem92a2Fjb250ZW50W2pdICsgXCJcXG5cIjtcbiAgICAgICB9Ki9cbiAgICB9XG4gICAgLy9maXggYnVnIHJhbm9kbSBpbiB0dXBsZVxuICB9XG5cbiAgZXhwYW5kUGFyb3Z5KCkge1xuICAgIGxldCB0aXRsZSA9IHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yKytdOyAvL3NraXAgcm93IGRlZmluaW5nIHBhciB0ZXN0XG4gICAgbGV0IHp2dWtzID0gdGhpcy5jb2xsZWN0U291bmRzKCk7XG4gICAgbGV0IHBhaXJzID0gdGhpcy5tYWtlUGFpcnMoenZ1a3MpO1xuICAgIGlmICh0aGlzLnRzdGF0ZS5wb3JhZGljYXNlbmFob2RuZSB8fCB0aGlzLnRzdGF0ZS5yYW5kb21wYWlycykgcGFpcnMuc2h1ZmZsZSgpO1xuICAgIGlmIChwYWlycy5sZW5ndGggPT09IDApIGNvbnNvbGUubG9nKCdFeHBlY3RlZCBtb3JlIHJvd3Mgd2l0aCBzdGltdWx1cyB0byBnZW5lcmF0ZSBwYWlycywgYnV0IG5vIHBhaXJzIGdlbmVyYXRlZC4nKTtcbiAgICB0aGlzLmZvcmVhY2hQYWlyb2ZTb3VuZHNHZW5lcmF0ZU9icmF6b3ZrYShwYWlycywgdGl0bGUpO1xuICB9XG5cblxuICAvL2V4cGFuZHMgaW5oZXJpdGVkIHRlc3QgLSByZWFkIGRlZmluaXRpb24gaW50byBzZXBhcmF0ZWQgYXJyYXkuXG4gIGV4cGFuZEluaGVyaXRhbmNlKCkge1xuICAgIGxldCBwYXJlbnRyb3cgPSB0aGlzLnNwbGl0dGVkW3RoaXMuY3VycmVudEN1cnNvcl0uc3BsaXQoL1sgOyxdKy8pOyAvL2VhY2ggaW5oZXJpdGVkIHRlc3QgaXMgc2VwYXJhdGVkXG4gICAgLy9mb3IgKHZhciBpPWluZGV4b2ZuYW1lcztpPHBhcmVudHJvdy5sZW5ndCBoO2krKyl7IC8vXG4gICAgLy9leHRlbmRzIFswXSB0ZXN0IFsxXSB3aXRoc3RpbXVsaSBbMl0gYSxiLGMsZCBbMyw0LDUsNl1cbiAgICBsZXQgcGFyZW50ID0gcGFyZW50cm93WzFdO1xuICAgIC8vZ2V0cyBmcm9tIHVybCB0ZXN0IGRlZmluaXRpb25cbiAgICBsZXQgbXl1cmwgPSBQc3ljaG9UZXN0MlVybCArIHBhcmVudDtcbiAgICAkLmFqYXgoe1xuICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgIHVybDogbXl1cmwsXG4gICAgICBkYXRhOiBudWxsLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24odGVzdGR0bykge1xuICAgICAgICBpZiAocGFyc2VyLnByZXAuZXhwYW5kZWRUZXN0W3BhcmVudF0pIGNvbnNvbGUubG9nKCdleHBhbmRJbmhlcml0YW5jZSwgV2FybmluZzogdGVzdCBkZWZpbml0aW9uIGFscmVhZHkgZXhpc3RzIGZvciAnICsgcGFyZW50KTtcbiAgICAgICAgcGFyc2VyLnByZXAuZXhwYW5kZWRUZXN0W3BhcmVudF0gPSB0ZXN0ZHRvWzBdLmRlZmluaXRpb247XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGpxLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdleHBhbmRJbmhlcml0YW5jZSwgRXJyb3I6IFdoZW4gbG9hZGluZyBkYXRhIGZvciB0aGUgdGVzdCBkZWZpbml0aW9uICcgKyBteXVybCArICcgJyArIGVycm9yKTtcbiAgICAgIH0sXG4gICAgICBhc3luYzogZmFsc2VcbiAgICB9KTtcbiAgICBpZiAocGFyZW50cm93Lmxlbmd0aCA+IDMpIHsgLy9leHRlbmRzIHdpdGggcmVwbGFjZW1lbnQgb2Ygc3RpbXVsaVxuICAgICAgaWYgKERzbC5pc1dpdGhTdGltdWxpKHBhcmVudHJvd1syXSkpIHtcbiAgICAgICAgbGV0IHN0aW11bGkgPSBwYXJlbnRyb3cuc2xpY2UoMyk7IC8vc3RpbXVsaSBuYW1lcyB3aXRob3V0IHByZXZpb3VzIC0tIFRPRE8gcGFyc2Ugd2l0aCBhcG9zdHJvcGhlc1xuICAgICAgICAvL3RoaXMucmVwbGFjZVN0aW11bGkocGFyZW50LHN0aW11bGkpOy8vcmVwbGFjZSBzdGltdWxpIHdpdGggbmV3IG9uZSBmcm9tIGFycmF5XG4gICAgICAgIC8vaW5zZXJ0cyBhIGV4dGVuZGVkIHRlc3Qgd2l0aCByZXBsYWNlZCBzdGltdWxpXG4gICAgICAgIHRoaXMuc3BsaXR0ZWQuc3BsaWNlQXJyYXkodGhpcy5jdXJyZW50Q3Vyc29yLCAxLCB0aGlzLnJlcGxhY2VTdGltdWxpKHRoaXMuZXhwYW5kZWRUZXN0W3BhcmVudF0sIHN0aW11bGkpKTtcbiAgICAgIH0gZWxzZSBpZiAoRHNsLmlzV2l0aFN0aW11bGlncm91cChwYXJlbnRyb3dbMl0pKSB7XG4gICAgICAgIGxldCBwYXJlbnQyID0gcGFyZW50cm93WzNdO1xuICAgICAgICBteXVybCA9IFBzeWNob1Rlc3QyVXJsICsgcGFyZW50MjtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgIHVybDogbXl1cmwsXG4gICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbih0ZXN0ZHRvKSB7XG4gICAgICAgICAgICBpZiAocGFyc2VyLnByZXAuZXhwYW5kZWRHcm91cFtwYXJlbnQyXSkgY29uc29sZS5sb2coJ2V4cGFuZEdyb3VwLCBXYXJuaW5nOiB0ZXN0IGRlZmluaXRpb24gYWxyZWFkeSBsb2FkZWQgZm9yICcgKyBwYXJlbnQyKTtcbiAgICAgICAgICAgIHBhcnNlci5wcmVwLmV4cGFuZGVkR3JvdXBbcGFyZW50Ml0gPSB0ZXN0ZHRvWzBdLmRlZmluaXRpb247XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oanEsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdleHBhbmRHcm91cCwgRXJyb3I6IFdoZW4gbG9hZGluZyBkYXRhIGZvciB0aGUgdGVzdCBkZWZpbml0aW9uICcgKyBteXVybCArICcgJyArIGVycm9yKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFzeW5jOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuZXhwYW5kZWRUZXN0W3BhcmVudF0pIHtcbiAgICAgICAgICBpZiAodGhpcy5leHBhbmRlZEdyb3VwW3BhcmVudDJdKSB0aGlzLnNwbGl0dGVkLnNwbGljZUFycmF5KHRoaXMuY3VycmVudEN1cnNvciwgMSwgdGhpcy5yZXBsYWNlU3RpbXVsaUdyb3VwKHRoaXMuZXhwYW5kZWRUZXN0W3BhcmVudF0sIHRoaXMuZXhwYW5kZWRHcm91cFtwYXJlbnQyXSkpO1xuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2V4cGFuZGluaGVyaXRhbmNlOiBJbmZvLCBub3RoaW5nIHRvIHJlcGxhY2UgZnJvbSBncm91cCcpO1xuICAgICAgICAgICAgdGhpcy5zcGxpdHRlZC5zcGxpY2VBcnJheSh0aGlzLmN1cnJlbnRDdXJzb3IsIDEsIHRoaXMuZXhwYW5kZWRUZXN0W3BhcmVudF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGNvbnNvbGUubG9nKCdleHBhbmRpbmhlcml0YW5jZTogSW5mbywgbm90aGluZyB0byBleHBhbmQnKTtcbiAgICAgIH0gZWxzZSBjb25zb2xlLmxvZygnZXhwYW5kaW5oZXJpdGFuY2U6IFdhcm5pbmcgdW5yZWNvZ25pemVkIGV4dGVuZCBhdHRyaWJ1dGU6JyArIHBhcmVudHJvd1syXSk7XG4gICAgfSBlbHNlIHsgLy9leHRlbmRzIHdpdGhvdXQgcmVwbGFjZW1lbnRcbiAgICAgIGlmICh0aGlzLmV4cGFuZGVkVGVzdFtwYXJlbnRdKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdleHBhbmRpbmhlcml0YW5jZTogSW5mbywgbm90aGluZyB0byByZXBsYWNlIGZyb20gZ3JvdXAnKTtcbiAgICAgICAgdGhpcy5zcGxpdHRlZC5zcGxpY2VBcnJheSh0aGlzLmN1cnJlbnRDdXJzb3IsIDEsIHRoaXMuc3BsaXRFeHRlbmRUZXN0RGVmaW5pdGlvbih0aGlzLmV4cGFuZGVkVGVzdFtwYXJlbnRdKSk7XG4gICAgICB9IGVsc2UgY29uc29sZS5sb2coJ2V4cGFuZGluaGVyaXRhbmNlOiBJbmZvLCBub3RoaW5nIHRvIGV4cGFuZCcpO1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnRDdXJzb3IrKztcbiAgfVxuXG4gIC8vZXhwYW5kcyBzdGltdWxpZ3JvdXAgaW50byB0aGUgY3VycmVudCB0ZXN0IC0gcmVhZHMgYWxsIHN0aW11bHVzIGluIGEgZ3JvdXAgaW50byBzZXBhcmF0ZSBhcnJheVxuICBleHBhbmRTdGltdWxpR3JvdXAoKSB7XG4gICAgbGV0IHBhcmVudHJvdyA9IHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yXS5zcGxpdCgvWyA7LF0rLyk7IC8vZWFjaCBleHBhbmRlZCBncm91cCBpcyBzcGxpdFxuICAgIC8vZm9yICh2YXIgaT1pbmRleG9mbmFtZXM7aTxwYXJlbnRyb3cubGVuZ3QgaDtpKyspeyAvL1xuICAgIC8vc3RpbXVsaWdyb3VwIFswXSBbZ3JvdXBuYW1lXSBbMS4uLl1cbiAgICBsZXQgcGFyZW50ID0gcGFyZW50cm93WzFdO1xuICAgIC8vZ2V0cyBmcm9tIHVybCB0ZXN0IGRlZmluaXRpb25cbiAgICBsZXQgbXl1cmwgPSBQc3ljaG9UZXN0MlVybCArIHBhcmVudDtcbiAgICAvL1RPRE8gbW92ZSBhamF4IGNhbGwgdG8gc2hhcmVkIGNsYXNzXG4gICAgJC5hamF4KHtcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICB1cmw6IG15dXJsLFxuICAgICAgZGF0YTogbnVsbCxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHRlc3RkdG8pIHtcbiAgICAgICAgaWYgKHRoaXMuZXhwYW5kZWRHcm91cFtwYXJlbnRdKSBjb25zb2xlLmxvZygnZXhwYW5kR3JvdXAsIFdhcm5pbmc6IHRlc3QgZGVmaW5pdGlvbiBhbHJlYWR5IGxvYWRlZCBmb3IgJyArIHBhcmVudCk7XG4gICAgICAgIHRoaXMuZXhwYW5kZWRHcm91cFtwYXJlbnRdID0gdGVzdGR0b1swXS5kZWZpbml0aW9uO1xuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihqcSwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXhwYW5kR3JvdXAsIEVycm9yOiBXaGVuIGxvYWRpbmcgZGF0YSBmb3IgdGhlIHRlc3QgZGVmaW5pdGlvbiAnICsgbXl1cmwgKyAnICcgKyBlcnJvcik7XG4gICAgICB9LFxuICAgICAgYXN5bmM6IGZhbHNlXG4gICAgfSk7XG4gICAgaWYgKHRoaXMuZXhwYW5kZWRHcm91cFtwYXJlbnRdKSB7XG4gICAgICB0aGlzLnNwbGl0dGVkLnNwbGljZUFycmF5KHRoaXMuY3VycmVudEN1cnNvciwgMSwgdGhpcy5zcGxpdFN0aW11bGlEZWZpbml0aW9uKHRoaXMuZXhwYW5kZWRHcm91cFtwYXJlbnRdKSk7XG4gICAgfSBlbHNlIGNvbnNvbGUubG9nKCdleHBhbmRHcm91cDogSW5mbywgbm90aGluZyB0byBleHBhbmQgZnJvbSBzdGltdWxpZ3JvdXAuJyk7XG4gICAgLy90aGlzLmN1cnJlbnRDdXJzb3IrKztcbiAgfVxuXG4gIC8vc3BsaXRzIG9ubHkgc3RpbXVsdXMgZnJvbSBncm91cCBkZWZpbml0aW9uIGludG8gYXJyYXlcbiAgc3BsaXRFeHRlbmRUZXN0RGVmaW5pdGlvbih0ZXN0ZGVmaW5pdGlvbikge1xuICAgIGxldCByYXd0ZXN0ID0gdGVzdGRlZmluaXRpb24uc3BsaXQoJ1xcbicpO1xuICAgIC8vcmF3dGVzdC5zaGlmdCgpOyAvL3JlbW92ZXMgZmlyc3Qgcm93IC0tIHVzdWFsbHkgZGVmaW5pdGlvbiBvZiB0ZXN0IG5hbWVcbiAgICByYXd0ZXN0WzBdID0gJyMgJyArIHJhd3Rlc3RbMF07IC8vY29tbWVudHMgb3V0IHRoZSBmaXJzdCByb3cgLS0gdXN1YWxseSBkZWZpbml0aW9uIG9mIHRlc3QgbmFtZVxuICAgIHJldHVybiByYXd0ZXN0O1xuICB9XG5cbiAgLy9zcGxpdHMgb25seSBzdGltdWx1cyBmcm9tIGdyb3VwIGRlZmluaXRpb24gaW50byBhcnJheVxuICBzcGxpdFN0aW11bGlEZWZpbml0aW9uKGdyb3VwZGVmaW5pdGlvbikge1xuICAgIGxldCByYXdzdGltdWxpID0gZ3JvdXBkZWZpbml0aW9uLnNwbGl0KCdcXG4nKTtcbiAgICBsZXQgc3RpbXVsaSA9IFtdO1xuICAgIC8vICAgIHZhciBuZXdyb3dzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCByYXdzdGltdWxpLmxlbmd0aDsgaSsrKSB7IC8vc3RlcCBvdmVyIGZpcnN0IHJvd1xuICAgICAgbGV0IG15c3RpbXVsaSA9IHJhd3N0aW11bGlbaV0udHJpbSgpO1xuICAgICAgaWYgKG15c3RpbXVsaS5sZW5ndGggPiAwKSB7c3RpbXVsaS5wdXNoKCdzdGltdWx1cyAnICsgcmF3c3RpbXVsaVtpXSk7fVxuICAgIH0gLy9hZGRzIG9ubHkgcm93cyB3aXRoIHN0aW11bHVzIHByZWZpeFxuICAgIHJldHVybiBzdGltdWxpO1xuICB9XG5cbiAgLy9yZXBsYWNlIGVhY2ggb2NjdXJlbmNlIG9mIHN0aW11bGkgd2l0aCBhIHN0aW11bHVzIHJvdyBmcm9tIGdyb3VwIGRlZmluaXRpb24sXG4gIC8vIGlmIHNvbWUgc3RpbXVsdXMgcmVtYWlucywgaXQgaXMgaW5zZXJ0ZWQgYXQgdGhlIGxhc3QgcG9zaXRpb24gb2Ygc3RpbXVsdXMgaW4gZGVmaW5pdGlvblxuICByZXBsYWNlU3RpbXVsaUdyb3VwKGRlZmluaXRpb24sIGdyb3VwZGVmaW5pdGlvbikge1xuICAgIGxldCBkZWZyb3dzID0gZGVmaW5pdGlvbi5zcGxpdCgnXFxuJyk7IC8vc3BsaXRzIHBlciByb3dcbiAgICBsZXQgc3RpbXVsaSA9IHRoaXMuc3BsaXRTdGltdWxpRGVmaW5pdGlvbihncm91cGRlZmluaXRpb24pO1xuICAgIGxldCBsYXN0c3RpbXVsdXNpbmRleCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZWZyb3dzLmxlbmd0aDsgaSsrKSB7IC8vcGFyc2UgZWFjaCByb3dcbiAgICAgIGlmIChEc2wuaXNadnVrKGRlZnJvd3NbaV0pKSB7XG4gICAgICAgIGlmIChzdGltdWxpLmxlbmd0aCA+IDApIHtsYXN0c3RpbXVsdXNpbmRleCA9IGk7IGRlZnJvd3NbaV0gPSBzdGltdWxpLnNoaWZ0KCk7fSAvL3N0aW11bHVzIGtleXdvcmQgd2l0aCBuZXcgc3RpbXVsdXMgZnJvbSBhcnJheVxuICAgICAgICBlbHNlIGNvbnNvbGUubG9nKCdyZXBsYWNlU3RpbXVsaTogV2FybmluZyBub3QgZW5vdWdoIHN0aW11bGkgZm9yIHJlcGxhY2VtZW50LicpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3RpbXVsaS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZygncmVwbGFjZVN0aW11bGk6IEluZm8gYWRkaW5nIHJlbWFpbmluZyBzdGltdWxpIGFmdGVyIGxhc3Qgc3RpbXVsdXMgaW4gZXh0ZW5kZWQgdGVzdCcpO1xuICAgICAgZGVmcm93cy5zcGxpY2VBcnJheShsYXN0c3RpbXVsdXNpbmRleCwgMCwgc3RpbXVsaSk7XG4gICAgfVxuICAgIHJldHVybiBkZWZyb3dzO1xuICB9XG5cbiAgLy9yZXBsYWNlIGVhY2ggb2NjdXJlbmNlIG9mIHN0aW11bGkgd2l0aCBhIHN0aW11bHVzIHJvdyBmcm9tIGdyb3VwIGRlZmluaXRpb24sXG4gIC8vIGlmIHNvbWUgc3RpbXVsdXMgcmVtYWlucywgaXQgaXMgaW5zZXJ0ZWQgYXQgdGhlIGxhc3QgcG9zaXRpb24gb2Ygc3RpbXVsdXMgaW4gZGVmaW5pdGlvblxuICByZXBsYWNlU3RpbXVsaShkZWZpbml0aW9uLCBzdGltdWxpKSB7XG4gICAgbGV0IGRlZnJvd3MgPSBkZWZpbml0aW9uLnNwbGl0KCdcXG4nKTsgLy9zcGxpdHMgcGVyIHJvd1xuICAgIGRlZnJvd3NbMF0gPSAnIyAnICsgZGVmcm93c1swXTsgLy9jb21tZW50IG91dCBmaXJzdCByb3cgb2YgZGVmaW5pdGlvbiAtLXVzdWFsbHkgdGVzdG5hbWVcbiAgICAvLyAgICB2YXIgbmV3cm93cyA9IFtdO1xuICAgIGxldCBsYXN0c3RpbXVsdXNpbmRleCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGltdWxpLmxlbmd0aDsgaSsrKSB7c3RpbXVsaVtpXSA9ICdzdGltdWx1cyAnICsgc3RpbXVsaVtpXTt9IC8vYWRkcyBzdGltdWx1cyBrZXl3b3JkIGFzIHByZWZpeFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVmcm93cy5sZW5ndGg7IGkrKykgeyAvL3BhcnNlIGVhY2ggcm93XG4gICAgICBpZiAoRHNsLmlzWnZ1ayhkZWZyb3dzW2ldKSkge1xuICAgICAgICBpZiAoc3RpbXVsaS5sZW5ndGggPiAwKSB7bGFzdHN0aW11bHVzaW5kZXggPSBpOyBkZWZyb3dzW2ldID0gc3RpbXVsaS5zaGlmdCgpO30gLy9zdGltdWx1cyBrZXl3b3JkIHdpdGggbmV3IHN0aW11bHVzIGZyb20gYXJyYXlcbiAgICAgICAgZWxzZSBjb25zb2xlLmxvZygncmVwbGFjZVN0aW11bGk6IFdhcm5pbmcgbm90IGVub3VnaCBzdGltdWxpIGZvciByZXBsYWNlbWVudC4nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0aW11bGkubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coJ3JlcGxhY2VTdGltdWxpOiBJbmZvIGFkZGluZyByZW1haW5pbmcgc3RpbXVsaSBhZnRlciBsYXN0IHN0aW11bHVzIGluIGV4dGVuZGVkIHRlc3QnKTtcbiAgICAgIGRlZnJvd3Muc3BsaWNlQXJyYXkobGFzdHN0aW11bHVzaW5kZXggKyAxLCAwLCBzdGltdWxpKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZnJvd3M7XG4gIH1cblxuXG4gIC8vcHJlcHJvY2Vzc2luZ1xuICAvL2NvcHkgZXZlcnl0aGluZyBiZWZvcmUgZmlyc3Qgc3RhdGVcbiAgLy90aGlzLmN1cnJlbnRDdXJzb3IrKztcbiAgcHJlcHJvY2Vzc1Rlc3QocmF3VGVzdCkge1xuICAgIHRoaXMuY3VycmVudEN1cnNvciA9IDA7XG4gICAgdGhpcy5zcGxpdHRlZCA9IHJhd1Rlc3Quc3BsaXQoJ1xcbicpOyAvL3NwbGl0IHRvIHJvd3MgYW5kIHBhcnNlIHJvd3NcbiAgICB0aGlzLnN0YXRlID0gVGVzdFN0YXRlLlVORDsvLyBnZXRTdGF0ZSh0aGlzLnNwbGl0dGVkLCBjdXJyZW50Q3Vyc29yKyspO1xuICAgIHRoaXMudHN0YXRlID0ge307XG4gICAgdGhpcy5teVRlc3QgPSAnJztcbiAgICB0aGlzLnRlbXBUZXN0ID0gJyc7XG5cbiAgICAvL2NvcHkgYmV0d2VlbiB0ZXN0IGFuZCBmaXJzdCBzY3JlZW5cbiAgICB0aGlzLmNvcHlUZXN0KCk7XG5cbiAgICBpZiAodGhpcy50c3RhdGUucG9yYWRpY2FzZW5haG9kbmUpIHRoaXMuc2h1ZmZsZVRlc3QoKTtcblxuICAgIC8vY29uc29sZS5sb2coXCJjdXJzb3IgXCIgKyB0aGlzLmN1cnJlbnRDdXJzb3IgKyBcIiByb3cgXCIgKyB0aGlzLnNwbGl0dGVkW3RoaXMuY3VycmVudEN1cnNvcl0pO1xuICAgIHRoaXMuc3RhdGUgPSB0aGlzLmdldFN0YXRlKCk7XG4gICAgd2hpbGUgKHRoaXMuc3RhdGUgIT09IFRlc3RTdGF0ZS5FTkQpIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlID09PSBUZXN0U3RhdGUuT0JSKSB0aGlzLmNvcHlUZXN0KCk7XG4gICAgICBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBUZXN0U3RhdGUuS0FUKSB0aGlzLmV4cGFuZEthdGVnb3JpZSgpO1xuICAgICAgZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gVGVzdFN0YXRlLlBBUikgdGhpcy5leHBhbmRQYXJvdnkoKTtcbiAgICAgIGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFRlc3RTdGF0ZS5FWFQpICB0aGlzLmV4cGFuZEluaGVyaXRhbmNlKCk7XG4gICAgICBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBUZXN0U3RhdGUuU1RJTUdSKSB0aGlzLmV4cGFuZFN0aW11bGlHcm91cCgpO1xuICAgICAgLy8gICAgICAgIGVsc2UgaWYgKHRoaXMuc3RhdGUgPT0gVGVzdFN0YXRlLlJFUFNUSU0pIHRoaXMucmVwbGFjZVN0aW11bGkoKTtcbiAgICAgIC8vICAgICAgICBlbHNlIGlmICh0aGlzLnN0YXRlID09IFRlc3RTdGF0ZS5SRVBHUlApIHRoaXMucmVwbGFjZVN0aW11bGlHcm91cCgpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJQYXJzZSBlcnJvci4gXCIgKyB0aGlzLnN0YXRlICsgXCIuIE5vdCBleHBlY3RlZCBzdGF0ZS4gTGluZSBcIiArIHRoaXMuY3VycmVudEN1cnNvciArIFwiIHJvdzpcIiArIHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yKytdKTtcbiAgICAgICAgdGhpcy5teVRlc3QgKz0gdGhpcy5zcGxpdHRlZFt0aGlzLmN1cnJlbnRDdXJzb3IrK10gKyAnXFxuJzsgLy9wcm9iYWJseSBleHRlbnNpb24gLSBjb3B5IHRlc3QuXG4gICAgICB9XG4gICAgICB0aGlzLnN0YXRlID0gdGhpcy5nZXRTdGF0ZSgpO1xuICAgICAgLy9pZiAodGhpcy5jdXJyZW50Q3Vyc29yPHRoaXMuc3BsaXR0ZWQubGVuZ3RoKSBjb25zb2xlLmxvZyhcImN1cnNvciBcIiArIHRoaXMuY3VycmVudEN1cnNvciArIFwiIHJvdyBcIiArIHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yXSk7XG4gICAgfVxuICAgIC8vcmV0dXJuIGNvcHBpZWRUZXN0O1xuICAgIHJldHVybiB0aGlzLm15VGVzdDtcbiAgfVxuICAvL2ZsYXRlbml6ZSBpbmhlcml0YW5jZVxuICAvL1RPRE8gY29udGludWUgd2l0aCByZWN1cnNpdmUgLSBmbGF0ZW5pemUsIHJlbW92ZSBzdGF0ZW1lbnQgZnJvbSBwcmVwcm9jZXNzIGFuZCBhZGQgdGhlbSB0byByZWN1cnNpdmUgY2FsbCwgb3IgdXNlIGFqYXgoYXN5bmM6ZmFsc2UpXG5cbiAgLy9mbGF0ZW5pemUgLS0gY29sbGVjdCBhcnRlZmFjdHNcbiAgZmxhdGVuaXplVGVzdChyYXdUZXN0KSB7XG4gICAgdGhpcy5zcGxpdHRlZCA9IHJhd1Rlc3Quc3BsaXQoJ1xcbicpO1xuICAgIGxldCBpID0gMDsgbGV0IGogPSAwO1xuICAgIGxldCBhcnRlZmFjdHMgPSBbXTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zcGxpdHRlZC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKERzbC5pc0V4dGVuZHModGhpcy5zcGxpdHRlZFtpXSkgfHwgaXNTdGltdWxpR3JvdXAodGhpcy5zcGxpdHRlZFtpXSkpIHtcbiAgICAgICAgbGV0IHBhcmVudHJvdyA9IHRoaXMuc3BsaXR0ZWRbaV0uc3BsaXQoL1sgOyxdKy8pO1xuICAgICAgICBmb3IgKGogPSAxOyBqIDwgcGFyZW50cm93Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgYXJ0ZWZhY3RzLnB1c2gocGFyZW50cm93W2pdKTsgLy9hZGQgYXJ0ZWZhY3QgbmFtZXMgdGhhdCB3aWxsIGJlIHJlY3Vyc2l2ZWx5IG9idGFpbmVkIGZyb20gc2VydmVyXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBsb2FkVGVzdERlZmluaXRpb24ocm93KSB7XG4gICAgbGV0IHBhcmVudHJvdyA9IHRoaXMuc3BsaXR0ZWRbdGhpcy5jdXJyZW50Q3Vyc29yKytdLnNwbGl0KCcgJyk7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwYXJlbnRyb3cubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBwYXJlbnQgPSBwYXJlbnRyb3dbaV07XG4gICAgICB0aGlzLm15VGVzdCArPSB0aGlzLmdldFRlc3REZWZpbml0aW9uKHBhcmVudCk7IC8vZ2V0cyB0ZXN0IGRlZmluaXRpb24gYnkgbmFtZSwgc2tpcCBmaXJzdCByb3cgd2l0aCB0ZXN0IG5hbWUgYW5kIGNvcHkmcGFzdGUgdG9cbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQkE7QUFDQTtBQURBO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFsQ0E7QUFvQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQXZDQTtBQUNBO0FBREE7QUEyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQWpFQTtBQW1FQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQTdFQTtBQStFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExRkE7QUE0RkE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQW5HQTtBQXFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBM0hBO0FBNkhBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBN0lBO0FBK0lBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFySkE7QUFDQTtBQURBO0FBMEpBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFDQTtBQVlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQUNBO0FBWUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQWxOQTtBQUNBO0FBREE7QUFzTkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBOU9BO0FBQ0E7QUFEQTtBQWtQQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUF0UEE7QUFDQTtBQURBO0FBMFBBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBclFBO0FBQ0E7QUFEQTtBQXVRQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUF4UkE7QUFDQTtBQURBO0FBMFJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUEvU0E7QUFDQTtBQURBO0FBaVRBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBTUE7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFwVkE7QUFDQTtBQURBO0FBc1ZBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbFdBO0FBb1dBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExV0E7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///MmLu\n");

/***/ }),

/***/ "OOUQ":
/*!*************************************!*\
  !*** ./src/components/psychoapi.js ***!
  \*************************************/
/*! exports provided: PsychoApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PsychoApi\", function() { return PsychoApi; });\n/* harmony import */ var aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-fetch-client */ \"qQke\");\n\n/* Provides methods to return promise of data from REST Project api*/\n\nvar PsychoApi = /*#__PURE__*/function () {\n  function PsychoApi(httpclient) {\n    this.httpclient = httpclient;\n    this.httpclient.configure(function (config) {\n      config.rejectErrorResponses().withBaseUrl('').withDefaults({\n        credentials: 'include',\n        headers: {\n          'Accept': 'application/json',\n          'X-Requested-With': 'Fetch'\n        }\n      });\n    });\n    this.apiurl = localStorage.getItem('psychotest.apiurl');\n\n    if (this.apiurl === null) {\n      if (window.location.hostname === 'localhost') this.apiurl = '/api';else this.apiurl = 'https://wl-virtualfolder.tk/api'; //TODO allow selection of predefined api urls\n    }\n\n    this.staticurl = localStorage.getItem('psychotest.staticurl');\n    if (this.staticurl === null) this.staticurl = 'test/';\n    this.projectapiurl = '/project';\n    this.userinfoapiurl = '/userinfo';\n    this.psychotestapiurl = '/psychotest';\n    this.resulturl = '/psychotestresult';\n    this.pausedtesturl = '/psychotestpaused';\n    this.b2accessendpoint = '/b2access/endpoint';\n    this.remote = new Map();\n    this.remote.set('https://webdav.pcloud.com/HAMU-Psychotest', {\n      'username': '',\n      'password': ''\n    }); //this requires also authentication Basic: username:password in base64\n    //this.remoteusername = '';\n    //this.remotepassword = '';\n\n    this.testdefinition = undefined;\n    this.testid = '';\n    this.testsource = '';\n    this.userinfo = false;\n  }\n\n  var _proto = PsychoApi.prototype;\n\n  _proto.getMetadatas = function getMetadatas(id) {\n    var metadataurl = this.dataurl + '/' + id + '/metadata';\n    return this.httpclient.fetch(metadataurl).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return data;\n    });\n  }\n  /**\n   * Performs GET request to REST API and returns definition item of returned test record.\n   * @returns { data.definition item }\n   */\n  ;\n\n  _proto.getApiTestDefinition = function getApiTestDefinition(testid) {\n    var _this = this;\n\n    return this.httpclient.fetch(this.apiurl + this.psychotestapiurl + '/' + testid).then(function (response) {\n      var testheaders = response.headers; //console.log('getapi test headers',testheaders.get);\n\n      _this.testetag = testheaders.get('ETag');\n      return response.json();\n    }).then(function (data) {\n      //        console.log('Psychoapi.getselectedtestdefinition:', data);\n      return data.definition;\n    });\n  };\n\n  _proto.patchApiTestDefinition = function patchApiTestDefinition(testid, testdef) {\n    var _this2 = this;\n\n    var body = {\n      definition: testdef,\n      owner: this.userinfo.id ? this.userinfo.id : ''\n    };\n    var headers = new Headers({\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'Fetch' //'If-Match': this.testetag\n\n    });\n    console.log('saving test', testid);\n    return this.httpclient.fetch(this.apiurl + this.psychotestapiurl + '/' + testid, {\n      method: 'PATCH',\n      body: Object(aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_0__[\"json\"])(body),\n      headers: headers\n    }).then(function (response) {\n      var testheaders = response.headers; //console.log('getapi test headers',testheaders.get);\n\n      _this2.testetag = testheaders.get('ETag');\n      return response.json();\n    }).then(function (data) {\n      //        console.log('Psychoapi.getselectedtestdefinition:', data);\n      return data.definition;\n    });\n  };\n\n  _proto.putApiTestDefinition = function putApiTestDefinition(testid, testdef) {\n    var _this3 = this;\n\n    var body = {\n      definition: testdef,\n      owner: this.userinfo.id ? this.userinfo.id : ''\n    };\n    var headers = new Headers({\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'Fetch',\n      'If-Match': this.testetag\n    });\n    console.log('saving test', testid);\n    return this.httpclient.fetch(this.apiurl + this.psychotestapiurl + '/' + testid, {\n      method: 'PUT',\n      body: Object(aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_0__[\"json\"])(body),\n      headers: headers\n    }).then(function (response) {\n      var testheaders = response.headers; //console.log('getapi test headers',testheaders.get);\n\n      _this3.testetag = testheaders.get('ETag');\n      return response.json();\n    }).then(function (data) {\n      //        console.log('Psychoapi.getselectedtestdefinition:', data);\n      return data.definition;\n    });\n  };\n\n  _proto.postApiTestDefinition = function postApiTestDefinition(testdef, name) {\n    var _this4 = this;\n\n    //put owner information, if no owner -TODO reject posting\n    var body = {\n      definition: testdef,\n      name: name,\n      snippet: testdef.slice(0, 80),\n      owner: this.userinfo.id ? this.userinfo.id : ''\n    };\n    var headers = new Headers({\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'Fetch'\n    });\n    return this.httpclient.fetch(this.apiurl + this.psychotestapiurl, {\n      method: 'POST',\n      body: Object(aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_0__[\"json\"])(body),\n      headers: headers\n    }).then(function (response) {\n      var testheaders = response.headers; //console.log('getapi test headers',testheaders.get);\n\n      _this4.testetag = testheaders.get('ETag');\n      return response.json();\n    });\n  };\n\n  _proto.delete = function _delete(testid, testsource) {\n    if (!testsource) {\n      return this.httpclient.fetch(this.apiurl + this.psychotestapiurl + '/' + testid, {\n        method: 'DELETE'\n      });\n    }\n  }\n  /**\n   * performs GET request to REST API with projection to snippet, name, owner\n   * @returns { _items returned in response - array of tests }\n   */\n  ;\n\n  _proto.getApiTests = function getApiTests() {\n    return this.httpclient.fetch(this.apiurl + this.psychotestapiurl + '?where={\"owner\":\"' + (this.userinfo.id ? this.userinfo.id : '') + '\"}&projection={\"snippet\":1,\"name\":1,\"owner\":1,\"_updated\":1,\"_created\":1}').then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      //console.log('Pssychoapi.gettests:', data);\n      return data._items;\n    });\n  };\n\n  _proto.retrieveProjects = function retrieveProjects() {\n    return this.httpclient.fetch(this.apiurl + this.projectapiurl).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      console.log('Psychoapi.getprojects:', data);\n      return data;\n    }).catch(function (error) {\n      console.log('error when obtaining project list', error);\n    });\n  };\n\n  _proto.getRemoteTestDefinition = function getRemoteTestDefinition(source, testid) {\n    var headers = new Headers({\n      'Accept': 'application/json',\n      'X-Requested-With': 'Fetch'\n    });\n\n    if (this.remote.has(source)) {\n      headers.append('Authorization', 'Basic ' + btoa(this.remote.get(source).username + ':' + this.remote.get(source).password));\n    }\n\n    return this.httpclient.fetch(source + testid, {\n      headers: headers\n    }).then(function (response) {\n      return response.text();\n    }).then(function (data) {\n      return data;\n    });\n  };\n\n  _proto.putRemoteTestDefinition = function putRemoteTestDefinition(source, testid, testdef) {\n    var headers = new Headers({\n      'Accept': 'application/json',\n      'X-Requested-With': 'Fetch'\n    });\n    console.log('saving test', source, testid);\n\n    if (this.remote.has(source)) {\n      headers.append('Authorization', 'Basic ' + btoa(this.remote.get(source).username + ':' + this.remote.get(source).password));\n    }\n\n    var body = testdef;\n    return this.httpclient.fetch(source + testid, {\n      method: 'PUT',\n      headers: headers,\n      body: body\n    }).then(function (response) {\n      return response.text();\n    }).then(function (data) {\n      return data;\n    });\n  };\n\n  _proto.getStaticTests = function getStaticTests() {\n    return this.getRemoteTests(this.staticurl);\n  };\n\n  _proto.getRemoteTests = function getRemoteTests(source) {\n    var headers = new Headers({\n      'Accept': 'application/json',\n      'X-Requested-With': 'Fetch'\n    });\n\n    if (this.remote.has(source)) {\n      headers.append('Authorization', 'Basic ' + btoa(this.remote.get(source).username + ':' + this.remote.get(source).password));\n    }\n\n    return this.httpclient.fetch(source + 'index.json', {\n      headers: headers\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return data.map(function (x) {\n        x.source = source;\n        return x;\n      });\n    }); //adds source item to every element\n  };\n\n  _proto.getTestDefinition = function getTestDefinition(id, source) {\n    this.testid = id;\n    this.testsource = source;\n\n    if (this.testsource) {\n      return this.getRemoteTestDefinition(this.testsource, this.testid).then(function (data) {\n        //console.log('data');\n        return data;\n      });\n    } else if (this.testid) {\n      return this.getApiTestDefinition(this.testid).then(function (data) {\n        //console.log('data');\n        return data; //this.editor.setValue(data);\n      });\n    }\n\n    return new Promise(function (resolve) {});\n  };\n\n  _proto.saveTest = function saveTest(td, name) {\n    var _this5 = this;\n\n    //console.log('saving test:', td);\n    this.testdefinition = td;\n\n    if (this.testsource) {\n      return this.putRemoteTestDefinition(this.testsource, this.testid, this.testdefinition).catch(function (error) {\n        alert('Error when saving the test:', error.message);\n      });\n    } else if (this.testid) {\n      return this.patchApiTestDefinition(this.testid, this.testdefinition).catch(function (error) {\n        alert('Error when saving the test:', error.message);\n      });\n    } //create new\n\n\n    return this.postApiTestDefinition(this.testdefinition, name).then(function (x) {\n      _this5.testid = x._id;\n      _this5.testetag = x._etag;\n    });\n  };\n\n  _proto.getUserInfo = function getUserInfo() {\n    var _this6 = this;\n\n    // returns userinfo data\n    if (this.userinfo) return new Promise(function (resolve, reject) {\n      resolve(_this6.userinfo);\n    });\n    return this.httpclient.fetch(this.apiurl + this.userinfoapiurl).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      _this6.userinfo = data;\n      return data;\n    });\n  };\n\n  _proto.save = function save(surl, aurl) {\n    localStorage.setItem('psychotest.apiurl', aurl);\n    localStorage.setItem('psychtoest.staticurl', surl);\n    this.apiurl = localStorage.getItem('psychotest.apiurl');\n    this.staticurl = localStorage.getItem('psychotest.staticurl');\n  };\n\n  _proto.load = function load() {\n    this.apiurl = localStorage.getItem('psychotest.apiurl');\n    if (this.apiurl === null) this.apiurl = '/api';\n    this.staticurl = localStorage.getItem('psychotest.staticurl');\n    if (this.staticurl === null) this.staticurl = 'test/';\n    return [this.staticurl, this.apiurl];\n  };\n\n  _proto.reset = function reset() {\n    this.apiurl = '/api'; //can be http://localhost:8080 or other\n\n    this.staticurl = 'test/';\n    localStorage.clear();\n    return [this.staticurl, this.apiurl];\n  };\n\n  _proto.postResults = function postResults(testResult) {\n    //let body = {definition: testdef, name: name, snippet: testdef.slice( 0, 80), owner: this.userinfo.id ? this.userinfo.id : ''};\n    var headers = new Headers({\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'Fetch'\n    });\n    return this.httpclient.fetch(this.apiurl + this.resulturl, {\n      method: 'POST',\n      body: Object(aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_0__[\"json\"])(testResult),\n      headers: headers\n    }).then(function (response) {\n      var testheaders = response.headers; //console.log('getapi test headers',testheaders.get);\n      //this.testetag = testheaders.get('ETag');\n\n      return response.json();\n    });\n  };\n\n  _proto.deletePausedTest = function deletePausedTest(id) {\n    return this.httpclient.fetch(this.apiurl + this.pausedtesturl + '/' + id, {\n      method: 'DELETE'\n    });\n  };\n\n  _proto.releasePausedTest = function releasePausedTest() {\n    var _this7 = this;\n\n    if (this.resumeid && this.resumeid > 0) {\n      this.deletePausedTest(this.resumeid).then(function (data2) {\n        if (data2.ok) {\n          _this7.resumeid = 0;\n        }\n      });\n    }\n  };\n\n  _proto.postPausedTest = function postPausedTest(testres) {\n    var headers = new Headers({\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'Fetch'\n    });\n    return this.httpclient.fetch(this.apiurl + this.pausedtesturl, {\n      method: 'POST',\n      body: Object(aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_0__[\"json\"])(testres),\n      headers: headers\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return data;\n    });\n  };\n\n  _proto.putPausedTest = function putPausedTest(resumeid, testres) {\n    var headers = new Headers({\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'Fetch'\n    });\n    return this.httpclient.fetch(this.apiurl + this.pausedtesturl + '/' + resumeid, {\n      method: 'PUT',\n      body: Object(aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_0__[\"json\"])(testres),\n      headers: headers\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return data;\n    });\n  };\n\n  _proto.getPausedTest = function getPausedTest(resumeid) {\n    return this.httpclient.fetch(this.apiurl + this.pausedtesturl + '/' + resumeid).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return data;\n    });\n  };\n\n  _proto.getB2AccessEndpoint = function getB2AccessEndpoint() {\n    return this.httpclient.fetch(this.apiurl + this.b2accessendpoint).then(function (response) {\n      return response.text();\n    }).then(function (data) {\n      return data;\n    });\n  };\n\n  return PsychoApi;\n}();\nPsychoApi.inject = [aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_0__[\"HttpClient\"]];//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT09VUS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3BzeWNob2FwaS5qcz8zOGU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SHR0cENsaWVudCwganNvbn0gZnJvbSAnYXVyZWxpYS1mZXRjaC1jbGllbnQnO1xuLyogUHJvdmlkZXMgbWV0aG9kcyB0byByZXR1cm4gcHJvbWlzZSBvZiBkYXRhIGZyb20gUkVTVCBQcm9qZWN0IGFwaSovXG5cbmV4cG9ydCBjbGFzcyBQc3ljaG9BcGkge1xuICBzdGF0aWMgaW5qZWN0ID0gW0h0dHBDbGllbnRdO1xuXG4gIGNvbnN0cnVjdG9yKGh0dHBjbGllbnQpIHtcbiAgICB0aGlzLmh0dHBjbGllbnQgPSBodHRwY2xpZW50O1xuICAgIHRoaXMuaHR0cGNsaWVudC5jb25maWd1cmUoY29uZmlnID0+IHtcbiAgICAgIGNvbmZpZ1xuICAgICAgICAucmVqZWN0RXJyb3JSZXNwb25zZXMoKVxuICAgICAgICAud2l0aEJhc2VVcmwoJycpXG4gICAgICAgIC53aXRoRGVmYXVsdHMoe1xuICAgICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdYLVJlcXVlc3RlZC1XaXRoJzogJ0ZldGNoJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5hcGl1cmwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHN5Y2hvdGVzdC5hcGl1cmwnKTtcbiAgICBpZiAodGhpcy5hcGl1cmwgPT09IG51bGwpIHtcbiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnKSB0aGlzLmFwaXVybCA9ICcvYXBpJztcbiAgICAgIGVsc2UgdGhpcy5hcGl1cmwgPSAnaHR0cHM6Ly93bC12aXJ0dWFsZm9sZGVyLnRrL2FwaSc7IC8vVE9ETyBhbGxvdyBzZWxlY3Rpb24gb2YgcHJlZGVmaW5lZCBhcGkgdXJsc1xuICAgIH1cbiAgICB0aGlzLnN0YXRpY3VybCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwc3ljaG90ZXN0LnN0YXRpY3VybCcpO1xuICAgIGlmICh0aGlzLnN0YXRpY3VybCA9PT0gbnVsbCkgdGhpcy5zdGF0aWN1cmwgPSAndGVzdC8nO1xuICAgIHRoaXMucHJvamVjdGFwaXVybCA9ICcvcHJvamVjdCc7XG4gICAgdGhpcy51c2VyaW5mb2FwaXVybCA9ICcvdXNlcmluZm8nO1xuICAgIHRoaXMucHN5Y2hvdGVzdGFwaXVybCA9ICcvcHN5Y2hvdGVzdCc7XG4gICAgdGhpcy5yZXN1bHR1cmwgPSAnL3BzeWNob3Rlc3RyZXN1bHQnO1xuICAgIHRoaXMucGF1c2VkdGVzdHVybCA9ICcvcHN5Y2hvdGVzdHBhdXNlZCc7XG4gICAgdGhpcy5iMmFjY2Vzc2VuZHBvaW50ID0gJy9iMmFjY2Vzcy9lbmRwb2ludCc7XG4gICAgdGhpcy5yZW1vdGUgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5yZW1vdGUuc2V0KCdodHRwczovL3dlYmRhdi5wY2xvdWQuY29tL0hBTVUtUHN5Y2hvdGVzdCcsIHsndXNlcm5hbWUnOiAnJywgJ3Bhc3N3b3JkJzogJyd9KTsgLy90aGlzIHJlcXVpcmVzIGFsc28gYXV0aGVudGljYXRpb24gQmFzaWM6IHVzZXJuYW1lOnBhc3N3b3JkIGluIGJhc2U2NFxuICAgIC8vdGhpcy5yZW1vdGV1c2VybmFtZSA9ICcnO1xuICAgIC8vdGhpcy5yZW1vdGVwYXNzd29yZCA9ICcnO1xuICAgIHRoaXMudGVzdGRlZmluaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy50ZXN0aWQgPSAnJztcbiAgICB0aGlzLnRlc3Rzb3VyY2UgPSAnJztcbiAgICB0aGlzLnVzZXJpbmZvID0gZmFsc2U7XG4gIH1cblxuICBnZXRNZXRhZGF0YXMoaWQpIHtcbiAgICBsZXQgbWV0YWRhdGF1cmwgPSB0aGlzLmRhdGF1cmwgKyAnLycgKyBpZCArICcvbWV0YWRhdGEnO1xuICAgIHJldHVybiB0aGlzLmh0dHBjbGllbnQuZmV0Y2gobWV0YWRhdGF1cmwpXG4gICAgICAudGhlbihyZXNwb25zZSA9PnJlc3BvbnNlLmpzb24oKSlcbiAgICAgIC50aGVuKGRhdGE9PiB7cmV0dXJuIGRhdGE7fSk7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgR0VUIHJlcXVlc3QgdG8gUkVTVCBBUEkgYW5kIHJldHVybnMgZGVmaW5pdGlvbiBpdGVtIG9mIHJldHVybmVkIHRlc3QgcmVjb3JkLlxuICAgKiBAcmV0dXJucyB7IGRhdGEuZGVmaW5pdGlvbiBpdGVtIH1cbiAgICovXG4gIGdldEFwaVRlc3REZWZpbml0aW9uKHRlc3RpZCkge1xuICAgIHJldHVybiB0aGlzLmh0dHBjbGllbnQuZmV0Y2godGhpcy5hcGl1cmwgKyB0aGlzLnBzeWNob3Rlc3RhcGl1cmwgKyAnLycgKyB0ZXN0aWQpXG4gICAgICAudGhlbihyZXNwb25zZT0+IHtcbiAgICAgICAgbGV0IHRlc3RoZWFkZXJzID0gcmVzcG9uc2UuaGVhZGVycztcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0YXBpIHRlc3QgaGVhZGVycycsdGVzdGhlYWRlcnMuZ2V0KTtcbiAgICAgICAgdGhpcy50ZXN0ZXRhZyA9IHRlc3RoZWFkZXJzLmdldCgnRVRhZycpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGRhdGE9PntcbiAgICAgICAgLy8gICAgICAgIGNvbnNvbGUubG9nKCdQc3ljaG9hcGkuZ2V0c2VsZWN0ZWR0ZXN0ZGVmaW5pdGlvbjonLCBkYXRhKTtcbiAgICAgICAgcmV0dXJuIGRhdGEuZGVmaW5pdGlvbjtcbiAgICAgIH0pO1xuICB9XG5cbiAgcGF0Y2hBcGlUZXN0RGVmaW5pdGlvbih0ZXN0aWQsIHRlc3RkZWYpIHtcbiAgICBsZXQgYm9keSA9IHtkZWZpbml0aW9uOiB0ZXN0ZGVmLCBvd25lcjogdGhpcy51c2VyaW5mby5pZCA/IHRoaXMudXNlcmluZm8uaWQgOiAnJ307XG4gICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7XG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdYLVJlcXVlc3RlZC1XaXRoJzogJ0ZldGNoJ1xuICAgICAgLy8nSWYtTWF0Y2gnOiB0aGlzLnRlc3RldGFnXG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ3NhdmluZyB0ZXN0JywgdGVzdGlkKTtcbiAgICByZXR1cm4gdGhpcy5odHRwY2xpZW50LmZldGNoKHRoaXMuYXBpdXJsICsgdGhpcy5wc3ljaG90ZXN0YXBpdXJsICsgJy8nICsgdGVzdGlkLCB7bWV0aG9kOiAnUEFUQ0gnLCBib2R5OiBqc29uKGJvZHkpLCBoZWFkZXJzOiBoZWFkZXJzfSlcbiAgICAgIC50aGVuKHJlc3BvbnNlPT4ge1xuICAgICAgICBsZXQgdGVzdGhlYWRlcnMgPSByZXNwb25zZS5oZWFkZXJzO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRhcGkgdGVzdCBoZWFkZXJzJyx0ZXN0aGVhZGVycy5nZXQpO1xuICAgICAgICB0aGlzLnRlc3RldGFnID0gdGVzdGhlYWRlcnMuZ2V0KCdFVGFnJyk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZGF0YT0+e1xuICAgICAgICAvLyAgICAgICAgY29uc29sZS5sb2coJ1BzeWNob2FwaS5nZXRzZWxlY3RlZHRlc3RkZWZpbml0aW9uOicsIGRhdGEpO1xuICAgICAgICByZXR1cm4gZGF0YS5kZWZpbml0aW9uO1xuICAgICAgfSk7XG4gIH1cbiAgcHV0QXBpVGVzdERlZmluaXRpb24odGVzdGlkLCB0ZXN0ZGVmKSB7XG4gICAgbGV0IGJvZHkgPSB7ZGVmaW5pdGlvbjogdGVzdGRlZiwgb3duZXI6IHRoaXMudXNlcmluZm8uaWQgPyB0aGlzLnVzZXJpbmZvLmlkIDogJyd9O1xuICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoe1xuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnWC1SZXF1ZXN0ZWQtV2l0aCc6ICdGZXRjaCcsXG4gICAgICAnSWYtTWF0Y2gnOiB0aGlzLnRlc3RldGFnXG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ3NhdmluZyB0ZXN0JywgdGVzdGlkKTtcbiAgICByZXR1cm4gdGhpcy5odHRwY2xpZW50LmZldGNoKHRoaXMuYXBpdXJsICsgdGhpcy5wc3ljaG90ZXN0YXBpdXJsICsgJy8nICsgdGVzdGlkLCB7bWV0aG9kOiAnUFVUJywgYm9keToganNvbihib2R5KSwgaGVhZGVyczogaGVhZGVyc30pXG4gICAgICAudGhlbihyZXNwb25zZT0+IHtcbiAgICAgICAgbGV0IHRlc3RoZWFkZXJzID0gcmVzcG9uc2UuaGVhZGVycztcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0YXBpIHRlc3QgaGVhZGVycycsdGVzdGhlYWRlcnMuZ2V0KTtcbiAgICAgICAgdGhpcy50ZXN0ZXRhZyA9IHRlc3RoZWFkZXJzLmdldCgnRVRhZycpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGRhdGE9PntcbiAgICAgICAgLy8gICAgICAgIGNvbnNvbGUubG9nKCdQc3ljaG9hcGkuZ2V0c2VsZWN0ZWR0ZXN0ZGVmaW5pdGlvbjonLCBkYXRhKTtcbiAgICAgICAgcmV0dXJuIGRhdGEuZGVmaW5pdGlvbjtcbiAgICAgIH0pO1xuICB9XG5cbiAgcG9zdEFwaVRlc3REZWZpbml0aW9uKHRlc3RkZWYsIG5hbWUpIHtcbiAgICAvL3B1dCBvd25lciBpbmZvcm1hdGlvbiwgaWYgbm8gb3duZXIgLVRPRE8gcmVqZWN0IHBvc3RpbmdcbiAgICBsZXQgYm9keSA9IHtkZWZpbml0aW9uOiB0ZXN0ZGVmLCBuYW1lOiBuYW1lLCBzbmlwcGV0OiB0ZXN0ZGVmLnNsaWNlKCAwLCA4MCksIG93bmVyOiB0aGlzLnVzZXJpbmZvLmlkID8gdGhpcy51c2VyaW5mby5pZCA6ICcnfTtcbiAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnRmV0Y2gnXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuaHR0cGNsaWVudC5mZXRjaCh0aGlzLmFwaXVybCArIHRoaXMucHN5Y2hvdGVzdGFwaXVybCwge21ldGhvZDogJ1BPU1QnLCBib2R5OiBqc29uKGJvZHkpLCBoZWFkZXJzOiBoZWFkZXJzfSlcbiAgICAgIC50aGVuKHJlc3BvbnNlPT4ge1xuICAgICAgICBsZXQgdGVzdGhlYWRlcnMgPSByZXNwb25zZS5oZWFkZXJzO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRhcGkgdGVzdCBoZWFkZXJzJyx0ZXN0aGVhZGVycy5nZXQpO1xuICAgICAgICB0aGlzLnRlc3RldGFnID0gdGVzdGhlYWRlcnMuZ2V0KCdFVGFnJyk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZSh0ZXN0aWQsIHRlc3Rzb3VyY2UpIHtcbiAgICBpZiAoIXRlc3Rzb3VyY2UpIHtcbiAgICAgIHJldHVybiB0aGlzLmh0dHBjbGllbnQuZmV0Y2godGhpcy5hcGl1cmwgKyB0aGlzLnBzeWNob3Rlc3RhcGl1cmwgKyAnLycgKyB0ZXN0aWQsIHttZXRob2Q6ICdERUxFVEUnfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHBlcmZvcm1zIEdFVCByZXF1ZXN0IHRvIFJFU1QgQVBJIHdpdGggcHJvamVjdGlvbiB0byBzbmlwcGV0LCBuYW1lLCBvd25lclxuICAgKiBAcmV0dXJucyB7IF9pdGVtcyByZXR1cm5lZCBpbiByZXNwb25zZSAtIGFycmF5IG9mIHRlc3RzIH1cbiAgICovXG4gIGdldEFwaVRlc3RzKCkge1xuICAgIHJldHVybiB0aGlzLmh0dHBjbGllbnQuZmV0Y2godGhpcy5hcGl1cmwgKyB0aGlzLnBzeWNob3Rlc3RhcGl1cmwgKyAnP3doZXJlPXtcIm93bmVyXCI6XCInICsgKHRoaXMudXNlcmluZm8uaWQgPyB0aGlzLnVzZXJpbmZvLmlkIDogJycpICsgJ1wifSZwcm9qZWN0aW9uPXtcInNuaXBwZXRcIjoxLFwibmFtZVwiOjEsXCJvd25lclwiOjEsXCJfdXBkYXRlZFwiOjEsXCJfY3JlYXRlZFwiOjF9JylcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdQc3N5Y2hvYXBpLmdldHRlc3RzOicsIGRhdGEpO1xuICAgICAgICByZXR1cm4gZGF0YS5faXRlbXM7XG4gICAgICB9KTtcbiAgfVxuXG5cbiAgcmV0cmlldmVQcm9qZWN0cygpIHtcbiAgICByZXR1cm4gdGhpcy5odHRwY2xpZW50LmZldGNoKHRoaXMuYXBpdXJsICsgdGhpcy5wcm9qZWN0YXBpdXJsKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgLnRoZW4oZGF0YSA9PiB7IGNvbnNvbGUubG9nKCdQc3ljaG9hcGkuZ2V0cHJvamVjdHM6JywgZGF0YSk7IHJldHVybiBkYXRhO30pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge2NvbnNvbGUubG9nKCdlcnJvciB3aGVuIG9idGFpbmluZyBwcm9qZWN0IGxpc3QnLCBlcnJvcik7fSk7XG4gIH1cblxuXG4gIGdldFJlbW90ZVRlc3REZWZpbml0aW9uKHNvdXJjZSwgdGVzdGlkKSB7XG4gICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7XG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnRmV0Y2gnXG4gICAgfSk7XG4gICAgaWYgKHRoaXMucmVtb3RlLmhhcyhzb3VyY2UpKSB7XG4gICAgICBoZWFkZXJzLmFwcGVuZCgnQXV0aG9yaXphdGlvbicsICdCYXNpYyAnICsgYnRvYSh0aGlzLnJlbW90ZS5nZXQoc291cmNlKS51c2VybmFtZSArICc6JyArIHRoaXMucmVtb3RlLmdldChzb3VyY2UpLnBhc3N3b3JkKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmh0dHBjbGllbnQuZmV0Y2goc291cmNlICsgdGVzdGlkLCB7aGVhZGVyczogaGVhZGVyc30pXG4gICAgICAudGhlbihyZXNwb25zZT0+IHJlc3BvbnNlLnRleHQoKSlcbiAgICAgIC50aGVuKGRhdGE9PnsgcmV0dXJuIGRhdGE7fSk7XG4gIH1cblxuICBwdXRSZW1vdGVUZXN0RGVmaW5pdGlvbihzb3VyY2UsIHRlc3RpZCwgdGVzdGRlZikge1xuICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoe1xuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdYLVJlcXVlc3RlZC1XaXRoJzogJ0ZldGNoJ1xuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCdzYXZpbmcgdGVzdCcsIHNvdXJjZSwgdGVzdGlkKTtcbiAgICBpZiAodGhpcy5yZW1vdGUuaGFzKHNvdXJjZSkpIHtcbiAgICAgIGhlYWRlcnMuYXBwZW5kKCdBdXRob3JpemF0aW9uJywgJ0Jhc2ljICcgKyBidG9hKHRoaXMucmVtb3RlLmdldChzb3VyY2UpLnVzZXJuYW1lICsgJzonICsgdGhpcy5yZW1vdGUuZ2V0KHNvdXJjZSkucGFzc3dvcmQpKTtcbiAgICB9XG4gICAgbGV0IGJvZHkgPSB0ZXN0ZGVmO1xuICAgIHJldHVybiB0aGlzLmh0dHBjbGllbnQuZmV0Y2goc291cmNlICsgdGVzdGlkLCB7bWV0aG9kOiAnUFVUJywgaGVhZGVyczogaGVhZGVycywgYm9keTogYm9keX0pXG4gICAgICAudGhlbihyZXNwb25zZT0+IHJlc3BvbnNlLnRleHQoKSlcbiAgICAgIC50aGVuKGRhdGE9PnsgcmV0dXJuIGRhdGE7fSk7XG4gIH1cblxuICBnZXRTdGF0aWNUZXN0cygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRSZW1vdGVUZXN0cyh0aGlzLnN0YXRpY3VybCk7XG4gIH1cblxuICBnZXRSZW1vdGVUZXN0cyhzb3VyY2UpIHtcbiAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnWC1SZXF1ZXN0ZWQtV2l0aCc6ICdGZXRjaCdcbiAgICB9KTtcbiAgICBpZiAodGhpcy5yZW1vdGUuaGFzKHNvdXJjZSkpIHtcbiAgICAgIGhlYWRlcnMuYXBwZW5kKCdBdXRob3JpemF0aW9uJywgJ0Jhc2ljICcgKyBidG9hKHRoaXMucmVtb3RlLmdldChzb3VyY2UpLnVzZXJuYW1lICsgJzonICsgdGhpcy5yZW1vdGUuZ2V0KHNvdXJjZSkucGFzc3dvcmQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaHR0cGNsaWVudC5mZXRjaChzb3VyY2UgKyAnaW5kZXguanNvbicsIHtoZWFkZXJzOiBoZWFkZXJzfSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgIC50aGVuKGRhdGEgPT4geyAgcmV0dXJuIGRhdGEubWFwKHg9Pnt4LnNvdXJjZSA9IHNvdXJjZTsgcmV0dXJuIHg7IH0pO30pOyAvL2FkZHMgc291cmNlIGl0ZW0gdG8gZXZlcnkgZWxlbWVudFxuICB9XG5cbiAgZ2V0VGVzdERlZmluaXRpb24oaWQsIHNvdXJjZSkge1xuICAgIHRoaXMudGVzdGlkID0gaWQ7XG4gICAgdGhpcy50ZXN0c291cmNlID0gc291cmNlO1xuICAgIGlmICh0aGlzLnRlc3Rzb3VyY2UpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFJlbW90ZVRlc3REZWZpbml0aW9uKHRoaXMudGVzdHNvdXJjZSwgdGhpcy50ZXN0aWQpXG4gICAgICAgIC50aGVuKGRhdGE9PntcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKCdkYXRhJyk7XG4gICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodGhpcy50ZXN0aWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldEFwaVRlc3REZWZpbml0aW9uKHRoaXMudGVzdGlkKVxuICAgICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKCdkYXRhJyk7XG4gICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgLy90aGlzLmVkaXRvci5zZXRWYWx1ZShkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfSByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7fSk7XG4gIH1cblxuXG4gIHNhdmVUZXN0KHRkLCBuYW1lKSB7XG4gICAgLy9jb25zb2xlLmxvZygnc2F2aW5nIHRlc3Q6JywgdGQpO1xuICAgIHRoaXMudGVzdGRlZmluaXRpb24gPSB0ZDtcbiAgICBpZiAodGhpcy50ZXN0c291cmNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5wdXRSZW1vdGVUZXN0RGVmaW5pdGlvbih0aGlzLnRlc3Rzb3VyY2UsIHRoaXMudGVzdGlkLCB0aGlzLnRlc3RkZWZpbml0aW9uKVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT57IGFsZXJ0KCdFcnJvciB3aGVuIHNhdmluZyB0aGUgdGVzdDonLCBlcnJvci5tZXNzYWdlKTt9KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudGVzdGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXRjaEFwaVRlc3REZWZpbml0aW9uKHRoaXMudGVzdGlkLCB0aGlzLnRlc3RkZWZpbml0aW9uKVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIGFsZXJ0KCdFcnJvciB3aGVuIHNhdmluZyB0aGUgdGVzdDonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vY3JlYXRlIG5ld1xuICAgIHJldHVybiB0aGlzLnBvc3RBcGlUZXN0RGVmaW5pdGlvbih0aGlzLnRlc3RkZWZpbml0aW9uLCBuYW1lKVxuICAgICAgLnRoZW4oeCA9PiB7XG4gICAgICAgIHRoaXMudGVzdGlkID0geC5faWQ7XG4gICAgICAgIHRoaXMudGVzdGV0YWcgPSB4Ll9ldGFnO1xuICAgICAgfSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICAvLyByZXR1cm5zIHVzZXJpbmZvIGRhdGFcbiAgICBpZiAodGhpcy51c2VyaW5mbykgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+e3Jlc29sdmUodGhpcy51c2VyaW5mbyk7fSk7XG5cbiAgICByZXR1cm4gdGhpcy5odHRwY2xpZW50LmZldGNoKHRoaXMuYXBpdXJsICsgdGhpcy51c2VyaW5mb2FwaXVybClcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgIC50aGVuKGRhdGEgPT4geyB0aGlzLnVzZXJpbmZvID0gZGF0YTsgcmV0dXJuIGRhdGE7fSk7XG4gIH1cblxuICBzYXZlKHN1cmwsIGF1cmwpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHN5Y2hvdGVzdC5hcGl1cmwnLCBhdXJsKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHN5Y2h0b2VzdC5zdGF0aWN1cmwnLCBzdXJsKTtcbiAgICB0aGlzLmFwaXVybCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwc3ljaG90ZXN0LmFwaXVybCcpO1xuICAgIHRoaXMuc3RhdGljdXJsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BzeWNob3Rlc3Quc3RhdGljdXJsJyk7XG4gIH1cbiAgbG9hZCgpIHtcbiAgICB0aGlzLmFwaXVybCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwc3ljaG90ZXN0LmFwaXVybCcpO1xuICAgIGlmICh0aGlzLmFwaXVybCA9PT0gbnVsbCkgdGhpcy5hcGl1cmwgPSAnL2FwaSc7XG4gICAgdGhpcy5zdGF0aWN1cmwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHN5Y2hvdGVzdC5zdGF0aWN1cmwnKTtcbiAgICBpZiAodGhpcy5zdGF0aWN1cmwgPT09IG51bGwpIHRoaXMuc3RhdGljdXJsID0gJ3Rlc3QvJztcbiAgICByZXR1cm4gW3RoaXMuc3RhdGljdXJsLCB0aGlzLmFwaXVybF07XG4gIH1cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5hcGl1cmwgPSAnL2FwaSc7IC8vY2FuIGJlIGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MCBvciBvdGhlclxuICAgIHRoaXMuc3RhdGljdXJsID0gJ3Rlc3QvJztcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICByZXR1cm4gW3RoaXMuc3RhdGljdXJsLCB0aGlzLmFwaXVybF07XG4gIH1cblxuICBwb3N0UmVzdWx0cyh0ZXN0UmVzdWx0KSB7XG4gICAgLy9sZXQgYm9keSA9IHtkZWZpbml0aW9uOiB0ZXN0ZGVmLCBuYW1lOiBuYW1lLCBzbmlwcGV0OiB0ZXN0ZGVmLnNsaWNlKCAwLCA4MCksIG93bmVyOiB0aGlzLnVzZXJpbmZvLmlkID8gdGhpcy51c2VyaW5mby5pZCA6ICcnfTtcbiAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnRmV0Y2gnXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuaHR0cGNsaWVudC5mZXRjaCh0aGlzLmFwaXVybCArIHRoaXMucmVzdWx0dXJsLCB7bWV0aG9kOiAnUE9TVCcsIGJvZHk6IGpzb24odGVzdFJlc3VsdCksIGhlYWRlcnM6IGhlYWRlcnN9KVxuICAgICAgLnRoZW4ocmVzcG9uc2U9PiB7XG4gICAgICAgIGxldCB0ZXN0aGVhZGVycyA9IHJlc3BvbnNlLmhlYWRlcnM7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2dldGFwaSB0ZXN0IGhlYWRlcnMnLHRlc3RoZWFkZXJzLmdldCk7XG4gICAgICAgIC8vdGhpcy50ZXN0ZXRhZyA9IHRlc3RoZWFkZXJzLmdldCgnRVRhZycpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgfSk7XG4gIH1cblxuICBkZWxldGVQYXVzZWRUZXN0KGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cGNsaWVudC5mZXRjaCh0aGlzLmFwaXVybCArIHRoaXMucGF1c2VkdGVzdHVybCArICcvJyArIGlkLCB7bWV0aG9kOiAnREVMRVRFJ30pO1xuICB9XG5cbiAgcmVsZWFzZVBhdXNlZFRlc3QoKSB7XG4gICAgaWYgKHRoaXMucmVzdW1laWQgJiYgdGhpcy5yZXN1bWVpZCA+IDApIHtcbiAgICAgIHRoaXMuZGVsZXRlUGF1c2VkVGVzdCh0aGlzLnJlc3VtZWlkKVxuICAgICAgICAudGhlbihkYXRhMiA9PiB7XG4gICAgICAgICAgaWYgKGRhdGEyLm9rKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VtZWlkID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHBvc3RQYXVzZWRUZXN0KHRlc3RyZXMpIHtcbiAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnRmV0Y2gnXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuaHR0cGNsaWVudC5mZXRjaCh0aGlzLmFwaXVybCArIHRoaXMucGF1c2VkdGVzdHVybCwge21ldGhvZDogJ1BPU1QnLCBib2R5OiBqc29uKHRlc3RyZXMpLCBoZWFkZXJzOiBoZWFkZXJzfSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgIC50aGVuKGRhdGEgPT4ge3JldHVybiBkYXRhO30pO1xuICB9XG5cbiAgcHV0UGF1c2VkVGVzdChyZXN1bWVpZCwgdGVzdHJlcykge1xuICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoe1xuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnWC1SZXF1ZXN0ZWQtV2l0aCc6ICdGZXRjaCdcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5odHRwY2xpZW50LmZldGNoKHRoaXMuYXBpdXJsICsgdGhpcy5wYXVzZWR0ZXN0dXJsICsgJy8nICsgcmVzdW1laWQsIHttZXRob2Q6ICdQVVQnLCBib2R5OiBqc29uKHRlc3RyZXMpLCBoZWFkZXJzOiBoZWFkZXJzfSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgIC50aGVuKGRhdGEgPT4ge3JldHVybiBkYXRhO30pO1xuICB9XG5cbiAgZ2V0UGF1c2VkVGVzdChyZXN1bWVpZCkge1xuICAgIHJldHVybiB0aGlzLmh0dHBjbGllbnQuZmV0Y2godGhpcy5hcGl1cmwgKyB0aGlzLnBhdXNlZHRlc3R1cmwgKyAnLycgKyByZXN1bWVpZClcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgIC50aGVuKGRhdGEgPT4ge3JldHVybiBkYXRhO30pO1xuICB9XG5cbiAgZ2V0QjJBY2Nlc3NFbmRwb2ludCgpIHtcbiAgICByZXR1cm4gdGhpcy5odHRwY2xpZW50LmZldGNoKHRoaXMuYXBpdXJsICsgdGhpcy5iMmFjY2Vzc2VuZHBvaW50KVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgLnRoZW4oZGF0YSA9PiB7cmV0dXJuIGRhdGE7fSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2Q0E7QUFDQTtBQURBO0FBeUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7Ozs7QUEvQ0E7QUFDQTtBQURBO0FBbURBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaEVBO0FBaUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdEZBO0FBc0ZBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM0dBO0FBNEdBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE1SEE7QUE4SEE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7Ozs7QUFuSUE7QUFDQTtBQURBO0FBd0lBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvSUE7QUFrSkE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUF2SkE7QUEwSkE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBcktBO0FBdUtBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBcExBO0FBc0xBO0FBQ0E7QUFDQTtBQXhMQTtBQTBMQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFyTUE7QUF1TUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBeE5BO0FBME5BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBN09BO0FBOE9BO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUF0UEE7QUF3UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBN1BBO0FBOFBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcFFBO0FBcVFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMVFBO0FBNFFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQTFSQTtBQTRSQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBOVJBO0FBK1JBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6U0E7QUEyU0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFwVEE7QUFzVEE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUEvVEE7QUFpVUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFyVUE7QUF1VUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUEzVUE7QUFBQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///OOUQ\n");

/***/ }),

/***/ "ROQc":
/*!************************************************!*\
  !*** ./src/components/ranking2dinterpreter.js ***!
  \************************************************/
/*! exports provided: Ranking2dinterpreter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Ranking2dinterpreter\", function() { return Ranking2dinterpreter; });\nvar Ranking2dinterpreter = /*#__PURE__*/function () {\n  function Ranking2dinterpreter(parent) {\n    this.defaultSVG1 = \"<div id=\\\"rankingmodal\\\" class=\\\"w3-modal w3-small\\\" oncontextmenu=\\\"return false;\\\">\\n  <div class=\\\"w3-modal-content w3-small\\\">\\n   <header class=\\\"w3-container w3-teal\\\">\\n      <span onclick=\\\"document.getElementById('rankingmodal').style.display='none'\\\"\\n      class=\\\"w3-display-topright w3-btn w3-padding-4\\\">&times;</span>\\n      <span onclick=\\\"that.submitAnnotation(); document.getElementById('rankingmodal').style.display='none'\\\"\\n      class=\\\"w3-display-bottomright w3-btn w3-padding-4\\\">submit</span>\\n      <b>anotace stimulu <span id=\\\"annotationtitle\\\">...</span></b>\\n    </header>\\n    <div class=\\\"w3-container\\\">\\n      <textarea class=\\\"w3-input w3-border\\\" id=\\\"annotationcontent\\\"></textarea>\\n    </div>\\n  </div>\\n</div><div oncontextmenu=\\\"return false;\\\"><svg width=\\\"100%\\\" height=\\\"100%\\\" version=\\\"1.1\\\" viewBox=\\\"-10 0 800 200\\\" style=\\\"border-style:solid;border-width:1px;\\\"\\nxmlns=\\\"http://www.w3.org/2000/svg\\\" \\nxmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\nonload=\\\"that.init('ball',1)\\\"\";\n    this.defaultSVG11 = \"\\nonmouseup=\\\"that.mouseUp(evt,1,1)\\\"\\nonmousemove=\\\"that.mouseMove(evt)\\\" >\\n\";\n    this.defaultSVGball1 = \"\\n<g id=\\\"ball0\\\" dragy=\\\"0\\\"\\ndragx=\\\"0\\\" onmouseUp=\\\"that.contextMenu(evt);return false;\\\"\";\n    this.defaultSVGball11 = \"\\ntransform=\\\"translate(0,0)\\\">\\n<rect style=\\\"opacity:0.50000000000000000;fill:#acd8e6;stroke:#000000;stroke-width:2;fill-opacity:1;stroke-opacity:1\\\"\\nheight=\\\"18\\\"\\nwidth=\\\"40\\\"\\nry=\\\"9\\\"\\nrx=\\\"9\\\"\\nid=\\\"ball\\\"\\nx=\\\"0\\\"\\ny=\\\"0\\\" \\n/>\";\n    this.defaultSVGball2 = \"\\n<path style=\\\"fill:#c0c0c0;fill-opacity:1;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\\\" d=\\\"m 21,3 l 15,5 -15,5 0,-10 z\\\" id=\\\"path3792\\\" onclick=\\\"document.getElementById('audio0').play();\\\" />\\n<title>audio0</title>\\n</g>  \";\n    this.defaultSVG2 = \"\\n<text id=\\\"descx\\\" x=\\\"0\\\" y=\\\"149\\\" font-size=\\\"8\\\" fill=\\\"black\\\">descX &#8594;</text>\\n<text id=\\\"descy\\\" x=\\\"-4\\\" y=\\\"141\\\" font-size=\\\"8\\\" fill=\\\"black\\\" transform=\\\"rotate(270,-4,141)\\\">descY &#8594;</text>\\n</svg></div>\";\n    this.draggingElement = null;\n    this.nMouseOffsetX = 0;\n    this.nMouseOffsetY = 0;\n    this.parent = parent;\n    this.ymax = 400; //max of y in \"serad\" svg graph\n\n    window.that = this;\n  } //create inner SVG element, where each sound is presented as a draggable icon, recounts size in contrast to default svg\n\n\n  var _proto = Ranking2dinterpreter.prototype;\n\n  _proto.translateSerad2d = function translateSerad2d(row, maxaudioid, pagenum, questionnum) {\n    var rowsplitted = row.split(/[;]+/);\n    this.ymax = maxaudioid * 50 + 50;\n    this.parent.result.setDefaultAnswer(pagenum, questionnum); //fix bug 198\n\n    var svgsuffix = rowsplitted.length > 1 ? this.defaultSVG2.replace('descX', rowsplitted[0]).replace('descY', rowsplitted[1]) : this.defaultSVG2;\n    var svgsuffix2 = svgsuffix.replace('y=\"149\"', 'y=\"' + (this.ymax - 2) + '\"').replace(/141/g, this.ymax - 9);\n    return this.defaultSVG1.replace('that.init(\\'ball\\',1)', 'that.init(\\'ball\\',' + maxaudioid + ')').replace('viewBox=\"-10 0 800 200\"', 'viewBox=\"-10 0 800 ' + this.ymax + '\"') + this.defaultSVG11.replace('that.mouseUp(evt,1,1)', 'that.mouseUp(evt,' + pagenum + ',' + questionnum + ')') + this.generateSoundBall(maxaudioid) + svgsuffix2; //rowsplitted.length>1 ? this.defaultSVG2.replace(\"descX\",rowsplitted[1]).replace(\"descY\",rowsplitted[2]) : this.defaultSVG2;\n  };\n\n  _proto.generateNonRandomArray = function generateNonRandomArray(n) {\n    var a = [];\n\n    for (var i = 0; i < n; i++) {\n      a[i] = i;\n    }\n\n    return a;\n  };\n\n  _proto.generateRandomArray = function generateRandomArray(n) {\n    var a = this.generateNonRandomArray(n);\n    var b = [];\n\n    for (var j = 0; j < n; j++) {\n      var k = Math.floor(Math.random() * (n - j));\n      b[j] = a[k];\n      a.splice(k, 1);\n    }\n\n    return b;\n  } //returns a[0] ..a[1-n] = k where k from 0 to 1-n\n  //for each sound generates an interactive SVG element\n  ;\n\n  _proto.generateSoundBall = function generateSoundBall(maxaudioid) {\n    console.log('maxaudioid:' + maxaudioid);\n    var soundBall = '';\n    var mapaudio = [];\n    if (this.parent.tstate.poradivnticinahodne) mapaudio = this.generateRandomArray(maxaudioid);else mapaudio = this.generateNonRandomArray(maxaudioid);\n\n    for (var i = 0; i < maxaudioid; i++) {\n      soundBall += this.defaultSVGball1.replace('id=\"ball0\" dragy=\"0\"', 'id=\"ball' + i + '\" dragy=\"' + i * 50 + '\"');\n      soundBall += this.defaultSVGball11.replace('translate(0,0)', 'translate(0,' + i * 50 + ')');\n      soundBall += this.defaultSVGball2.replace(/audio0/g, 'audio' + mapaudio[i]);\n    }\n\n    return soundBall;\n  } //draggable part inspired by http://www.codedread.com/dragtest2.svg\n  ;\n\n  _proto.inspect = function inspect(obj) {\n    var str = new Array();\n    var element = null;\n\n    for (element in obj) {\n      str[str.length] = element;\n    }\n\n    str.sort();\n    alert(obj + ':' + str.join(' '));\n  };\n\n  _proto.mouseDown = function mouseDown(evt) {\n    var target = evt.currentTarget;\n    that.draggingElement = target; //console.log('ranking2d mousedown',target)\n\n    if (target) {\n      var p = document.getElementsByTagName('svg')[0].createSVGPoint();\n      p.x = evt.clientX;\n      p.y = evt.clientY;\n      var m = that.getScreenCTM(document.getElementsByTagName('svg')[0]);\n      p = p.matrixTransform(m.inverse());\n      that.nMouseOffsetX = p.x - parseInt(target.getAttribute('dragx'), 10);\n      that.nMouseOffsetY = p.y - parseInt(target.getAttribute('dragy'), 10);\n      if (that.nMouseOffsetX > 61 && that.nMouseOffsetX < 91) play();\n    }\n  };\n\n  _proto.getDraggablePositions = function getDraggablePositions() {\n    var positions = '';\n    var draggable = document.getElementsByTagName('g');\n\n    for (var i = 0; i < draggable.length; i++) {\n      positions += Math.round(parseFloat(draggable[i].getAttribute('dragx'))) + ',' + Math.round(parseFloat(draggable[i].getAttribute('dragy'))) + ' ';\n    }\n\n    return positions;\n  };\n\n  _proto.mouseUp = function mouseUp(evt, pageNum, questionNum) {\n    //console.log('ranking2d mouseup')\n    that.draggingElement = null;\n    var value = that.getDraggablePositions();\n    window.ri.setAnswer(pageNum, questionNum, value);\n    that.nMouseOffsetX = 0;\n    that.nMouseOffsetY = 0;\n  };\n\n  _proto.mouseMove = function mouseMove(evt) {\n    var p = document.getElementsByTagName('svg')[0].createSVGPoint();\n    p.x = evt.clientX;\n    p.y = evt.clientY;\n    var m = that.getScreenCTM(document.getElementsByTagName('svg')[0]);\n    p = p.matrixTransform(m.inverse());\n    p.x -= that.nMouseOffsetX;\n    p.y -= that.nMouseOffsetY; //console.log('ranking2d mousemove dragging:', that.draggingElement)\n\n    if (that.draggingElement) {\n      //console.log('ranking2d mousemove position:', p.x, p.y)\n      if (p.x < 0) p.x = 0;else if (p.x > 800) p.x = 800 - 50; //on borders keep 0\n\n      if (p.y < 0) p.y = 0;else if (p.y > that.ymax - 50) p.y = that.ymax - 50;\n      that.draggingElement.setAttribute('dragx', p.x);\n      that.draggingElement.setAttribute('dragy', p.y);\n      that.draggingElement.setAttribute('transform', 'translate(' + p.x + ',' + p.y + ')');\n    }\n  };\n\n  _proto.displayCoords = function displayCoords(x, y, extra) {\n    var xNode = document.getElementById('xpos');\n    var yNode = document.getElementById('ypos');\n\n    if (xNode && yNode) {\n      xNode.firstChild.nodeValue = parseInt(x, 10) + extra;\n      yNode.firstChild.nodeValue = parseInt(y, 10) + extra;\n    }\n  };\n\n  _proto.displayRawText = function displayRawText(text) {\n    var textNode = document.getElementById('raw');\n\n    if (textNode) {\n      textNode.firstChild.nodeValue = text;\n    }\n  };\n\n  _proto.init = function init(prefix, count) {\n    console.log('ranking2d init');\n\n    for (var i = 0; i < count; i++) {\n      var ball = document.getElementById(prefix + i);\n      if (ball) ball.addEventListener('mousedown', that.mouseDown, false);\n    } //hide nav class with sounds bug #9\n\n\n    var soundsnav = document.querySelector('.sounds');\n    soundsnav.style.display = 'none';\n    /*var ball = document.getElementById(\"ball\");\n    var square = document.getElementById(\"square\");\n    var logo = document.getElementById(\"cd_logo\");\n    //var feed = document.getElementById(\"feed_icon\");\n    if(ball && square && logo) {\n        ball.addEventListener(\"mousedown\", mouseDown, false);\n        square.addEventListener(\"mousedown\", mouseDown, false);\n        logo.addEventListener(\"mousedown\", mouseDown, false);\n        //feed.addEventListener(\"mousedown\", mouseDown, false);\n    }\n    //displayRawText(\"Drag stuff around\");\n    */\n  };\n\n  _proto.displayMatrix = function displayMatrix(matrix) {\n    this.displayRawText(matrix.a + ', ' + matrix.b + ', ' + matrix.c + ', ' + matrix.d + ', ' + matrix.e + ', ' + matrix.f);\n  } // Following is from Holger Will since ASV3 and O9 do not support getScreenTCM()\n  // See http://groups.yahoo.com/group/svg-developers/message/50789\n\n  /*  parX;\n  parY;\n  ma;\n  mos;\n  w;\n  h;\n  sx;\n  sy;\n  s;*/\n  ;\n\n  _proto.getScreenCTM = function getScreenCTM(doc) {\n    if (doc.getScreenCTM) {\n      return doc.getScreenCTM();\n    }\n\n    var root = document.getElementsByTagName('svg')[0]; //doc\n\n    var sCTM = root.createSVGMatrix();\n    var tr = root.createSVGMatrix();\n    var par = root.getAttribute('preserveAspectRatio');\n    if (par === null || par === '') par = 'xMidYMid meet'; //setting to default value\n\n    var parX = par.substring(0, 4); //xMin;xMid;xMax\n\n    var parY = par.substring(4, 8); //YMin;YMid;YMax;\n\n    var ma = par.split(' ');\n    var mos = ma[1]; //meet;slice\n    //get dimensions of the viewport\n\n    sCTM.a = 1;\n    sCTM.d = 1;\n    sCTM.e = 0;\n    sCTM.f = 0;\n    var w = root.getAttribute('width');\n    if (w === null || w === '') w = innerWidth;\n    var h = root.getAttribute('height');\n    if (h === null || h === '') h = innerHeight; // Jeff Schiller:  Modified to account for percentages - I'm not\n    // absolutely certain this is correct but it works for 100%/100%\n\n    if (w.substr(w.length - 1, 1) === '%') {\n      w = parseFloat(w.substr(0, w.length - 1)) / 100.0 * innerWidth;\n    }\n\n    if (h.substr(h.length - 1, 1) === '%') {\n      h = parseFloat(h.substr(0, h.length - 1)) / 100.0 * innerHeight;\n    } // get the ViewBox\n\n\n    var vba = root.getAttribute('viewBox');\n    if (vba === null) vba = '0 0 ' + w + ' ' + h;\n    var vb = vba.split(' '); //get the viewBox into an array\n    //--------------------------------------------------------------------------\n    //create a matrix with current user transformation\n\n    tr.a = root.currentScale;\n    tr.d = root.currentScale;\n    tr.e = root.currentTranslate.x;\n    tr.f = root.currentTranslate.y; //scale factors\n\n    var sx = w / vb[2];\n    var sy = h / vb[3];\n    var s; //meetOrSlice\n\n    if (mos === 'slice') {\n      s = sx > sy ? sx : sy;\n    } else {\n      s = sx < sy ? sx : sy;\n    } //preserveAspectRatio=\"none\"\n\n\n    if (par === 'none') {\n      sCTM.a = sx; //scaleX\n\n      sCTM.d = sy; //scaleY\n\n      sCTM.e = -vb[0] * sx; //translateX\n\n      sCTM.f = -vb[0] * sy; //translateY\n\n      sCTM = tr.multiply(sCTM); //taking user transformations into acount\n\n      return sCTM;\n    }\n\n    sCTM.a = s; //scaleX\n\n    sCTM.d = s; //scaleY\n    //-------------------------------------------------------\n\n    switch (parX) {\n      case 'xMid':\n        sCTM.e = (w - vb[2] * s) / 2 - vb[0] * s; //translateX\n\n        break;\n\n      case 'xMin':\n        sCTM.e = -vb[0] * s; //translateX\n\n        break;\n\n      case 'xMax':\n        sCTM.e = w - vb[2] * s - vb[0] * s; //translateX\n\n        break;\n    } //------------------------------------------------------------\n\n\n    switch (parY) {\n      case 'YMid':\n        sCTM.f = (h - vb[3] * s) / 2 - vb[1] * s; //translateY\n\n        break;\n\n      case 'YMin':\n        sCTM.f = -vb[1] * s; //translateY\n\n        break;\n\n      case 'YMax':\n        sCTM.f = h - vb[3] * s - vb[1] * s; //translateY\n\n        break;\n    }\n\n    sCTM = tr.multiply(sCTM); //taking user transformations into acount\n\n    return sCTM;\n  };\n\n  _proto.contextMenu = function contextMenu(evt) {\n    //let evt= window.event;\n    if (evt.which === 3) {\n      console.log('context menu triggered', evt);\n      that.showcontextmenu = true;\n      var target = evt.currentTarget;\n      console.log('context menu current target', target);\n      document.getElementById('rankingmodal').style.display = 'block'; //get id of audio being tagged\n\n      var id = target.getElementsByTagName('title')[0].innerHTML;\n      document.getElementById('annotationtitle').innerHTML = id; //get content already stored for audio\n\n      var audiosrc = document.getElementById(id).getElementsByTagName('source')[0].getAttribute('src');\n      var content = window.ri.getAnnotation(audiosrc);\n      document.getElementById('annotationcontent').value = content ? content : \"\";\n      document.getElementById('annotationcontent').focus(); //get stored annotation info\n\n      return false;\n    }\n  };\n\n  _proto.submitAnnotation = function submitAnnotation() {\n    var content = document.getElementById('annotationcontent').value; //get audiosrc\n\n    var id = document.getElementById('annotationtitle').innerHTML;\n    var audiosrc = document.getElementById(id).getElementsByTagName('source')[0].getAttribute('src');\n    window.ri.setAnnotation(audiosrc, content);\n  };\n\n  return Ranking2dinterpreter;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUk9RYy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3JhbmtpbmcyZGludGVycHJldGVyLmpzPzQ0ZTQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFJhbmtpbmcyZGludGVycHJldGVyIHtcbiAgZGVmYXVsdFNWRzEgPSBgPGRpdiBpZD1cInJhbmtpbmdtb2RhbFwiIGNsYXNzPVwidzMtbW9kYWwgdzMtc21hbGxcIiBvbmNvbnRleHRtZW51PVwicmV0dXJuIGZhbHNlO1wiPlxuICA8ZGl2IGNsYXNzPVwidzMtbW9kYWwtY29udGVudCB3My1zbWFsbFwiPlxuICAgPGhlYWRlciBjbGFzcz1cInczLWNvbnRhaW5lciB3My10ZWFsXCI+XG4gICAgICA8c3BhbiBvbmNsaWNrPVwiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jhbmtpbmdtb2RhbCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnXCJcbiAgICAgIGNsYXNzPVwidzMtZGlzcGxheS10b3ByaWdodCB3My1idG4gdzMtcGFkZGluZy00XCI+JnRpbWVzOzwvc3Bhbj5cbiAgICAgIDxzcGFuIG9uY2xpY2s9XCJ0aGF0LnN1Ym1pdEFubm90YXRpb24oKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jhbmtpbmdtb2RhbCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnXCJcbiAgICAgIGNsYXNzPVwidzMtZGlzcGxheS1ib3R0b21yaWdodCB3My1idG4gdzMtcGFkZGluZy00XCI+c3VibWl0PC9zcGFuPlxuICAgICAgPGI+YW5vdGFjZSBzdGltdWx1IDxzcGFuIGlkPVwiYW5ub3RhdGlvbnRpdGxlXCI+Li4uPC9zcGFuPjwvYj5cbiAgICA8L2hlYWRlcj5cbiAgICA8ZGl2IGNsYXNzPVwidzMtY29udGFpbmVyXCI+XG4gICAgICA8dGV4dGFyZWEgY2xhc3M9XCJ3My1pbnB1dCB3My1ib3JkZXJcIiBpZD1cImFubm90YXRpb25jb250ZW50XCI+PC90ZXh0YXJlYT5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj48ZGl2IG9uY29udGV4dG1lbnU9XCJyZXR1cm4gZmFsc2U7XCI+PHN2ZyB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgdmVyc2lvbj1cIjEuMVwiIHZpZXdCb3g9XCItMTAgMCA4MDAgMjAwXCIgc3R5bGU9XCJib3JkZXItc3R5bGU6c29saWQ7Ym9yZGVyLXdpZHRoOjFweDtcIlxueG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIFxueG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcbm9ubG9hZD1cInRoYXQuaW5pdChcXCdiYWxsXFwnLDEpXCJgO1xuICBkZWZhdWx0U1ZHMTEgPSBgXG5vbm1vdXNldXA9XCJ0aGF0Lm1vdXNlVXAoZXZ0LDEsMSlcIlxub25tb3VzZW1vdmU9XCJ0aGF0Lm1vdXNlTW92ZShldnQpXCIgPlxuYDtcbiAgZGVmYXVsdFNWR2JhbGwxID0gYFxuPGcgaWQ9XCJiYWxsMFwiIGRyYWd5PVwiMFwiXG5kcmFneD1cIjBcIiBvbm1vdXNlVXA9XCJ0aGF0LmNvbnRleHRNZW51KGV2dCk7cmV0dXJuIGZhbHNlO1wiYFxuICBkZWZhdWx0U1ZHYmFsbDExID0gYFxudHJhbnNmb3JtPVwidHJhbnNsYXRlKDAsMClcIj5cbjxyZWN0IHN0eWxlPVwib3BhY2l0eTowLjUwMDAwMDAwMDAwMDAwMDAwO2ZpbGw6I2FjZDhlNjtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utb3BhY2l0eToxXCJcbmhlaWdodD1cIjE4XCJcbndpZHRoPVwiNDBcIlxucnk9XCI5XCJcbnJ4PVwiOVwiXG5pZD1cImJhbGxcIlxueD1cIjBcIlxueT1cIjBcIiBcbi8+YDtcbiAgZGVmYXVsdFNWR2JhbGwyPSBgXG48cGF0aCBzdHlsZT1cImZpbGw6I2MwYzBjMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MXB4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjFcIiBkPVwibSAyMSwzIGwgMTUsNSAtMTUsNSAwLC0xMCB6XCIgaWQ9XCJwYXRoMzc5MlwiIG9uY2xpY2s9XCJkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcXCdhdWRpbzBcXCcpLnBsYXkoKTtcIiAvPlxuPHRpdGxlPmF1ZGlvMDwvdGl0bGU+XG48L2c+ICBgO1xuICBkZWZhdWx0U1ZHMiA9IGBcbjx0ZXh0IGlkPVwiZGVzY3hcIiB4PVwiMFwiIHk9XCIxNDlcIiBmb250LXNpemU9XCI4XCIgZmlsbD1cImJsYWNrXCI+ZGVzY1ggJiM4NTk0OzwvdGV4dD5cbjx0ZXh0IGlkPVwiZGVzY3lcIiB4PVwiLTRcIiB5PVwiMTQxXCIgZm9udC1zaXplPVwiOFwiIGZpbGw9XCJibGFja1wiIHRyYW5zZm9ybT1cInJvdGF0ZSgyNzAsLTQsMTQxKVwiPmRlc2NZICYjODU5NDs8L3RleHQ+XG48L3N2Zz48L2Rpdj5gXG5cblxuICBjb25zdHJ1Y3RvcihwYXJlbnQpIHtcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICB0aGlzLnltYXggPSA0MDA7IC8vbWF4IG9mIHkgaW4gXCJzZXJhZFwiIHN2ZyBncmFwaFxuICAgIHdpbmRvdy50aGF0ID0gdGhpcztcbiAgfVxuICAvL2NyZWF0ZSBpbm5lciBTVkcgZWxlbWVudCwgd2hlcmUgZWFjaCBzb3VuZCBpcyBwcmVzZW50ZWQgYXMgYSBkcmFnZ2FibGUgaWNvbiwgcmVjb3VudHMgc2l6ZSBpbiBjb250cmFzdCB0byBkZWZhdWx0IHN2Z1xuICB0cmFuc2xhdGVTZXJhZDJkKHJvdywgbWF4YXVkaW9pZCwgcGFnZW51bSwgcXVlc3Rpb25udW0pIHtcbiAgICBsZXQgcm93c3BsaXR0ZWQgPSByb3cuc3BsaXQoL1s7XSsvKTtcbiAgICB0aGlzLnltYXggPSBtYXhhdWRpb2lkICogNTAgKyA1MDtcbiAgICB0aGlzLnBhcmVudC5yZXN1bHQuc2V0RGVmYXVsdEFuc3dlcihwYWdlbnVtLCBxdWVzdGlvbm51bSk7IC8vZml4IGJ1ZyAxOThcbiAgICBsZXQgc3Znc3VmZml4ID0gcm93c3BsaXR0ZWQubGVuZ3RoID4gMSA/IHRoaXMuZGVmYXVsdFNWRzIucmVwbGFjZSgnZGVzY1gnLCByb3dzcGxpdHRlZFswXSkucmVwbGFjZSgnZGVzY1knLCByb3dzcGxpdHRlZFsxXSkgOiB0aGlzLmRlZmF1bHRTVkcyO1xuICAgIGxldCBzdmdzdWZmaXgyID0gc3Znc3VmZml4LnJlcGxhY2UoJ3k9XCIxNDlcIicsICd5PVwiJyArICh0aGlzLnltYXggLSAyKSArICdcIicpLnJlcGxhY2UoLzE0MS9nLCAodGhpcy55bWF4IC0gOSkpO1xuICAgIHJldHVybiB0aGlzLmRlZmF1bHRTVkcxLnJlcGxhY2UoJ3RoYXQuaW5pdChcXCdiYWxsXFwnLDEpJywgJ3RoYXQuaW5pdChcXCdiYWxsXFwnLCcgKyBtYXhhdWRpb2lkICsgJyknKS5yZXBsYWNlKCd2aWV3Qm94PVwiLTEwIDAgODAwIDIwMFwiJywgJ3ZpZXdCb3g9XCItMTAgMCA4MDAgJyArICh0aGlzLnltYXgpICsgJ1wiJylcbiAgICAgICsgdGhpcy5kZWZhdWx0U1ZHMTEucmVwbGFjZSgndGhhdC5tb3VzZVVwKGV2dCwxLDEpJywgJ3RoYXQubW91c2VVcChldnQsJyArIHBhZ2VudW0gKyAnLCcgKyBxdWVzdGlvbm51bSArICcpJylcbiAgICAgICsgdGhpcy5nZW5lcmF0ZVNvdW5kQmFsbChtYXhhdWRpb2lkKVxuICAgICAgKyBzdmdzdWZmaXgyOy8vcm93c3BsaXR0ZWQubGVuZ3RoPjEgPyB0aGlzLmRlZmF1bHRTVkcyLnJlcGxhY2UoXCJkZXNjWFwiLHJvd3NwbGl0dGVkWzFdKS5yZXBsYWNlKFwiZGVzY1lcIixyb3dzcGxpdHRlZFsyXSkgOiB0aGlzLmRlZmF1bHRTVkcyO1xuICB9XG5cbiAgZ2VuZXJhdGVOb25SYW5kb21BcnJheShuKSB7XG4gICAgbGV0IGEgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgYVtpXSA9IGk7XG4gICAgfVxuICAgIHJldHVybiBhO1xuICB9XG5cbiAgZ2VuZXJhdGVSYW5kb21BcnJheShuKSB7XG4gICAgbGV0IGEgPSB0aGlzLmdlbmVyYXRlTm9uUmFuZG9tQXJyYXkobik7XG4gICAgbGV0IGIgPSBbXTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IG47IGorKykge1xuICAgICAgbGV0IGsgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobiAtIGopKTtcbiAgICAgIGJbal0gPSBhW2tdO1xuICAgICAgYS5zcGxpY2UoaywgMSk7XG4gICAgfVxuICAgIHJldHVybiBiO1xuICB9Ly9yZXR1cm5zIGFbMF0gLi5hWzEtbl0gPSBrIHdoZXJlIGsgZnJvbSAwIHRvIDEtblxuXG4gIC8vZm9yIGVhY2ggc291bmQgZ2VuZXJhdGVzIGFuIGludGVyYWN0aXZlIFNWRyBlbGVtZW50XG4gIGdlbmVyYXRlU291bmRCYWxsKG1heGF1ZGlvaWQpIHtcbiAgICBjb25zb2xlLmxvZygnbWF4YXVkaW9pZDonICsgbWF4YXVkaW9pZCk7XG4gICAgbGV0IHNvdW5kQmFsbCA9ICcnO1xuICAgIGxldCBtYXBhdWRpbyA9IFtdO1xuICAgIGlmICh0aGlzLnBhcmVudC50c3RhdGUucG9yYWRpdm50aWNpbmFob2RuZSkgbWFwYXVkaW8gPSB0aGlzLmdlbmVyYXRlUmFuZG9tQXJyYXkobWF4YXVkaW9pZCk7XG4gICAgZWxzZSBtYXBhdWRpbyA9IHRoaXMuZ2VuZXJhdGVOb25SYW5kb21BcnJheShtYXhhdWRpb2lkKTtcblxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhhdWRpb2lkOyBpKyspIHtcbiAgICAgIHNvdW5kQmFsbCArPSB0aGlzLmRlZmF1bHRTVkdiYWxsMS5yZXBsYWNlKCdpZD1cImJhbGwwXCIgZHJhZ3k9XCIwXCInLCAnaWQ9XCJiYWxsJyArIGkgKyAnXCIgZHJhZ3k9XCInICsgaSAqIDUwICsgJ1wiJyk7XG4gICAgICBzb3VuZEJhbGwgKz0gdGhpcy5kZWZhdWx0U1ZHYmFsbDExLnJlcGxhY2UoJ3RyYW5zbGF0ZSgwLDApJywgJ3RyYW5zbGF0ZSgwLCcgKyBpICogNTAgKyAnKScpO1xuICAgICAgc291bmRCYWxsICs9IHRoaXMuZGVmYXVsdFNWR2JhbGwyLnJlcGxhY2UoL2F1ZGlvMC9nLCAnYXVkaW8nICsgbWFwYXVkaW9baV0pO1xuICAgIH1cbiAgICByZXR1cm4gc291bmRCYWxsO1xuICB9XG5cbiAgLy9kcmFnZ2FibGUgcGFydCBpbnNwaXJlZCBieSBodHRwOi8vd3d3LmNvZGVkcmVhZC5jb20vZHJhZ3Rlc3QyLnN2Z1xuICBpbnNwZWN0KG9iaikge1xuICAgIGxldCBzdHIgPSBuZXcgQXJyYXkoKTtcbiAgICBsZXQgZWxlbWVudCA9IG51bGw7XG4gICAgZm9yIChlbGVtZW50IGluIG9iaikgeyBzdHJbc3RyLmxlbmd0aF0gPSBlbGVtZW50OyB9XG4gICAgc3RyLnNvcnQoKTtcbiAgICBhbGVydChvYmogKyAnOicgKyBzdHIuam9pbignICcpKTtcbiAgfVxuXG4gIGRyYWdnaW5nRWxlbWVudCA9IG51bGw7XG4gIG5Nb3VzZU9mZnNldFggPSAwO1xuICBuTW91c2VPZmZzZXRZID0gMDtcblxuICBtb3VzZURvd24oZXZ0KSB7XG4gICAgbGV0IHRhcmdldCA9IGV2dC5jdXJyZW50VGFyZ2V0O1xuICAgIHRoYXQuZHJhZ2dpbmdFbGVtZW50ID0gdGFyZ2V0O1xuICAgIC8vY29uc29sZS5sb2coJ3JhbmtpbmcyZCBtb3VzZWRvd24nLHRhcmdldClcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICBsZXQgcCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzdmcnKVswXS5jcmVhdGVTVkdQb2ludCgpO1xuICAgICAgcC54ID0gZXZ0LmNsaWVudFg7XG4gICAgICBwLnkgPSBldnQuY2xpZW50WTtcblxuICAgICAgbGV0IG0gPSB0aGF0LmdldFNjcmVlbkNUTShkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3ZnJylbMF0pO1xuXG4gICAgICBwID0gcC5tYXRyaXhUcmFuc2Zvcm0obS5pbnZlcnNlKCkpO1xuICAgICAgdGhhdC5uTW91c2VPZmZzZXRYID0gcC54IC0gcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZHJhZ3gnKSwgMTApO1xuICAgICAgdGhhdC5uTW91c2VPZmZzZXRZID0gcC55IC0gcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZHJhZ3knKSwgMTApO1xuICAgICAgaWYgKHRoYXQubk1vdXNlT2Zmc2V0WCA+IDYxICYmIHRoYXQubk1vdXNlT2Zmc2V0WCA8IDkxKSBwbGF5KCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0RHJhZ2dhYmxlUG9zaXRpb25zKCkge1xuICAgIGxldCBwb3NpdGlvbnMgPSAnJztcbiAgICBsZXQgZHJhZ2dhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2cnKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRyYWdnYWJsZS5sZW5ndGg7IGkrKykge1xuICAgICAgcG9zaXRpb25zICs9IE1hdGgucm91bmQocGFyc2VGbG9hdChkcmFnZ2FibGVbaV0uZ2V0QXR0cmlidXRlKCdkcmFneCcpKSkgKyAnLCcgKyBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoZHJhZ2dhYmxlW2ldLmdldEF0dHJpYnV0ZSgnZHJhZ3knKSkpICsgJyAnO1xuICAgIH1cbiAgICByZXR1cm4gcG9zaXRpb25zO1xuICB9XG5cbiAgbW91c2VVcChldnQsIHBhZ2VOdW0sIHF1ZXN0aW9uTnVtKSB7XG4gICAgLy9jb25zb2xlLmxvZygncmFua2luZzJkIG1vdXNldXAnKVxuICAgIHRoYXQuZHJhZ2dpbmdFbGVtZW50ID0gbnVsbDtcbiAgICBsZXQgdmFsdWUgPSB0aGF0LmdldERyYWdnYWJsZVBvc2l0aW9ucygpO1xuICAgIHdpbmRvdy5yaS5zZXRBbnN3ZXIocGFnZU51bSwgcXVlc3Rpb25OdW0sIHZhbHVlKTtcbiAgICB0aGF0Lm5Nb3VzZU9mZnNldFggPSAwO1xuICAgIHRoYXQubk1vdXNlT2Zmc2V0WSA9IDA7XG4gIH1cblxuICBtb3VzZU1vdmUoZXZ0KSB7XG4gICAgbGV0IHAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3ZnJylbMF0uY3JlYXRlU1ZHUG9pbnQoKTtcbiAgICBwLnggPSBldnQuY2xpZW50WDtcbiAgICBwLnkgPSBldnQuY2xpZW50WTtcblxuICAgIGxldCBtID0gdGhhdC5nZXRTY3JlZW5DVE0oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3N2ZycpWzBdKTtcblxuICAgIHAgPSBwLm1hdHJpeFRyYW5zZm9ybShtLmludmVyc2UoKSk7XG4gICAgcC54IC09IHRoYXQubk1vdXNlT2Zmc2V0WDtcbiAgICBwLnkgLT0gdGhhdC5uTW91c2VPZmZzZXRZO1xuICAgIC8vY29uc29sZS5sb2coJ3JhbmtpbmcyZCBtb3VzZW1vdmUgZHJhZ2dpbmc6JywgdGhhdC5kcmFnZ2luZ0VsZW1lbnQpXG4gICAgaWYgKHRoYXQuZHJhZ2dpbmdFbGVtZW50KSB7XG4gICAgICAvL2NvbnNvbGUubG9nKCdyYW5raW5nMmQgbW91c2Vtb3ZlIHBvc2l0aW9uOicsIHAueCwgcC55KVxuICAgICAgaWYgKHAueCA8IDApIHAueCA9IDA7IGVsc2UgaWYgKHAueCA+IDgwMCkgcC54ID0gODAwIC0gNTA7IC8vb24gYm9yZGVycyBrZWVwIDBcbiAgICAgIGlmIChwLnkgPCAwKSBwLnkgPSAwOyBlbHNlIGlmIChwLnkgPiB0aGF0LnltYXggLSA1MCkgcC55ID0gdGhhdC55bWF4IC0gNTA7XG4gICAgICB0aGF0LmRyYWdnaW5nRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RyYWd4JywgcC54KTtcbiAgICAgIHRoYXQuZHJhZ2dpbmdFbGVtZW50LnNldEF0dHJpYnV0ZSgnZHJhZ3knLCBwLnkpO1xuICAgICAgdGhhdC5kcmFnZ2luZ0VsZW1lbnQuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBwLnggKyAnLCcgKyBwLnkgKyAnKScpO1xuICAgIH1cbiAgfVxuXG4gIGRpc3BsYXlDb29yZHMoeCwgeSwgZXh0cmEpIHtcbiAgICBsZXQgeE5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneHBvcycpO1xuICAgIGxldCB5Tm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd5cG9zJyk7XG4gICAgaWYgKHhOb2RlICYmIHlOb2RlKSB7XG4gICAgICB4Tm9kZS5maXJzdENoaWxkLm5vZGVWYWx1ZSA9IHBhcnNlSW50KHgsIDEwKSArIGV4dHJhO1xuICAgICAgeU5vZGUuZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSBwYXJzZUludCh5LCAxMCkgKyBleHRyYTtcbiAgICB9XG4gIH1cblxuICBkaXNwbGF5UmF3VGV4dCh0ZXh0KSB7XG4gICAgbGV0IHRleHROb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhdycpO1xuICAgIGlmICh0ZXh0Tm9kZSkge1xuICAgICAgdGV4dE5vZGUuZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSB0ZXh0O1xuICAgIH1cbiAgfVxuXG4gIGluaXQocHJlZml4LCBjb3VudCkge1xuICAgIGNvbnNvbGUubG9nKCdyYW5raW5nMmQgaW5pdCcpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgbGV0IGJhbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmVmaXggKyBpKTtcbiAgICAgIGlmIChiYWxsKSBiYWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoYXQubW91c2VEb3duLCBmYWxzZSk7XG4gICAgfVxuICAgIC8vaGlkZSBuYXYgY2xhc3Mgd2l0aCBzb3VuZHMgYnVnICM5XG4gICAgbGV0IHNvdW5kc25hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zb3VuZHMnKTtcbiAgICBzb3VuZHNuYXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIC8qdmFyIGJhbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhbGxcIik7XG4gICAgdmFyIHNxdWFyZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3F1YXJlXCIpO1xuICAgIHZhciBsb2dvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjZF9sb2dvXCIpO1xuICAgIC8vdmFyIGZlZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZlZWRfaWNvblwiKTtcbiAgICBpZihiYWxsICYmIHNxdWFyZSAmJiBsb2dvKSB7XG4gICAgICAgIGJhbGwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBtb3VzZURvd24sIGZhbHNlKTtcbiAgICAgICAgc3F1YXJlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgbW91c2VEb3duLCBmYWxzZSk7XG4gICAgICAgIGxvZ28uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBtb3VzZURvd24sIGZhbHNlKTtcbiAgICAgICAgLy9mZWVkLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgbW91c2VEb3duLCBmYWxzZSk7XG4gICAgfVxuICAgIC8vZGlzcGxheVJhd1RleHQoXCJEcmFnIHN0dWZmIGFyb3VuZFwiKTtcbiAgICAqL1xuICB9XG5cbiAgZGlzcGxheU1hdHJpeChtYXRyaXgpIHtcbiAgICB0aGlzLmRpc3BsYXlSYXdUZXh0KG1hdHJpeC5hICsgJywgJyArIG1hdHJpeC5iICsgJywgJyArIG1hdHJpeC5jICsgJywgJ1xuICAgICAgKyBtYXRyaXguZCArICcsICcgKyBtYXRyaXguZSArICcsICcgKyBtYXRyaXguZik7XG4gIH1cblxuICAvLyBGb2xsb3dpbmcgaXMgZnJvbSBIb2xnZXIgV2lsbCBzaW5jZSBBU1YzIGFuZCBPOSBkbyBub3Qgc3VwcG9ydCBnZXRTY3JlZW5UQ00oKVxuICAvLyBTZWUgaHR0cDovL2dyb3Vwcy55YWhvby5jb20vZ3JvdXAvc3ZnLWRldmVsb3BlcnMvbWVzc2FnZS81MDc4OVxuICAvKiAgcGFyWDtcbiAgcGFyWTtcbiAgbWE7XG4gIG1vcztcbiAgdztcbiAgaDtcbiAgc3g7XG4gIHN5O1xuICBzOyovXG4gIGdldFNjcmVlbkNUTShkb2MpIHtcbiAgICBpZiAoZG9jLmdldFNjcmVlbkNUTSkgeyByZXR1cm4gZG9jLmdldFNjcmVlbkNUTSgpOyB9XG5cbiAgICBsZXQgcm9vdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzdmcnKVswXTsvL2RvY1xuICAgIGxldCBzQ1RNID0gcm9vdC5jcmVhdGVTVkdNYXRyaXgoKTtcblxuICAgIGxldCB0ciA9IHJvb3QuY3JlYXRlU1ZHTWF0cml4KCk7XG4gICAgbGV0IHBhciA9IHJvb3QuZ2V0QXR0cmlidXRlKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJyk7XG4gICAgaWYgKHBhciA9PT0gbnVsbCB8fCBwYXIgPT09ICcnKSBwYXIgPSAneE1pZFlNaWQgbWVldCc7Ly9zZXR0aW5nIHRvIGRlZmF1bHQgdmFsdWVcbiAgICBsZXQgcGFyWCA9IHBhci5zdWJzdHJpbmcoMCwgNCk7IC8veE1pbjt4TWlkO3hNYXhcbiAgICBsZXQgcGFyWSA9IHBhci5zdWJzdHJpbmcoNCwgOCk7Ly9ZTWluO1lNaWQ7WU1heDtcbiAgICBsZXQgbWEgPSBwYXIuc3BsaXQoJyAnKTtcbiAgICBsZXQgbW9zID0gbWFbMV07IC8vbWVldDtzbGljZVxuXG4gICAgLy9nZXQgZGltZW5zaW9ucyBvZiB0aGUgdmlld3BvcnRcbiAgICBzQ1RNLmEgPSAxO1xuICAgIHNDVE0uZCA9IDE7XG4gICAgc0NUTS5lID0gMDtcbiAgICBzQ1RNLmYgPSAwO1xuXG5cbiAgICBsZXQgdyA9IHJvb3QuZ2V0QXR0cmlidXRlKCd3aWR0aCcpO1xuICAgIGlmICh3ID09PSBudWxsIHx8IHcgPT09ICcnKSB3ID0gaW5uZXJXaWR0aDtcblxuICAgIGxldCBoID0gcm9vdC5nZXRBdHRyaWJ1dGUoJ2hlaWdodCcpO1xuICAgIGlmIChoID09PSBudWxsIHx8IGggPT09ICcnKSBoID0gaW5uZXJIZWlnaHQ7XG5cbiAgICAvLyBKZWZmIFNjaGlsbGVyOiAgTW9kaWZpZWQgdG8gYWNjb3VudCBmb3IgcGVyY2VudGFnZXMgLSBJJ20gbm90XG4gICAgLy8gYWJzb2x1dGVseSBjZXJ0YWluIHRoaXMgaXMgY29ycmVjdCBidXQgaXQgd29ya3MgZm9yIDEwMCUvMTAwJVxuICAgIGlmICh3LnN1YnN0cih3Lmxlbmd0aCAtIDEsIDEpID09PSAnJScpIHtcbiAgICAgIHcgPSAocGFyc2VGbG9hdCh3LnN1YnN0cigwLCB3Lmxlbmd0aCAtIDEpKSAvIDEwMC4wKSAqIGlubmVyV2lkdGg7XG4gICAgfVxuICAgIGlmIChoLnN1YnN0cihoLmxlbmd0aCAtIDEsIDEpID09PSAnJScpIHtcbiAgICAgIGggPSAocGFyc2VGbG9hdChoLnN1YnN0cigwLCBoLmxlbmd0aCAtIDEpKSAvIDEwMC4wKSAqIGlubmVySGVpZ2h0O1xuICAgIH1cblxuICAgIC8vIGdldCB0aGUgVmlld0JveFxuICAgIGxldCB2YmEgPSByb290LmdldEF0dHJpYnV0ZSgndmlld0JveCcpO1xuICAgIGlmICh2YmEgPT09IG51bGwpIHZiYSA9ICcwIDAgJyArIHcgKyAnICcgKyBoO1xuICAgIGxldCB2YiA9IHZiYS5zcGxpdCgnICcpOy8vZ2V0IHRoZSB2aWV3Qm94IGludG8gYW4gYXJyYXlcblxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL2NyZWF0ZSBhIG1hdHJpeCB3aXRoIGN1cnJlbnQgdXNlciB0cmFuc2Zvcm1hdGlvblxuICAgIHRyLmEgPSByb290LmN1cnJlbnRTY2FsZTtcbiAgICB0ci5kID0gcm9vdC5jdXJyZW50U2NhbGU7XG4gICAgdHIuZSA9IHJvb3QuY3VycmVudFRyYW5zbGF0ZS54O1xuICAgIHRyLmYgPSByb290LmN1cnJlbnRUcmFuc2xhdGUueTtcblxuXG4gICAgLy9zY2FsZSBmYWN0b3JzXG4gICAgbGV0IHN4ID0gdyAvIHZiWzJdO1xuICAgIGxldCBzeSA9IGggLyB2YlszXTtcblxuICAgIGxldCBzO1xuICAgIC8vbWVldE9yU2xpY2VcbiAgICBpZiAobW9zID09PSAnc2xpY2UnKSB7XG4gICAgICBzID0gKHN4ID4gc3kgPyBzeCA6IHN5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcyA9IChzeCA8IHN5ID8gc3ggOiBzeSk7XG4gICAgfVxuXG4gICAgLy9wcmVzZXJ2ZUFzcGVjdFJhdGlvPVwibm9uZVwiXG4gICAgaWYgKHBhciA9PT0gJ25vbmUnKSB7XG4gICAgICBzQ1RNLmEgPSBzeDsvL3NjYWxlWFxuICAgICAgc0NUTS5kID0gc3k7Ly9zY2FsZVlcbiAgICAgIHNDVE0uZSA9IC0gdmJbMF0gKiBzeDsgLy90cmFuc2xhdGVYXG4gICAgICBzQ1RNLmYgPSAtIHZiWzBdICogc3k7IC8vdHJhbnNsYXRlWVxuICAgICAgc0NUTSA9IHRyLm11bHRpcGx5KHNDVE0pOy8vdGFraW5nIHVzZXIgdHJhbnNmb3JtYXRpb25zIGludG8gYWNvdW50XG5cbiAgICAgIHJldHVybiBzQ1RNO1xuICAgIH1cblxuXG4gICAgc0NUTS5hID0gczsgLy9zY2FsZVhcbiAgICBzQ1RNLmQgPSBzOy8vc2NhbGVZXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgc3dpdGNoIChwYXJYKSB7XG4gICAgY2FzZSAneE1pZCc6XG4gICAgICBzQ1RNLmUgPSAoKHcgLSB2YlsyXSAqIHMpIC8gMikgLSB2YlswXSAqIHM7IC8vdHJhbnNsYXRlWFxuXG4gICAgICBicmVhaztcbiAgICBjYXNlICd4TWluJzpcbiAgICAgIHNDVE0uZSA9IC0gdmJbMF0gKiBzOy8vdHJhbnNsYXRlWFxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAneE1heCc6XG4gICAgICBzQ1RNLmUgPSAodyAtIHZiWzJdICogcykgLSB2YlswXSAqIHM7IC8vdHJhbnNsYXRlWFxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgc3dpdGNoIChwYXJZKSB7XG4gICAgY2FzZSAnWU1pZCc6XG4gICAgICBzQ1RNLmYgPSAoaCAtIHZiWzNdICogcykgLyAyIC0gdmJbMV0gKiBzOyAvL3RyYW5zbGF0ZVlcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ1lNaW4nOlxuICAgICAgc0NUTS5mID0gLSB2YlsxXSAqIHM7Ly90cmFuc2xhdGVZXG4gICAgICBicmVhaztcbiAgICBjYXNlICdZTWF4JzpcbiAgICAgIHNDVE0uZiA9IChoIC0gdmJbM10gKiBzKSAtIHZiWzFdICogczsgLy90cmFuc2xhdGVZXG4gICAgICBicmVhaztcbiAgICB9XG4gICAgc0NUTSA9IHRyLm11bHRpcGx5KHNDVE0pOy8vdGFraW5nIHVzZXIgdHJhbnNmb3JtYXRpb25zIGludG8gYWNvdW50XG5cbiAgICByZXR1cm4gc0NUTTtcbiAgfVxuXG4gIGNvbnRleHRNZW51KGV2dCl7XG4gICAgLy9sZXQgZXZ0PSB3aW5kb3cuZXZlbnQ7XG4gICAgaWYgKGV2dC53aGljaCA9PT0gMyApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjb250ZXh0IG1lbnUgdHJpZ2dlcmVkJywgZXZ0KTtcbiAgICAgIHRoYXQuc2hvd2NvbnRleHRtZW51ID0gdHJ1ZTtcbiAgICAgIGxldCB0YXJnZXQgPSBldnQuY3VycmVudFRhcmdldDtcbiAgICAgIGNvbnNvbGUubG9nKCdjb250ZXh0IG1lbnUgY3VycmVudCB0YXJnZXQnLCB0YXJnZXQpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jhbmtpbmdtb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAvL2dldCBpZCBvZiBhdWRpbyBiZWluZyB0YWdnZWRcbiAgICAgIGxldCBpZCA9IHRhcmdldC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGl0bGUnKVswXS5pbm5lckhUTUw7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5ub3RhdGlvbnRpdGxlJykuaW5uZXJIVE1MID0gaWQ7XG4gICAgICAvL2dldCBjb250ZW50IGFscmVhZHkgc3RvcmVkIGZvciBhdWRpb1xuICAgICAgbGV0IGF1ZGlvc3JjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzb3VyY2UnKVswXS5nZXRBdHRyaWJ1dGUoJ3NyYycpXG4gICAgICBsZXQgY29udGVudCA9IHdpbmRvdy5yaS5nZXRBbm5vdGF0aW9uKGF1ZGlvc3JjKTtcblxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fubm90YXRpb25jb250ZW50JykudmFsdWU9Y29udGVudD9jb250ZW50OlwiXCI7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5ub3RhdGlvbmNvbnRlbnQnKS5mb2N1cygpO1xuICAgICAgLy9nZXQgc3RvcmVkIGFubm90YXRpb24gaW5mb1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHN1Ym1pdEFubm90YXRpb24oKXtcbiAgICAgIGxldCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fubm90YXRpb25jb250ZW50JykudmFsdWU7XG4gICAgICAvL2dldCBhdWRpb3NyY1xuICAgICAgbGV0IGlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fubm90YXRpb250aXRsZScpLmlubmVySFRNTDtcbiAgICAgIGxldCBhdWRpb3NyYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc291cmNlJylbMF0uZ2V0QXR0cmlidXRlKCdzcmMnKVxuICAgIHdpbmRvdy5yaS5zZXRBbm5vdGF0aW9uKGF1ZGlvc3JjLGNvbnRlbnQpO1xuICB9XG5cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBOENBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFwREE7QUFDQTtBQURBO0FBcURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQS9EQTtBQWlFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUF2RUE7QUF5RUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBbkZBO0FBQ0E7QUFEQTtBQXFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQWxHQTtBQUNBO0FBREE7QUFzR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQTVHQTtBQWtIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsSUE7QUFvSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUEzSUE7QUE2SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBKQTtBQXNKQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpLQTtBQTJLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsTEE7QUFvTEE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6TEE7QUEyTEE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7O0FBWUE7QUFDQTtBQWpOQTtBQW1OQTtBQUVBO0FBR0E7QUFDQTtBQUFBOzs7Ozs7Ozs7QUF6TkE7QUFDQTtBQURBO0FBbU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBVkE7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBVEE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExVUE7QUE0VUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhXQTtBQWtXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXhXQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///ROQc\n");

/***/ }),

/***/ "UbAQ":
/*!*******************************!*\
  !*** ./src/components/dsl.js ***!
  \*******************************/
/*! exports provided: Dsl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Dsl\", function() { return Dsl; });\nvar Dsl = /*#__PURE__*/function () {\n  function Dsl() {}\n\n  Dsl.isZvuk = function isZvuk(c) {\n    return /^[\\s]*stimulus/.test(c);\n  };\n\n  Dsl.isText = function isText(c) {\n    return /^[\\s]*text/.test(c);\n  } //    isVideo(c) { return /^[\\s]*video/.test(c); }\n  ;\n\n  Dsl.isOtazka = function isOtazka(c) {\n    return /^[\\s]*task/.test(c);\n  };\n\n  Dsl.isPanel = function isPanel(c) {\n    return /^[\\s]*panel/.test(c);\n  } //    isParvaOtazka(c) { return /^[\\s]*taskpair/.test(c); },\n  ;\n\n  Dsl.isTaskForStimuli = function isTaskForStimuli(c) {\n    return /^[\\s]*taskforstimuli/.test(c);\n  };\n\n  Dsl.startsWithZvuk = function startsWithZvuk(c) {\n    return /^[\\s]*stimulus/.test(c);\n  };\n\n  Dsl.startsWithComment = function startsWithComment(c) {\n    return /^[\\s]*#/.test(c);\n  } //isObrazovka2(c) { return /^[\\s]*dvouobrazovka/ .test(c); },\n  ;\n\n  Dsl.isKategorie = function isKategorie(c) {\n    return /^[\\s]*screen per 1/.test(c);\n  };\n\n  Dsl.isParovy = function isParovy(c) {\n    return /^[\\s]*screen per 2/.test(c);\n  };\n\n  Dsl.isObrazovka = function isObrazovka(c) {\n    return /^[\\s]*screen/.test(c);\n  };\n\n  Dsl.isSloupce = function isSloupce(c) {\n    return /^[\\s]*column/.test(c);\n  };\n\n  Dsl.isHodnoty = function isHodnoty(c) {\n    return /^[\\s]*values/.test(c);\n  };\n\n  Dsl.isCheckboxvalues = function isCheckboxvalues(c) {\n    return /^[\\s]*checkboxvalues/.test(c);\n  };\n\n  Dsl.isCheckboxvaluesOnRow = function isCheckboxvaluesOnRow(c) {\n    return /^[\\s]*checkboxvaluesonrow/.test(c);\n  } //isSkalovaci(c) { return /^[\\s]*taskscale/ .test(c); },\n  ;\n\n  Dsl.isSkalovaciHodnoty = function isSkalovaciHodnoty(c) {\n    return /^[\\s]*scalevalues/.test(c);\n  };\n\n  Dsl.isSkala = function isSkala(c) {\n    return /^[\\s]*scale/.test(c);\n  };\n\n  Dsl.isPopis = function isPopis(c) {\n    return /^[\\s]*edit/.test(c);\n  };\n\n  Dsl.isSerad2d = function isSerad2d(c) {\n    return /^[\\s]*ranking2d/.test(c);\n  };\n\n  Dsl.isPoradiVNtici = function isPoradiVNtici(c) {\n    return /^[\\s]*randomintuple/.test(c);\n  };\n\n  Dsl.isPoradiZvuku = function isPoradiZvuku(c) {\n    return /^[\\s]*randomstimuli/.test(c);\n  };\n\n  Dsl.isPoradiCase = function isPoradiCase(c) {\n    return /^[\\s]*randomscreen/.test(c);\n  };\n\n  Dsl.isRandomPairs = function isRandomPairs(c) {\n    return /^[\\s]*randompairs/.test(c);\n  };\n\n  Dsl.isValuesOnRow = function isValuesOnRow(c) {\n    return /^[\\s]*valuesonrow/.test(c);\n  };\n\n  Dsl.isSelect = function isSelect(c) {\n    return /^[\\s]*select/.test(c);\n  };\n\n  Dsl.isStyle = function isStyle(c) {\n    return /^[\\s]*#style/.test(c);\n  };\n\n  Dsl.isStyleButton = function isStyleButton(c) {\n    return /^[\\s]*#stylebutton/.test(c);\n  };\n\n  Dsl.isStyleForm = function isStyleForm(c) {\n    return /^[\\s]*#styleform/.test(c);\n  };\n\n  Dsl.isType = function isType(c) {\n    return /^[\\s]*type /.test(c);\n  };\n\n  Dsl.isExtends = function isExtends(c) {\n    return /^[\\s]*extends /.test(c);\n  };\n\n  Dsl.isStimuliGroup = function isStimuliGroup(c) {\n    return /^[\\s]*stimuligroup /.test(c);\n  };\n\n  Dsl.isWithStimuli = function isWithStimuli(c) {\n    return /^[\\s]*withstimuli/.test(c);\n  };\n\n  Dsl.isWithStimuligroup = function isWithStimuligroup(c) {\n    return /^[\\s]*withgroup/.test(c);\n  };\n\n  Dsl.stimuliType = function stimuliType(c) {\n    return /\\(([^)]+)\\)/.exec(c);\n  };\n\n  return Dsl;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVWJBUS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2RzbC5qcz81MWIwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBEc2wge1xuICBzdGF0aWMgaXNadnVrKGMpIHsgcmV0dXJuIC9eW1xcc10qc3RpbXVsdXMvLnRlc3QoYyk7IH1cbiAgc3RhdGljIGlzVGV4dChjKSB7IHJldHVybiAvXltcXHNdKnRleHQvLnRlc3QoYyk7IH1cbiAgLy8gICAgaXNWaWRlbyhjKSB7IHJldHVybiAvXltcXHNdKnZpZGVvLy50ZXN0KGMpOyB9XG4gIHN0YXRpYyBpc090YXprYShjKSB7IHJldHVybiAvXltcXHNdKnRhc2svLnRlc3QoYyk7IH1cbiAgc3RhdGljIGlzUGFuZWwoYykgeyByZXR1cm4gL15bXFxzXSpwYW5lbC8udGVzdChjKTsgfVxuICAvLyAgICBpc1BhcnZhT3RhemthKGMpIHsgcmV0dXJuIC9eW1xcc10qdGFza3BhaXIvLnRlc3QoYyk7IH0sXG4gIHN0YXRpYyBpc1Rhc2tGb3JTdGltdWxpKGMpIHsgcmV0dXJuIC9eW1xcc10qdGFza2ZvcnN0aW11bGkvLnRlc3QoYyk7IH1cbiAgc3RhdGljIHN0YXJ0c1dpdGhadnVrKGMpIHsgcmV0dXJuIC9eW1xcc10qc3RpbXVsdXMvLnRlc3QoYyk7IH1cbiAgc3RhdGljIHN0YXJ0c1dpdGhDb21tZW50KGMpIHsgcmV0dXJuIC9eW1xcc10qIy8udGVzdChjKTsgfVxuICAvL2lzT2JyYXpvdmthMihjKSB7IHJldHVybiAvXltcXHNdKmR2b3VvYnJhem92a2EvIC50ZXN0KGMpOyB9LFxuICBzdGF0aWMgaXNLYXRlZ29yaWUoYykgeyByZXR1cm4gL15bXFxzXSpzY3JlZW4gcGVyIDEvLnRlc3QoYyk7IH1cbiAgc3RhdGljIGlzUGFyb3Z5KGMpIHsgcmV0dXJuIC9eW1xcc10qc2NyZWVuIHBlciAyLy50ZXN0KGMpOyB9XG4gIHN0YXRpYyBpc09icmF6b3ZrYShjKSB7IHJldHVybiAvXltcXHNdKnNjcmVlbi8udGVzdChjKTsgfVxuICBzdGF0aWMgaXNTbG91cGNlKGMpIHsgcmV0dXJuIC9eW1xcc10qY29sdW1uLy50ZXN0KGMpOyB9XG4gIHN0YXRpYyBpc0hvZG5vdHkoYykgeyByZXR1cm4gL15bXFxzXSp2YWx1ZXMvLnRlc3QoYyk7IH1cbiAgc3RhdGljIGlzQ2hlY2tib3h2YWx1ZXMoYykgeyByZXR1cm4gL15bXFxzXSpjaGVja2JveHZhbHVlcy8udGVzdChjKTsgfVxuICBzdGF0aWMgaXNDaGVja2JveHZhbHVlc09uUm93KGMpIHsgcmV0dXJuIC9eW1xcc10qY2hlY2tib3h2YWx1ZXNvbnJvdy8udGVzdChjKTsgfVxuICAvL2lzU2thbG92YWNpKGMpIHsgcmV0dXJuIC9eW1xcc10qdGFza3NjYWxlLyAudGVzdChjKTsgfSxcbiAgc3RhdGljIGlzU2thbG92YWNpSG9kbm90eShjKSB7IHJldHVybiAvXltcXHNdKnNjYWxldmFsdWVzLy50ZXN0KGMpOyB9XG4gIHN0YXRpYyBpc1NrYWxhKGMpIHsgcmV0dXJuIC9eW1xcc10qc2NhbGUvLnRlc3QoYyk7IH1cbiAgc3RhdGljIGlzUG9waXMoYykgeyByZXR1cm4gL15bXFxzXSplZGl0Ly50ZXN0KGMpOyB9XG4gIHN0YXRpYyBpc1NlcmFkMmQoYykgeyByZXR1cm4gL15bXFxzXSpyYW5raW5nMmQvLnRlc3QoYyk7IH1cbiAgc3RhdGljIGlzUG9yYWRpVk50aWNpKGMpIHsgcmV0dXJuIC9eW1xcc10qcmFuZG9taW50dXBsZS8udGVzdChjKTsgfVxuICBzdGF0aWMgaXNQb3JhZGladnVrdShjKSB7IHJldHVybiAvXltcXHNdKnJhbmRvbXN0aW11bGkvLnRlc3QoYyk7IH1cbiAgc3RhdGljIGlzUG9yYWRpQ2FzZShjKSB7IHJldHVybiAvXltcXHNdKnJhbmRvbXNjcmVlbi8udGVzdChjKTsgfVxuICBzdGF0aWMgaXNSYW5kb21QYWlycyhjKSB7IHJldHVybiAvXltcXHNdKnJhbmRvbXBhaXJzLy50ZXN0KGMpOyB9XG4gIHN0YXRpYyBpc1ZhbHVlc09uUm93KGMpIHsgcmV0dXJuIC9eW1xcc10qdmFsdWVzb25yb3cvLnRlc3QoYyk7IH1cbiAgc3RhdGljIGlzU2VsZWN0KGMpIHsgcmV0dXJuIC9eW1xcc10qc2VsZWN0Ly50ZXN0KGMpOyB9XG4gIHN0YXRpYyBpc1N0eWxlKGMpIHsgcmV0dXJuIC9eW1xcc10qI3N0eWxlLy50ZXN0KGMpOyB9XG4gIHN0YXRpYyBpc1N0eWxlQnV0dG9uKGMpIHsgcmV0dXJuIC9eW1xcc10qI3N0eWxlYnV0dG9uLy50ZXN0KGMpOyB9XG4gIHN0YXRpYyBpc1N0eWxlRm9ybShjKSB7IHJldHVybiAvXltcXHNdKiNzdHlsZWZvcm0vLnRlc3QoYyk7IH1cbiAgc3RhdGljIGlzVHlwZShjKSB7IHJldHVybiAvXltcXHNdKnR5cGUgLy50ZXN0KGMpO31cbiAgc3RhdGljIGlzRXh0ZW5kcyhjKSB7cmV0dXJuIC9eW1xcc10qZXh0ZW5kcyAvLnRlc3QoYyk7fVxuICBzdGF0aWMgaXNTdGltdWxpR3JvdXAoYykge3JldHVybiAvXltcXHNdKnN0aW11bGlncm91cCAvLnRlc3QoYyk7fVxuICBzdGF0aWMgaXNXaXRoU3RpbXVsaShjKSB7cmV0dXJuIC9eW1xcc10qd2l0aHN0aW11bGkvLnRlc3QoYyk7fVxuICBzdGF0aWMgaXNXaXRoU3RpbXVsaWdyb3VwKGMpIHtyZXR1cm4gL15bXFxzXSp3aXRoZ3JvdXAvLnRlc3QoYyk7fVxuICBzdGF0aWMgc3RpbXVsaVR5cGUoYykge3JldHVybiAvXFwoKFteKV0rKVxcKS8uZXhlYyhjKTt9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBRUE7QUFBQTtBQUZBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFDQTtBQUxBO0FBS0E7QUFBQTtBQUxBO0FBQ0E7QUFEQTtBQU9BO0FBQUE7QUFDQTtBQVJBO0FBUUE7QUFBQTtBQUNBO0FBVEE7QUFTQTtBQUFBO0FBVEE7QUFDQTtBQURBO0FBV0E7QUFBQTtBQUNBO0FBWkE7QUFZQTtBQUFBO0FBQ0E7QUFiQTtBQWFBO0FBQUE7QUFDQTtBQWRBO0FBY0E7QUFBQTtBQUNBO0FBZkE7QUFlQTtBQUFBO0FBQ0E7QUFoQkE7QUFnQkE7QUFBQTtBQUNBO0FBakJBO0FBaUJBO0FBQUE7QUFqQkE7QUFDQTtBQURBO0FBbUJBO0FBQUE7QUFDQTtBQXBCQTtBQW9CQTtBQUFBO0FBQ0E7QUFyQkE7QUFxQkE7QUFBQTtBQUNBO0FBdEJBO0FBc0JBO0FBQUE7QUFDQTtBQXZCQTtBQXVCQTtBQUFBO0FBQ0E7QUF4QkE7QUF3QkE7QUFBQTtBQUNBO0FBekJBO0FBeUJBO0FBQUE7QUFDQTtBQTFCQTtBQTBCQTtBQUFBO0FBQ0E7QUEzQkE7QUEyQkE7QUFBQTtBQUNBO0FBNUJBO0FBNEJBO0FBQUE7QUFDQTtBQTdCQTtBQTZCQTtBQUFBO0FBQ0E7QUE5QkE7QUE4QkE7QUFBQTtBQUNBO0FBL0JBO0FBK0JBO0FBQUE7QUFDQTtBQWhDQTtBQWdDQTtBQUFBO0FBQ0E7QUFqQ0E7QUFpQ0E7QUFBQTtBQUNBO0FBbENBO0FBa0NBO0FBQUE7QUFDQTtBQW5DQTtBQW1DQTtBQUFBO0FBQ0E7QUFwQ0E7QUFvQ0E7QUFBQTtBQUNBO0FBckNBO0FBcUNBO0FBQUE7QUFDQTtBQXRDQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///UbAQ\n");

/***/ }),

/***/ "YWhn":
/*!***********************************************!*\
  !*** ./src/components/responseinterpreter.js ***!
  \***********************************************/
/*! exports provided: Responseinterpreter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Responseinterpreter\", function() { return Responseinterpreter; });\n//var ri;\nvar Responseinterpreter = /*#__PURE__*/function () {\n  /**\n   * Created by tomaton on 10/21/2015.\n   */\n  function Responseinterpreter(parent) {\n    this.answers = [];\n    this.lastotazka = '';\n    this.lastqcase = '';\n    this.parser = parent;\n  }\n\n  var _proto = Responseinterpreter.prototype;\n\n  _proto.resetLast = function resetLast() {\n    this.lastqcase = '';\n    this.lastotazka = '';\n  };\n\n  _proto.addCase = function addCase(qcase) {\n    this.lastqcase += qcase;\n  };\n\n  _proto.setFullAnswer = function setFullAnswer(pageNum, questionNum, qcase, question, answer) {\n    //test if exists\n    //console.log(\"setanswer \" + pageNum + \" \" + questionNum+\" \"+qcase+\" \"+question+\":\", answer);\n    if (!this.answers[pageNum - 1]) this.answers[pageNum - 1] = []; //some workaround probably not needed more\n\n    if (!this.answers[pageNum - 1][questionNum - 1]) this.answers[pageNum - 1][questionNum - 1] = {};\n    this.answers[pageNum - 1][questionNum - 1].case = qcase;\n    this.answers[pageNum - 1][questionNum - 1].question = question;\n    this.setAnswer(pageNum, questionNum, answer);\n  } //sets default answer\n\n  /*Responses.prototype.setDefaultAnswer = function (pageNum, questionNum) {\n      return this.setDefaultAnswer(pageNum,questionNum,\"\");\n      // if (!this.answers[pageNum - 1] || !this.answers[pageNum - 1][questionNum - 1]) this.setFullAnswer(pageNum, questionNum, this.lastqcase,this.lastotazka,\"N/A\");\n  };\n   //sets default answer\n  Responses.prototype.setDefaultOptionalAnswer = function(pageNum, questionNum) {\n      return setDetaultOptionalAnswer(pageNum,questionNum,\"\");\n      //    if (!this.answers[pageNum - 1] || !this.answers[pageNum - 1][questionNum - 1]) this.setFullAnswer(pageNum, questionNum, this.lastqcase, this.lastotazka, \"\");\n  };*/\n  //sets default answer\n  ;\n\n  _proto.setDefaultAnswer = function setDefaultAnswer(pageNum, questionNum, suffix) {\n    var mysuffix = '';\n    if (suffix) mysuffix = suffix;\n    if (!this.answers[pageNum - 1] || !this.answers[pageNum - 1][questionNum - 1]) this.setFullAnswer(pageNum, questionNum, this.lastqcase, this.lastotazka + mysuffix, 'N/A');\n  } //sets default answer\n  ;\n\n  _proto.setDefaultOptionalAnswer = function setDefaultOptionalAnswer(pageNum, questionNum, suffix) {\n    var mysuffix = '';\n    if (suffix) mysuffix = suffix;\n    if (!this.answers[pageNum - 1] || !this.answers[pageNum - 1][questionNum - 1]) this.setFullAnswer(pageNum, questionNum, this.lastqcase, this.lastotazka + mysuffix, '');\n  }\n  /* executable function, can be called from html element*/\n  ;\n\n  _proto.setAnswer = function setAnswer(pageNum, questionNum, answer) {\n    if (answer.value) this.parser.result.answers[pageNum - 1][questionNum - 1].answer = answer.value;else this.parser.result.answers[pageNum - 1][questionNum - 1].answer = answer;\n    this.parser.result.answers[pageNum - 1][questionNum - 1].date = new Date();\n  };\n\n  _proto.setAnnotation = function setAnnotation(audiosrc, value) {\n    //create default empty annotation structure if it doesn't exist for audioid\n    if (!this.parser.result.answers[audiosrc]) this.parser.result.answers[audiosrc] = {};\n    this.parser.result.answers[audiosrc].annotation = value;\n    console.log('setannotation', audiosrc, value);\n  };\n\n  _proto.getAnnotation = function getAnnotation(audiosrc) {\n    //create default empty annotation structure if it doesn't exist for audioid\n    console.log('getannotation', audiosrc, this.parser.result.answers[audiosrc]);\n    if (this.parser.result.answers[audiosrc]) return this.parser.result.answers[audiosrc].annotation;else return false;\n  };\n\n  _proto.setCheckAnswer = function setCheckAnswer(pageNum, questionNum, answer) {\n    if (answer.value) {\n      if (!this.parser.result.answers[pageNum - 1][questionNum - 1].hasOwnProperty('checkedvalues')) this.parser.result.answers[pageNum - 1][questionNum - 1].checkedvalues = [];\n      if (answer.checked) this.parser.result.answers[pageNum - 1][questionNum - 1].checkedvalues[answer.value] = answer.value;else if (this.parser.result.answers[pageNum - 1][questionNum - 1].checkedvalues.hasOwnProperty(answer.value)) delete this.parser.result.answers[pageNum - 1][questionNum - 1].checkedvalues[answer.value];\n      var currentanswer = '';\n      this.parser.result.answers[pageNum - 1][questionNum - 1].checkedvalues.forEach(function (item) {\n        if (this.parser.result.answers[pageNum - 1][questionNum - 1].checkedvalues[item]) currentanswer += item + ';';\n      }, this); //this is propagated to foreach callback\n\n      this.parser.result.answers[pageNum - 1][questionNum - 1].answer = currentanswer;\n    } //    else answers[pageNum - 1][questionNum - 1].answer = answer;\n\n\n    this.parser.result.answers[pageNum - 1][questionNum - 1].date = new Date();\n  };\n\n  return Responseinterpreter;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiWVdobi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3Jlc3BvbnNlaW50ZXJwcmV0ZXIuanM/NjE2OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvL3ZhciByaTtcblxuZXhwb3J0IGNsYXNzIFJlc3BvbnNlaW50ZXJwcmV0ZXIge1xuICAvKipcbiAgICogQ3JlYXRlZCBieSB0b21hdG9uIG9uIDEwLzIxLzIwMTUuXG4gICAqL1xuXG4gIGNvbnN0cnVjdG9yKHBhcmVudCkge1xuICAgIHRoaXMuYW5zd2VycyA9IFtdO1xuICAgIHRoaXMubGFzdG90YXprYSA9ICcnO1xuICAgIHRoaXMubGFzdHFjYXNlID0gJyc7XG4gICAgdGhpcy5wYXJzZXIgPSBwYXJlbnQ7XG4gIH1cblxuICByZXNldExhc3QoKSB7XG4gICAgdGhpcy5sYXN0cWNhc2UgPSAnJztcbiAgICB0aGlzLmxhc3RvdGF6a2EgPSAnJztcbiAgfVxuXG4gIGFkZENhc2UocWNhc2UpIHtcbiAgICB0aGlzLmxhc3RxY2FzZSArPSBxY2FzZTtcbiAgfVxuXG4gIHNldEZ1bGxBbnN3ZXIocGFnZU51bSwgcXVlc3Rpb25OdW0sIHFjYXNlLCBxdWVzdGlvbiwgYW5zd2VyKSB7XG4gICAgLy90ZXN0IGlmIGV4aXN0c1xuICAgIC8vY29uc29sZS5sb2coXCJzZXRhbnN3ZXIgXCIgKyBwYWdlTnVtICsgXCIgXCIgKyBxdWVzdGlvbk51bStcIiBcIitxY2FzZStcIiBcIitxdWVzdGlvbitcIjpcIiwgYW5zd2VyKTtcbiAgICBpZiAoIXRoaXMuYW5zd2Vyc1twYWdlTnVtIC0gMV0pIHRoaXMuYW5zd2Vyc1twYWdlTnVtIC0gMV0gPSBbXTsgLy9zb21lIHdvcmthcm91bmQgcHJvYmFibHkgbm90IG5lZWRlZCBtb3JlXG4gICAgaWYgKCF0aGlzLmFuc3dlcnNbcGFnZU51bSAtIDFdW3F1ZXN0aW9uTnVtIC0gMV0pIHRoaXMuYW5zd2Vyc1twYWdlTnVtIC0gMV1bcXVlc3Rpb25OdW0gLSAxXSA9IHt9O1xuICAgIHRoaXMuYW5zd2Vyc1twYWdlTnVtIC0gMV1bcXVlc3Rpb25OdW0gLSAxXS5jYXNlID0gcWNhc2U7XG4gICAgdGhpcy5hbnN3ZXJzW3BhZ2VOdW0gLSAxXVtxdWVzdGlvbk51bSAtIDFdLnF1ZXN0aW9uID0gcXVlc3Rpb247XG4gICAgdGhpcy5zZXRBbnN3ZXIocGFnZU51bSwgcXVlc3Rpb25OdW0sIGFuc3dlcik7XG4gIH1cblxuXG4gIC8vc2V0cyBkZWZhdWx0IGFuc3dlclxuICAvKlJlc3BvbnNlcy5wcm90b3R5cGUuc2V0RGVmYXVsdEFuc3dlciA9IGZ1bmN0aW9uIChwYWdlTnVtLCBxdWVzdGlvbk51bSkge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0RGVmYXVsdEFuc3dlcihwYWdlTnVtLHF1ZXN0aW9uTnVtLFwiXCIpO1xuICAgICAgLy8gaWYgKCF0aGlzLmFuc3dlcnNbcGFnZU51bSAtIDFdIHx8ICF0aGlzLmFuc3dlcnNbcGFnZU51bSAtIDFdW3F1ZXN0aW9uTnVtIC0gMV0pIHRoaXMuc2V0RnVsbEFuc3dlcihwYWdlTnVtLCBxdWVzdGlvbk51bSwgdGhpcy5sYXN0cWNhc2UsdGhpcy5sYXN0b3RhemthLFwiTi9BXCIpO1xuICB9O1xuXG4gIC8vc2V0cyBkZWZhdWx0IGFuc3dlclxuICBSZXNwb25zZXMucHJvdG90eXBlLnNldERlZmF1bHRPcHRpb25hbEFuc3dlciA9IGZ1bmN0aW9uKHBhZ2VOdW0sIHF1ZXN0aW9uTnVtKSB7XG4gICAgICByZXR1cm4gc2V0RGV0YXVsdE9wdGlvbmFsQW5zd2VyKHBhZ2VOdW0scXVlc3Rpb25OdW0sXCJcIik7XG4gICAgICAvLyAgICBpZiAoIXRoaXMuYW5zd2Vyc1twYWdlTnVtIC0gMV0gfHwgIXRoaXMuYW5zd2Vyc1twYWdlTnVtIC0gMV1bcXVlc3Rpb25OdW0gLSAxXSkgdGhpcy5zZXRGdWxsQW5zd2VyKHBhZ2VOdW0sIHF1ZXN0aW9uTnVtLCB0aGlzLmxhc3RxY2FzZSwgdGhpcy5sYXN0b3RhemthLCBcIlwiKTtcbiAgfTsqL1xuXG4gIC8vc2V0cyBkZWZhdWx0IGFuc3dlclxuICBzZXREZWZhdWx0QW5zd2VyKHBhZ2VOdW0sIHF1ZXN0aW9uTnVtLCBzdWZmaXgpIHtcbiAgICBsZXQgbXlzdWZmaXggPSAnJzsgICAgaWYgKHN1ZmZpeCkgbXlzdWZmaXggPSBzdWZmaXg7XG4gICAgaWYgKCF0aGlzLmFuc3dlcnNbcGFnZU51bSAtIDFdIHx8ICF0aGlzLmFuc3dlcnNbcGFnZU51bSAtIDFdW3F1ZXN0aW9uTnVtIC0gMV0pIHRoaXMuc2V0RnVsbEFuc3dlcihwYWdlTnVtLCBxdWVzdGlvbk51bSwgdGhpcy5sYXN0cWNhc2UsIHRoaXMubGFzdG90YXprYSArIG15c3VmZml4LCAnTi9BJyk7XG4gIH1cblxuICAvL3NldHMgZGVmYXVsdCBhbnN3ZXJcbiAgc2V0RGVmYXVsdE9wdGlvbmFsQW5zd2VyKHBhZ2VOdW0sIHF1ZXN0aW9uTnVtLCBzdWZmaXgpIHtcbiAgICBsZXQgbXlzdWZmaXggPSAnJzsgICAgaWYgKHN1ZmZpeCkgbXlzdWZmaXggPSBzdWZmaXg7XG4gICAgaWYgKCF0aGlzLmFuc3dlcnNbcGFnZU51bSAtIDFdIHx8ICF0aGlzLmFuc3dlcnNbcGFnZU51bSAtIDFdW3F1ZXN0aW9uTnVtIC0gMV0pIHRoaXMuc2V0RnVsbEFuc3dlcihwYWdlTnVtLCBxdWVzdGlvbk51bSwgdGhpcy5sYXN0cWNhc2UsIHRoaXMubGFzdG90YXprYSArIG15c3VmZml4LCAnJyk7XG4gIH1cblxuXG4gIC8qIGV4ZWN1dGFibGUgZnVuY3Rpb24sIGNhbiBiZSBjYWxsZWQgZnJvbSBodG1sIGVsZW1lbnQqL1xuICBzZXRBbnN3ZXIocGFnZU51bSwgcXVlc3Rpb25OdW0sIGFuc3dlcikge1xuICAgIGlmIChhbnN3ZXIudmFsdWUpIHRoaXMucGFyc2VyLnJlc3VsdC5hbnN3ZXJzW3BhZ2VOdW0gLSAxXVtxdWVzdGlvbk51bSAtIDFdLmFuc3dlciA9IGFuc3dlci52YWx1ZTtcbiAgICBlbHNlIHRoaXMucGFyc2VyLnJlc3VsdC5hbnN3ZXJzW3BhZ2VOdW0gLSAxXVtxdWVzdGlvbk51bSAtIDFdLmFuc3dlciA9IGFuc3dlcjtcbiAgICB0aGlzLnBhcnNlci5yZXN1bHQuYW5zd2Vyc1twYWdlTnVtIC0gMV1bcXVlc3Rpb25OdW0gLSAxXS5kYXRlID0gbmV3IERhdGUoKTtcbiAgfVxuXG4gIHNldEFubm90YXRpb24oYXVkaW9zcmMsdmFsdWUpe1xuICAgIC8vY3JlYXRlIGRlZmF1bHQgZW1wdHkgYW5ub3RhdGlvbiBzdHJ1Y3R1cmUgaWYgaXQgZG9lc24ndCBleGlzdCBmb3IgYXVkaW9pZFxuICAgIGlmICghIHRoaXMucGFyc2VyLnJlc3VsdC5hbnN3ZXJzW2F1ZGlvc3JjXSkgIHRoaXMucGFyc2VyLnJlc3VsdC5hbnN3ZXJzW2F1ZGlvc3JjXT0ge307XG4gICAgdGhpcy5wYXJzZXIucmVzdWx0LmFuc3dlcnNbYXVkaW9zcmNdLmFubm90YXRpb249dmFsdWU7XG4gICAgY29uc29sZS5sb2coJ3NldGFubm90YXRpb24nLGF1ZGlvc3JjLHZhbHVlKVxuICB9XG5cbiAgZ2V0QW5ub3RhdGlvbihhdWRpb3NyYyl7XG4gICAgLy9jcmVhdGUgZGVmYXVsdCBlbXB0eSBhbm5vdGF0aW9uIHN0cnVjdHVyZSBpZiBpdCBkb2Vzbid0IGV4aXN0IGZvciBhdWRpb2lkXG4gICAgY29uc29sZS5sb2coJ2dldGFubm90YXRpb24nLGF1ZGlvc3JjLHRoaXMucGFyc2VyLnJlc3VsdC5hbnN3ZXJzW2F1ZGlvc3JjXSlcbiAgICBpZiAodGhpcy5wYXJzZXIucmVzdWx0LmFuc3dlcnNbYXVkaW9zcmNdKSByZXR1cm4gdGhpcy5wYXJzZXIucmVzdWx0LmFuc3dlcnNbYXVkaW9zcmNdLmFubm90YXRpb247XG4gICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzZXRDaGVja0Fuc3dlcihwYWdlTnVtLCBxdWVzdGlvbk51bSwgYW5zd2VyKSB7XG4gICAgaWYgKGFuc3dlci52YWx1ZSkge1xuICAgICAgaWYgKCF0aGlzLnBhcnNlci5yZXN1bHQuYW5zd2Vyc1twYWdlTnVtIC0gMV1bcXVlc3Rpb25OdW0gLSAxXS5oYXNPd25Qcm9wZXJ0eSgnY2hlY2tlZHZhbHVlcycpKSB0aGlzLnBhcnNlci5yZXN1bHQuYW5zd2Vyc1twYWdlTnVtIC0gMV1bcXVlc3Rpb25OdW0gLSAxXS5jaGVja2VkdmFsdWVzID0gW107XG4gICAgICBpZiAoYW5zd2VyLmNoZWNrZWQpIHRoaXMucGFyc2VyLnJlc3VsdC5hbnN3ZXJzW3BhZ2VOdW0gLSAxXVtxdWVzdGlvbk51bSAtIDFdLmNoZWNrZWR2YWx1ZXNbYW5zd2VyLnZhbHVlXSA9IGFuc3dlci52YWx1ZTtcbiAgICAgIGVsc2UgaWYgKHRoaXMucGFyc2VyLnJlc3VsdC5hbnN3ZXJzW3BhZ2VOdW0gLSAxXVtxdWVzdGlvbk51bSAtIDFdLmNoZWNrZWR2YWx1ZXMuaGFzT3duUHJvcGVydHkoYW5zd2VyLnZhbHVlKSkgZGVsZXRlIHRoaXMucGFyc2VyLnJlc3VsdC5hbnN3ZXJzW3BhZ2VOdW0gLSAxXVtxdWVzdGlvbk51bSAtIDFdLmNoZWNrZWR2YWx1ZXNbYW5zd2VyLnZhbHVlXTtcbiAgICAgIGxldCBjdXJyZW50YW5zd2VyID0gJyc7XG4gICAgICB0aGlzLnBhcnNlci5yZXN1bHQuYW5zd2Vyc1twYWdlTnVtIC0gMV1bcXVlc3Rpb25OdW0gLSAxXS5jaGVja2VkdmFsdWVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICBpZiAodGhpcy5wYXJzZXIucmVzdWx0LmFuc3dlcnNbcGFnZU51bSAtIDFdW3F1ZXN0aW9uTnVtIC0gMV0uY2hlY2tlZHZhbHVlc1tpdGVtXSkgY3VycmVudGFuc3dlciArPSBpdGVtICsgJzsnO1xuICAgICAgfSwgdGhpcyk7IC8vdGhpcyBpcyBwcm9wYWdhdGVkIHRvIGZvcmVhY2ggY2FsbGJhY2tcbiAgICAgIHRoaXMucGFyc2VyLnJlc3VsdC5hbnN3ZXJzW3BhZ2VOdW0gLSAxXVtxdWVzdGlvbk51bSAtIDFdLmFuc3dlciA9IGN1cnJlbnRhbnN3ZXI7XG4gICAgfVxuICAgIC8vICAgIGVsc2UgYW5zd2Vyc1twYWdlTnVtIC0gMV1bcXVlc3Rpb25OdW0gLSAxXS5hbnN3ZXIgPSBhbnN3ZXI7XG4gICAgdGhpcy5wYXJzZXIucmVzdWx0LmFuc3dlcnNbcGFnZU51bSAtIDFdW3F1ZXN0aW9uTnVtIC0gMV0uZGF0ZSA9IG5ldyBEYXRlKCk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQUNBO0FBREE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQWhCQTtBQWtCQTtBQUNBO0FBQ0E7QUFwQkE7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7Ozs7Ozs7O0FBV0E7QUE1Q0E7QUFDQTtBQURBO0FBOENBO0FBQUE7QUFDQTtBQUNBO0FBaERBO0FBQ0E7QUFEQTtBQW9EQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBekRBO0FBQ0E7QUFEQTtBQTJEQTtBQUVBO0FBQ0E7QUFDQTtBQS9EQTtBQWlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0RUE7QUF3RUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQTdFQTtBQStFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUE1RkE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///YWhn\n");

/***/ }),

/***/ "YqAC":
/*!***********************************************!*\
  !*** ./src/components/stimulusinterpreter.js ***!
  \***********************************************/
/*! exports provided: Stimulusinterpreter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Stimulusinterpreter\", function() { return Stimulusinterpreter; });\n/* harmony import */ var _interpreter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interpreter */ \"3QiX\");\n/* harmony import */ var _dsl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dsl */ \"UbAQ\");\n/* harmony import */ var peaks_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! peaks.js */ \"odNm\");\n/* harmony import */ var peaks_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(peaks_js__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar Stimulusinterpreter = /*#__PURE__*/function () {\n  /**\n   * Created by tomaton on 10/21/2015.\n   */\n  //main object\n  function Stimulusinterpreter(parent) {\n    this.navelement = false;\n    this.divelement = false;\n    this.audioid = 0;\n    this.SOUNDDIR = 'stimuli/';\n    this.parentinterpretter = parent; //this.sloupce = false;\n  }\n\n  var _proto = Stimulusinterpreter.prototype;\n\n  _proto.initPeaks = function initPeaks(id) {\n    //TODO this may not work -wave audi needs to be pregenerated\n    this.peakhtml = '<div id=\"peakscontainer\">\\n' + '  <div id=\"zoomviewcontainer' + id + '\"></div>\\n' + '  <div id=\"overviewcontainer' + id + '\"></div>\\n' + '</div><script>' + \"\\n     const options = {\\n      containers: {\\n        overview: document.getElementById('overviewcontainer'+id),\\n        zoomview: document.getElementById('zoomviewcontainer'+id)\\n      }};\\n     Peaks.init(options, function(err, peaks) {         });\\n  </script>\";\n  }\n  /* separates non-stimulus part of test */\n  ;\n\n  _proto.translateNonZvuk = function translateNonZvuk(row) {\n    if (this.navelement) {\n      this.navelement = false;\n      this.divelement = true;\n      return \"</nav><div class='task' id='questions'>\\n\";\n    }\n\n    if (!this.divelement) {\n      this.divelement = true;\n      return \"<div class='task' id='questions'>\\n\";\n    }\n\n    return '';\n  }\n  /* close unclosed <div>*/\n  ;\n\n  _proto.closeQuestionDiv = function closeQuestionDiv() {\n    if (this.divelement) {\n      this.divelement = false;\n      return \"<p class='footer'></p></div>\";\n    }\n\n    return '';\n  }\n  /* same name different extension => <audio> with different sources, different names => different <audios>\n   * translates \"zvuk [filename2.wav] [filename2.ogg]\" to HTML representation of sound player to one or both formats wav, ogg\n   * translates \"zvuk [file1.wav] [file1.ogg] [file2.wav] [file3.wav] into tuple of buttons file1 has 2 sources with ogg and wav, file2 and file3 has one source with wav\n   */\n  ;\n\n  _proto.openAudio = function openAudio(sloupce, sounddef) {\n    if (!sloupce && !this.navelement) {\n      this.navelement = true;\n\n      switch (this.tagtype) {\n        case 'mp4':\n          this.tags.push(\"<nav class='stimulus videos'>\"); //video takes more space\n\n          break;\n\n        case 'png':\n        case 'jpg':\n          this.tags.push(\"<nav class='stimulus pictures'>\"); //image takes variable space\n\n          break;\n\n        case 'txt':\n          this.tags.push(\"<nav class='stimulus txts'>\"); //text takes more space\n\n          break;\n\n        default:\n          this.tags.push(\"<nav class='stimulus sounds'>\");\n        //audio on left 10 % column\n      }\n    }\n\n    switch (this.tagtype) {\n      case 'mp4':\n        this.currentTag.push(\"<video style='max-width:100%;' id='video\" + this.audioid++ + \"' width='480' height='360' controls>\");\n        break;\n\n      case 'png':\n      case 'jpg':\n        this.currentTag.push(\"<img style='width:100%;' id='image\" + this.audioid++ + \"'\"); //imageo takes more space\n\n        break;\n\n      case 'txt':\n        this.currentTag.push(\"<p id='text\" + this.audioid++ + \"'>\"); //text takes more space\n\n        break;\n\n      default:\n        this.inputindex = this.currentTag.length;\n        var soundtype = _dsl__WEBPACK_IMPORTED_MODULE_1__[\"Dsl\"].stimuliType(sounddef);\n\n        if (soundtype) {\n          if (soundtype[1] === 'button') this.currentTag.push(\"<input class='sound-button' type='button' onclick='document.getElementById(\\\"audio\" + this.audioid + \"\\\").play();' value='play'/> <audio id='audio\" + this.audioid++ + \"'>\");else if (soundtype[1] === 'controls') this.currentTag.push(\"<audio controls id='audio\" + this.audioid++ + \"'> \");else if (soundtype[1] === 'waveform') {\n            this.initPeaks(this.audioid);\n            this.currentTag.push(this.peakhtml + \"<audio controls id='audio\" + this.audioid++ + \"'> \");\n          }\n        } else {\n          this.currentTag.push(\"<input class='sound-button' type='button' onclick='document.getElementById(\\\"audio\" + this.audioid + \"\\\").play();' value='play'/> <audio id='audio\" + this.audioid++ + \"'>\");\n        }\n\n        break;\n    }\n  } //add range playing of sound\n  ;\n\n  _proto.repairLastAudio = function repairLastAudio(rowsplitted) {\n    //preserve that\n    switch (this.tagtype) {\n      case 'mp4':\n      case 'png':\n      case 'jpg':\n      case 'txt':\n        console.log('Error, expected audio for range playing');\n        break;\n\n      default:\n        var re2 = /[\\[\\],]/; // fix feature bug #240, coma ',' is used to separate interval numbers\n\n        var rowsplitted2 = rowsplitted.split(re2);\n        var starttime = rowsplitted2[1]; //[10,10] is separates as [0] is empty, [1] is 10, [2] is 10 [3] is empty\n\n        var duration = rowsplitted2[2];\n        this.audioid--; //will repair the last audio\n\n        this.currentTag[this.inputindex] = \"<input type='button' onclick='playAudioPart(document.getElementById(\\\"audio\" + this.audioid + '\"),' + starttime + ',' + duration + \");' value='play'/><audio id='audio\" + this.audioid++ + \"'>\";\n    }\n  } //close <audio> tag\n  ;\n\n  _proto.closeAudio = function closeAudio() {\n    switch (this.tagtype) {\n      case 'mp4':\n        this.currentTag.push('Your browser does not support the video element.</video>\\n');\n        break;\n\n      case 'png':\n      case 'jpg':\n        this.currentTag.push('/>');\n        break;\n\n      case 'txt':\n        this.currentTag.push('</p>');\n        break;\n\n      default:\n        this.currentTag.push('Your browser does not support the audio element.</audio>\\n');\n    } //adds copy of current tag to the array of tags dedicated to unique stimulus\n\n\n    this.tags.push(this.currentTag.join('')); //nulls the current tag so new content audio/video can be inserted\n\n    this.currentTag = [];\n  } //add <source> of the <audio> <video and src of the image\n  ;\n\n  _proto.addSource = function addSource() {\n    switch (this.tagtype) {\n      case 'mp4':\n        this.currentTag.push(\"<source src='\" + this.SOUNDDIR + this.currentsound[0] + '.' + this.currentsound[1] + \"' type='audio/\"); //+rowsplitted[j+1]+\"'>';\n\n        this.currentTag.push(\"mpeg'>\");\n        break;\n\n      case 'png':\n      case 'jpg':\n        this.currentTag.push(\" src='\" + this.SOUNDDIR + this.currentsound[0] + '.' + this.currentsound[1] + \"'\");\n        break;\n\n      case 'txt':\n        //loads the content of the txt file\n        this.currentTag.push(\"<span src='\" + this.SOUNDDIR + this.currentsound[0] + '.' + this.currentsound[1] + \"'/>\"); //to hold the source\n\n        this.currentTag.push(\"</p><script>$('#text\" + (this.audioid - 1) + \"').load('\" + this.SOUNDDIR + this.currentsound[0] + '.' + this.currentsound[1] + \"')</script>\");\n        break;\n\n      default:\n        this.currentTag.push(\"<source src='\" + this.SOUNDDIR + this.currentsound[0] + '.' + this.currentsound[1] + \"' type='audio/\"); //+rowsplitted[j+1]+\"'>';\n\n        this.currentTag.push(this.currentsound[1] + \"'>\");\n    }\n\n    this.lastsoundname = this.currentsound[0];\n  }\n  /*\n  Stimulus.prototype.firstscreenaudioid= function()\n  {\n  //    this.audioid = 0\n  //    this.firstscreenaudioid = this.audioid;\n  }\n  */\n  ;\n\n  _proto.translateZvuk = function translateZvuk(rowsplitted, poradivnticinahodne, result, sloupce) {\n    var j = 1;\n    this.lastsoundname = '';\n    this.tagtype = rowsplitted[j].slice(rowsplitted[j].length - 3, rowsplitted[j].length).toLowerCase(); // || rowsplitted[j].startsWith('v_');\n\n    this.tags = [];\n    this.currentTag = [];\n    this.currentsound = [];\n    this.inputindex = 0; //sloupce - used ofr pair test\n\n    if (sloupce) this.currentTag.push(\"<td class='stimulus'>\");\n    /* open initial tag */\n\n    this.openAudio(sloupce, rowsplitted[0]);\n\n    while (j < rowsplitted.length) {\n      this.currentsound = rowsplitted[j].split('.'); //if (!quotes)\n\n      if (this.lastsoundname === '' || this.lastsoundname === this.currentsound[0]) {\n        //add only new source type (wav,ogg), if soundname is same and only extension differs\n        this.addSource();\n        j++;\n      } else if (rowsplitted[j].startsWith('[')) {\n        //interval of previous sound\n        this.repairLastAudio(rowsplitted[j]);\n        j++; //skip the interval in [..]\n      } else {\n        //add new audio, different sound and it's source if different name\n        this.closeAudio();\n        this.openAudio(sloupce, rowsplitted[0]);\n        this.addSource();\n        j++;\n      } //bug in feature #235, must randomize also the case order\n      //lastqcase += rowsplitted[j] + \".\" + rowsplitted[j + 1] + \" \"; //adds sound to qcase structure\n\n    }\n    /* close last tag*/\n\n\n    this.closeAudio();\n    /* shuffle if needed */\n\n    if (poradivnticinahodne) {\n      //keep first <nav>,\n      var mytag = this.tags.shift(); //shuffle\n\n      this.tags.shuffle(); //adds first <nav>\n\n      this.tags.unshift(mytag);\n    } //gets filenames from the tags to keep order of cases in result, fix of feature #235, for starts from 1, 0 is <nav>, if sloupce then starts from 0 (no <nav> element\n    //added sloupce?0:1 and parser.result.addCase() fix bug #284\n\n\n    for (var k = sloupce ? 0 : 1; k < this.tags.length; k++) {\n      this.parentinterpretter.result.addCase(_interpreter__WEBPACK_IMPORTED_MODULE_0__[\"Interpreter\"].extract(this.tags[k].match(/src='([^']*)'/)[1], this.SOUNDDIR) + ' ');\n    } //translatedRows = tags.join\n\n\n    return this.tags.join(' ');\n  }\n  /* executive part of the audio\n   playing part of the audio,\n   audio element is expected as the calling argument,\n   e.g. document.getElementById('myAudio') */\n  ;\n\n  _proto.stopAudio = function stopAudio(audio) {\n    audio.pause();\n  }\n  /* starts playing at \"start\" position and stops after specified duration\n   \"start\" and \"duration\" in milliseconds\n   */\n  ;\n\n  _proto.playAudioPart = function playAudioPart(audio, start, duration) {\n    audio.currentTime = start / 1000; //in seconds\n\n    audio.play();\n    setTimeout(stopAudio, duration, audio); //in milliseconds\n  };\n\n  return Stimulusinterpreter;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiWXFBQy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3N0aW11bHVzaW50ZXJwcmV0ZXIuanM/NjJhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ludGVycHJldGVyfSBmcm9tICcuL2ludGVycHJldGVyJztcbmltcG9ydCB7RHNsfSBmcm9tICcuL2RzbCc7XG5pbXBvcnQgKiBhcyBQZWFrcyBmcm9tICdwZWFrcy5qcydcblxuZXhwb3J0IGNsYXNzIFN0aW11bHVzaW50ZXJwcmV0ZXIge1xuICAvKipcbiAgICogQ3JlYXRlZCBieSB0b21hdG9uIG9uIDEwLzIxLzIwMTUuXG4gICAqL1xuICAvL21haW4gb2JqZWN0XG5cbiAgY29uc3RydWN0b3IocGFyZW50KSB7XG4gICAgdGhpcy5uYXZlbGVtZW50ID0gZmFsc2U7XG4gICAgdGhpcy5kaXZlbGVtZW50ID0gZmFsc2U7XG4gICAgdGhpcy5hdWRpb2lkID0gMDtcbiAgICB0aGlzLlNPVU5ERElSID0gJ3N0aW11bGkvJztcbiAgICB0aGlzLnBhcmVudGludGVycHJldHRlciA9IHBhcmVudDtcbiAgICAvL3RoaXMuc2xvdXBjZSA9IGZhbHNlO1xuICB9XG5cbiAgaW5pdFBlYWtzKGlkKSB7XG4gICAgLy9UT0RPIHRoaXMgbWF5IG5vdCB3b3JrIC13YXZlIGF1ZGkgbmVlZHMgdG8gYmUgcHJlZ2VuZXJhdGVkXG4gICAgdGhpcy5wZWFraHRtbCA9ICc8ZGl2IGlkPVwicGVha3Njb250YWluZXJcIj5cXG4nICtcbiAgICAgICcgIDxkaXYgaWQ9XCJ6b29tdmlld2NvbnRhaW5lcicgKyBpZCArICdcIj48L2Rpdj5cXG4nICtcbiAgICAgICcgIDxkaXYgaWQ9XCJvdmVydmlld2NvbnRhaW5lcicgKyBpZCArICdcIj48L2Rpdj5cXG4nICtcbiAgICAgICc8L2Rpdj48c2NyaXB0PicgK1xuICAgIGBcbiAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIGNvbnRhaW5lcnM6IHtcbiAgICAgICAgb3ZlcnZpZXc6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdmVydmlld2NvbnRhaW5lcicraWQpLFxuICAgICAgICB6b29tdmlldzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvb212aWV3Y29udGFpbmVyJytpZClcbiAgICAgIH19O1xuICAgICBQZWFrcy5pbml0KG9wdGlvbnMsIGZ1bmN0aW9uKGVyciwgcGVha3MpIHsgICAgICAgICB9KTtcbiAgPC9zY3JpcHQ+YDtcbiAgfVxuICAvKiBzZXBhcmF0ZXMgbm9uLXN0aW11bHVzIHBhcnQgb2YgdGVzdCAqL1xuICB0cmFuc2xhdGVOb25adnVrKHJvdykge1xuICAgIGlmICh0aGlzLm5hdmVsZW1lbnQpIHtcbiAgICAgIHRoaXMubmF2ZWxlbWVudCA9IGZhbHNlO1xuICAgICAgdGhpcy5kaXZlbGVtZW50ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBcIjwvbmF2PjxkaXYgY2xhc3M9J3Rhc2snIGlkPSdxdWVzdGlvbnMnPlxcblwiO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuZGl2ZWxlbWVudCkge1xuICAgICAgdGhpcy5kaXZlbGVtZW50ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBcIjxkaXYgY2xhc3M9J3Rhc2snIGlkPSdxdWVzdGlvbnMnPlxcblwiO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICAvKiBjbG9zZSB1bmNsb3NlZCA8ZGl2PiovXG4gIGNsb3NlUXVlc3Rpb25EaXYoKSB7XG4gICAgaWYgKHRoaXMuZGl2ZWxlbWVudCkge1xuICAgICAgdGhpcy5kaXZlbGVtZW50ID0gZmFsc2U7XG4gICAgICByZXR1cm4gXCI8cCBjbGFzcz0nZm9vdGVyJz48L3A+PC9kaXY+XCI7XG4gICAgfSByZXR1cm4gJyc7XG4gIH1cblxuICAvKiBzYW1lIG5hbWUgZGlmZmVyZW50IGV4dGVuc2lvbiA9PiA8YXVkaW8+IHdpdGggZGlmZmVyZW50IHNvdXJjZXMsIGRpZmZlcmVudCBuYW1lcyA9PiBkaWZmZXJlbnQgPGF1ZGlvcz5cbiAgICogdHJhbnNsYXRlcyBcInp2dWsgW2ZpbGVuYW1lMi53YXZdIFtmaWxlbmFtZTIub2dnXVwiIHRvIEhUTUwgcmVwcmVzZW50YXRpb24gb2Ygc291bmQgcGxheWVyIHRvIG9uZSBvciBib3RoIGZvcm1hdHMgd2F2LCBvZ2dcbiAgICogdHJhbnNsYXRlcyBcInp2dWsgW2ZpbGUxLndhdl0gW2ZpbGUxLm9nZ10gW2ZpbGUyLndhdl0gW2ZpbGUzLndhdl0gaW50byB0dXBsZSBvZiBidXR0b25zIGZpbGUxIGhhcyAyIHNvdXJjZXMgd2l0aCBvZ2cgYW5kIHdhdiwgZmlsZTIgYW5kIGZpbGUzIGhhcyBvbmUgc291cmNlIHdpdGggd2F2XG4gICAqL1xuXG4gIG9wZW5BdWRpbyhzbG91cGNlLCBzb3VuZGRlZikge1xuICAgIGlmICghc2xvdXBjZSAmJiAhdGhpcy5uYXZlbGVtZW50KSB7XG4gICAgICB0aGlzLm5hdmVsZW1lbnQgPSB0cnVlO1xuICAgICAgc3dpdGNoICh0aGlzLnRhZ3R5cGUpIHtcbiAgICAgIGNhc2UgJ21wNCc6XG4gICAgICAgIHRoaXMudGFncy5wdXNoKFwiPG5hdiBjbGFzcz0nc3RpbXVsdXMgdmlkZW9zJz5cIik7IC8vdmlkZW8gdGFrZXMgbW9yZSBzcGFjZVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3BuZyc6XG4gICAgICBjYXNlICdqcGcnOlxuICAgICAgICB0aGlzLnRhZ3MucHVzaChcIjxuYXYgY2xhc3M9J3N0aW11bHVzIHBpY3R1cmVzJz5cIik7IC8vaW1hZ2UgdGFrZXMgdmFyaWFibGUgc3BhY2VcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0eHQnOlxuICAgICAgICB0aGlzLnRhZ3MucHVzaChcIjxuYXYgY2xhc3M9J3N0aW11bHVzIHR4dHMnPlwiKTsgLy90ZXh0IHRha2VzIG1vcmUgc3BhY2VcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLnRhZ3MucHVzaChcIjxuYXYgY2xhc3M9J3N0aW11bHVzIHNvdW5kcyc+XCIpOyAvL2F1ZGlvIG9uIGxlZnQgMTAgJSBjb2x1bW5cbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRoaXMudGFndHlwZSkge1xuICAgIGNhc2UgJ21wNCc6XG4gICAgICB0aGlzLmN1cnJlbnRUYWcucHVzaChcIjx2aWRlbyBzdHlsZT0nbWF4LXdpZHRoOjEwMCU7JyBpZD0ndmlkZW9cIiArICh0aGlzLmF1ZGlvaWQrKykgKyBcIicgd2lkdGg9JzQ4MCcgaGVpZ2h0PSczNjAnIGNvbnRyb2xzPlwiKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3BuZyc6XG4gICAgY2FzZSAnanBnJzpcbiAgICAgIHRoaXMuY3VycmVudFRhZy5wdXNoKFwiPGltZyBzdHlsZT0nd2lkdGg6MTAwJTsnIGlkPSdpbWFnZVwiICsgKHRoaXMuYXVkaW9pZCsrKSArIFwiJ1wiKTsgLy9pbWFnZW8gdGFrZXMgbW9yZSBzcGFjZVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndHh0JzpcbiAgICAgIHRoaXMuY3VycmVudFRhZy5wdXNoKFwiPHAgaWQ9J3RleHRcIiArICh0aGlzLmF1ZGlvaWQrKykgKyBcIic+XCIpOyAvL3RleHQgdGFrZXMgbW9yZSBzcGFjZVxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRoaXMuaW5wdXRpbmRleCA9IHRoaXMuY3VycmVudFRhZy5sZW5ndGg7XG4gICAgICBsZXQgc291bmR0eXBlID0gRHNsLnN0aW11bGlUeXBlKHNvdW5kZGVmKTtcbiAgICAgIGlmIChzb3VuZHR5cGUgKSB7XG4gICAgICAgIGlmIChzb3VuZHR5cGVbMV0gPT09ICdidXR0b24nKSB0aGlzLmN1cnJlbnRUYWcucHVzaChcIjxpbnB1dCBjbGFzcz0nc291bmQtYnV0dG9uJyB0eXBlPSdidXR0b24nIG9uY2xpY2s9J2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxcXCJhdWRpb1wiICsgdGhpcy5hdWRpb2lkICsgXCJcXFwiKS5wbGF5KCk7JyB2YWx1ZT0ncGxheScvPiA8YXVkaW8gaWQ9J2F1ZGlvXCIgKyAodGhpcy5hdWRpb2lkKyspICsgXCInPlwiKTtcbiAgICAgICAgZWxzZSBpZiAoc291bmR0eXBlWzFdID09PSAnY29udHJvbHMnKSB0aGlzLmN1cnJlbnRUYWcucHVzaChcIjxhdWRpbyBjb250cm9scyBpZD0nYXVkaW9cIiArICh0aGlzLmF1ZGlvaWQrKykgKyBcIic+IFwiKTtcbiAgICAgICAgZWxzZSBpZiAoc291bmR0eXBlWzFdID09PSAnd2F2ZWZvcm0nKSB7dGhpcy5pbml0UGVha3ModGhpcy5hdWRpb2lkKTsgdGhpcy5jdXJyZW50VGFnLnB1c2godGhpcy5wZWFraHRtbCArIFwiPGF1ZGlvIGNvbnRyb2xzIGlkPSdhdWRpb1wiICsgKHRoaXMuYXVkaW9pZCsrKSArIFwiJz4gXCIpO31cbiAgICAgIH0gZWxzZSB7dGhpcy5jdXJyZW50VGFnLnB1c2goXCI8aW5wdXQgY2xhc3M9J3NvdW5kLWJ1dHRvbicgdHlwZT0nYnV0dG9uJyBvbmNsaWNrPSdkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcXFwiYXVkaW9cIiArIHRoaXMuYXVkaW9pZCArIFwiXFxcIikucGxheSgpOycgdmFsdWU9J3BsYXknLz4gPGF1ZGlvIGlkPSdhdWRpb1wiICsgKHRoaXMuYXVkaW9pZCsrKSArIFwiJz5cIik7fVxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy9hZGQgcmFuZ2UgcGxheWluZyBvZiBzb3VuZFxuICByZXBhaXJMYXN0QXVkaW8ocm93c3BsaXR0ZWQpIHtcbiAgICAvL3ByZXNlcnZlIHRoYXRcbiAgICBzd2l0Y2ggKHRoaXMudGFndHlwZSkge1xuICAgIGNhc2UgJ21wNCc6XG4gICAgY2FzZSAncG5nJzpcbiAgICBjYXNlICdqcGcnOlxuICAgIGNhc2UgJ3R4dCc6XG4gICAgICBjb25zb2xlLmxvZygnRXJyb3IsIGV4cGVjdGVkIGF1ZGlvIGZvciByYW5nZSBwbGF5aW5nJyk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgbGV0IHJlMiA9IC9bXFxbXFxdLF0vOyAvLyBmaXggZmVhdHVyZSBidWcgIzI0MCwgY29tYSAnLCcgaXMgdXNlZCB0byBzZXBhcmF0ZSBpbnRlcnZhbCBudW1iZXJzXG4gICAgICBsZXQgcm93c3BsaXR0ZWQyID0gcm93c3BsaXR0ZWQuc3BsaXQocmUyKTtcbiAgICAgIGxldCBzdGFydHRpbWUgPSByb3dzcGxpdHRlZDJbMV07IC8vWzEwLDEwXSBpcyBzZXBhcmF0ZXMgYXMgWzBdIGlzIGVtcHR5LCBbMV0gaXMgMTAsIFsyXSBpcyAxMCBbM10gaXMgZW1wdHlcbiAgICAgIGxldCBkdXJhdGlvbiA9IHJvd3NwbGl0dGVkMlsyXTtcbiAgICAgIHRoaXMuYXVkaW9pZC0tOyAvL3dpbGwgcmVwYWlyIHRoZSBsYXN0IGF1ZGlvXG4gICAgICB0aGlzLmN1cnJlbnRUYWdbdGhpcy5pbnB1dGluZGV4XSA9IFwiPGlucHV0IHR5cGU9J2J1dHRvbicgb25jbGljaz0ncGxheUF1ZGlvUGFydChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcXFwiYXVkaW9cIiArIHRoaXMuYXVkaW9pZCArICdcIiksJyArIHN0YXJ0dGltZSArICcsJyArIGR1cmF0aW9uICsgXCIpOycgdmFsdWU9J3BsYXknLz48YXVkaW8gaWQ9J2F1ZGlvXCIgKyAodGhpcy5hdWRpb2lkKyspICsgXCInPlwiO1xuICAgIH1cbiAgfVxuXG4gIC8vY2xvc2UgPGF1ZGlvPiB0YWdcbiAgY2xvc2VBdWRpbygpIHtcbiAgICBzd2l0Y2ggKHRoaXMudGFndHlwZSkge1xuICAgIGNhc2UgJ21wNCc6XG4gICAgICB0aGlzLmN1cnJlbnRUYWcucHVzaCgnWW91ciBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdGhlIHZpZGVvIGVsZW1lbnQuPC92aWRlbz5cXG4nKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3BuZyc6XG4gICAgY2FzZSAnanBnJzpcbiAgICAgIHRoaXMuY3VycmVudFRhZy5wdXNoKCcvPicpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndHh0JzpcbiAgICAgIHRoaXMuY3VycmVudFRhZy5wdXNoKCc8L3A+Jyk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgdGhpcy5jdXJyZW50VGFnLnB1c2goJ1lvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSBhdWRpbyBlbGVtZW50LjwvYXVkaW8+XFxuJyk7XG4gICAgfVxuICAgIC8vYWRkcyBjb3B5IG9mIGN1cnJlbnQgdGFnIHRvIHRoZSBhcnJheSBvZiB0YWdzIGRlZGljYXRlZCB0byB1bmlxdWUgc3RpbXVsdXNcbiAgICB0aGlzLnRhZ3MucHVzaCh0aGlzLmN1cnJlbnRUYWcuam9pbignJykpO1xuICAgIC8vbnVsbHMgdGhlIGN1cnJlbnQgdGFnIHNvIG5ldyBjb250ZW50IGF1ZGlvL3ZpZGVvIGNhbiBiZSBpbnNlcnRlZFxuICAgIHRoaXMuY3VycmVudFRhZyA9IFtdO1xuICB9XG5cbiAgLy9hZGQgPHNvdXJjZT4gb2YgdGhlIDxhdWRpbz4gPHZpZGVvIGFuZCBzcmMgb2YgdGhlIGltYWdlXG4gIGFkZFNvdXJjZSgpIHtcbiAgICBzd2l0Y2ggKHRoaXMudGFndHlwZSkge1xuICAgIGNhc2UgJ21wNCc6XG4gICAgICB0aGlzLmN1cnJlbnRUYWcucHVzaChcIjxzb3VyY2Ugc3JjPSdcIiArIHRoaXMuU09VTkRESVIgKyB0aGlzLmN1cnJlbnRzb3VuZFswXSArICcuJyArIHRoaXMuY3VycmVudHNvdW5kWzFdICsgXCInIHR5cGU9J2F1ZGlvL1wiKTsgLy8rcm93c3BsaXR0ZWRbaisxXStcIic+JztcbiAgICAgIHRoaXMuY3VycmVudFRhZy5wdXNoKFwibXBlZyc+XCIpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAncG5nJzpcbiAgICBjYXNlICdqcGcnOlxuICAgICAgdGhpcy5jdXJyZW50VGFnLnB1c2goXCIgc3JjPSdcIiArIHRoaXMuU09VTkRESVIgKyB0aGlzLmN1cnJlbnRzb3VuZFswXSArICcuJyArIHRoaXMuY3VycmVudHNvdW5kWzFdICsgXCInXCIpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndHh0JzogLy9sb2FkcyB0aGUgY29udGVudCBvZiB0aGUgdHh0IGZpbGVcbiAgICAgIHRoaXMuY3VycmVudFRhZy5wdXNoKFwiPHNwYW4gc3JjPSdcIiArIHRoaXMuU09VTkRESVIgKyB0aGlzLmN1cnJlbnRzb3VuZFswXSArICcuJyArIHRoaXMuY3VycmVudHNvdW5kWzFdICsgXCInLz5cIik7IC8vdG8gaG9sZCB0aGUgc291cmNlXG4gICAgICB0aGlzLmN1cnJlbnRUYWcucHVzaChcIjwvcD48c2NyaXB0PiQoJyN0ZXh0XCIgKyAodGhpcy5hdWRpb2lkIC0gMSkgKyBcIicpLmxvYWQoJ1wiICsgdGhpcy5TT1VORERJUiArIHRoaXMuY3VycmVudHNvdW5kWzBdICsgJy4nICsgdGhpcy5jdXJyZW50c291bmRbMV0gKyBcIicpPC9zY3JpcHQ+XCIpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRoaXMuY3VycmVudFRhZy5wdXNoKFwiPHNvdXJjZSBzcmM9J1wiICsgdGhpcy5TT1VORERJUiArIHRoaXMuY3VycmVudHNvdW5kWzBdICsgJy4nICsgdGhpcy5jdXJyZW50c291bmRbMV0gKyBcIicgdHlwZT0nYXVkaW8vXCIpOyAvLytyb3dzcGxpdHRlZFtqKzFdK1wiJz4nO1xuICAgICAgdGhpcy5jdXJyZW50VGFnLnB1c2godGhpcy5jdXJyZW50c291bmRbMV0gKyBcIic+XCIpO1xuICAgIH1cblxuICAgIHRoaXMubGFzdHNvdW5kbmFtZSA9IHRoaXMuY3VycmVudHNvdW5kWzBdO1xuICB9XG4gIC8qXG4gIFN0aW11bHVzLnByb3RvdHlwZS5maXJzdHNjcmVlbmF1ZGlvaWQ9IGZ1bmN0aW9uKClcbiAge1xuICAvLyAgICB0aGlzLmF1ZGlvaWQgPSAwXG4gIC8vICAgIHRoaXMuZmlyc3RzY3JlZW5hdWRpb2lkID0gdGhpcy5hdWRpb2lkO1xuICB9XG4gICovXG5cbiAgdHJhbnNsYXRlWnZ1ayhyb3dzcGxpdHRlZCwgcG9yYWRpdm50aWNpbmFob2RuZSwgcmVzdWx0LCBzbG91cGNlKSB7XG4gICAgbGV0IGogPSAxO1xuICAgIHRoaXMubGFzdHNvdW5kbmFtZSA9ICcnO1xuICAgIHRoaXMudGFndHlwZSA9IHJvd3NwbGl0dGVkW2pdLnNsaWNlKHJvd3NwbGl0dGVkW2pdLmxlbmd0aCAtIDMsIHJvd3NwbGl0dGVkW2pdLmxlbmd0aCkudG9Mb3dlckNhc2UoKTsvLyB8fCByb3dzcGxpdHRlZFtqXS5zdGFydHNXaXRoKCd2XycpO1xuXG4gICAgdGhpcy50YWdzID0gW107XG4gICAgdGhpcy5jdXJyZW50VGFnID0gW107XG4gICAgdGhpcy5jdXJyZW50c291bmQgPSBbXTtcbiAgICB0aGlzLmlucHV0aW5kZXggPSAwO1xuXG4gICAgLy9zbG91cGNlIC0gdXNlZCBvZnIgcGFpciB0ZXN0XG4gICAgaWYgKHNsb3VwY2UpIHRoaXMuY3VycmVudFRhZy5wdXNoKFwiPHRkIGNsYXNzPSdzdGltdWx1cyc+XCIpO1xuICAgIC8qIG9wZW4gaW5pdGlhbCB0YWcgKi9cbiAgICB0aGlzLm9wZW5BdWRpbyhzbG91cGNlLCByb3dzcGxpdHRlZFswXSk7XG5cbiAgICB3aGlsZSAoaiA8IHJvd3NwbGl0dGVkLmxlbmd0aCkge1xuICAgICAgdGhpcy5jdXJyZW50c291bmQgPSByb3dzcGxpdHRlZFtqXS5zcGxpdCgnLicpO1xuICAgICAgLy9pZiAoIXF1b3RlcylcbiAgICAgIGlmICgodGhpcy5sYXN0c291bmRuYW1lID09PSAnJykgfHwgKHRoaXMubGFzdHNvdW5kbmFtZSA9PT0gdGhpcy5jdXJyZW50c291bmRbMF0pKSB7XG4gICAgICAgIC8vYWRkIG9ubHkgbmV3IHNvdXJjZSB0eXBlICh3YXYsb2dnKSwgaWYgc291bmRuYW1lIGlzIHNhbWUgYW5kIG9ubHkgZXh0ZW5zaW9uIGRpZmZlcnNcbiAgICAgICAgdGhpcy5hZGRTb3VyY2UoKTtcbiAgICAgICAgaisrO1xuICAgICAgfSBlbHNlIGlmIChyb3dzcGxpdHRlZFtqXS5zdGFydHNXaXRoKCdbJykpIHtcbiAgICAgICAgLy9pbnRlcnZhbCBvZiBwcmV2aW91cyBzb3VuZFxuICAgICAgICB0aGlzLnJlcGFpckxhc3RBdWRpbyhyb3dzcGxpdHRlZFtqXSk7XG4gICAgICAgIGorKzsgLy9za2lwIHRoZSBpbnRlcnZhbCBpbiBbLi5dXG4gICAgICB9IGVsc2Ugey8vYWRkIG5ldyBhdWRpbywgZGlmZmVyZW50IHNvdW5kIGFuZCBpdCdzIHNvdXJjZSBpZiBkaWZmZXJlbnQgbmFtZVxuICAgICAgICB0aGlzLmNsb3NlQXVkaW8oKTtcbiAgICAgICAgdGhpcy5vcGVuQXVkaW8oc2xvdXBjZSwgcm93c3BsaXR0ZWRbMF0pO1xuICAgICAgICB0aGlzLmFkZFNvdXJjZSgpO1xuICAgICAgICBqKys7XG4gICAgICB9XG4gICAgICAvL2J1ZyBpbiBmZWF0dXJlICMyMzUsIG11c3QgcmFuZG9taXplIGFsc28gdGhlIGNhc2Ugb3JkZXJcbiAgICAgIC8vbGFzdHFjYXNlICs9IHJvd3NwbGl0dGVkW2pdICsgXCIuXCIgKyByb3dzcGxpdHRlZFtqICsgMV0gKyBcIiBcIjsgLy9hZGRzIHNvdW5kIHRvIHFjYXNlIHN0cnVjdHVyZVxuICAgIH1cbiAgICAvKiBjbG9zZSBsYXN0IHRhZyovXG4gICAgdGhpcy5jbG9zZUF1ZGlvKCk7XG5cbiAgICAvKiBzaHVmZmxlIGlmIG5lZWRlZCAqL1xuICAgIGlmIChwb3JhZGl2bnRpY2luYWhvZG5lKSB7XG4gICAgICAvL2tlZXAgZmlyc3QgPG5hdj4sXG4gICAgICBsZXQgbXl0YWcgPSB0aGlzLnRhZ3Muc2hpZnQoKTtcbiAgICAgIC8vc2h1ZmZsZVxuICAgICAgdGhpcy50YWdzLnNodWZmbGUoKTtcbiAgICAgIC8vYWRkcyBmaXJzdCA8bmF2PlxuICAgICAgdGhpcy50YWdzLnVuc2hpZnQobXl0YWcpO1xuICAgIH1cbiAgICAvL2dldHMgZmlsZW5hbWVzIGZyb20gdGhlIHRhZ3MgdG8ga2VlcCBvcmRlciBvZiBjYXNlcyBpbiByZXN1bHQsIGZpeCBvZiBmZWF0dXJlICMyMzUsIGZvciBzdGFydHMgZnJvbSAxLCAwIGlzIDxuYXY+LCBpZiBzbG91cGNlIHRoZW4gc3RhcnRzIGZyb20gMCAobm8gPG5hdj4gZWxlbWVudFxuICAgIC8vYWRkZWQgc2xvdXBjZT8wOjEgYW5kIHBhcnNlci5yZXN1bHQuYWRkQ2FzZSgpIGZpeCBidWcgIzI4NFxuICAgIGZvciAobGV0IGsgPSBzbG91cGNlID8gMCA6IDE7IGsgPCB0aGlzLnRhZ3MubGVuZ3RoOyBrKyspIHRoaXMucGFyZW50aW50ZXJwcmV0dGVyLnJlc3VsdC5hZGRDYXNlKEludGVycHJldGVyLmV4dHJhY3QodGhpcy50YWdzW2tdLm1hdGNoKC9zcmM9JyhbXiddKiknLylbMV0sIHRoaXMuU09VTkRESVIpICsgJyAnKTtcbiAgICAvL3RyYW5zbGF0ZWRSb3dzID0gdGFncy5qb2luXG4gICAgcmV0dXJuIHRoaXMudGFncy5qb2luKCcgJyk7XG4gIH1cblxuICAvKiBleGVjdXRpdmUgcGFydCBvZiB0aGUgYXVkaW9cbiAgIHBsYXlpbmcgcGFydCBvZiB0aGUgYXVkaW8sXG4gICBhdWRpbyBlbGVtZW50IGlzIGV4cGVjdGVkIGFzIHRoZSBjYWxsaW5nIGFyZ3VtZW50LFxuICAgZS5nLiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlBdWRpbycpICovXG4gIHN0b3BBdWRpbyhhdWRpbykge1xuICAgIGF1ZGlvLnBhdXNlKCk7XG4gIH1cblxuICAvKiBzdGFydHMgcGxheWluZyBhdCBcInN0YXJ0XCIgcG9zaXRpb24gYW5kIHN0b3BzIGFmdGVyIHNwZWNpZmllZCBkdXJhdGlvblxuICAgXCJzdGFydFwiIGFuZCBcImR1cmF0aW9uXCIgaW4gbWlsbGlzZWNvbmRzXG4gICAqL1xuICBwbGF5QXVkaW9QYXJ0KGF1ZGlvLCBzdGFydCwgZHVyYXRpb24pIHtcbiAgICBhdWRpby5jdXJyZW50VGltZSA9IHN0YXJ0IC8gMTAwMDsgLy9pbiBzZWNvbmRzXG4gICAgYXVkaW8ucGxheSgpO1xuICAgIHNldFRpbWVvdXQoc3RvcEF1ZGlvLCBkdXJhdGlvbiwgYXVkaW8pOyAvL2luIG1pbGxpc2Vjb25kc1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQWRBO0FBQ0E7QUFEQTtBQWdCQTtBQUNBO0FBWUE7QUFDQTtBQTlCQTtBQUNBO0FBREE7QUFnQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQTVDQTtBQUNBO0FBREE7QUE4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTs7OztBQXBEQTtBQUNBO0FBREE7QUEwREE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQVpBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQW5CQTtBQXFCQTtBQWpHQTtBQUNBO0FBREE7QUFxR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFiQTtBQWVBO0FBckhBO0FBQ0E7QUFEQTtBQXlIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVpBO0FBQ0E7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBM0lBO0FBQ0E7QUFEQTtBQStJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBZkE7QUFDQTtBQWlCQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFuS0E7QUFDQTtBQURBO0FBNEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTs7OztBQWpPQTtBQUNBO0FBREE7QUFzT0E7QUFDQTtBQUVBOzs7QUF6T0E7QUFDQTtBQURBO0FBNk9BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQWpQQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///YqAC\n");

/***/ }),

/***/ "components/heads.css":
/*!**********************************!*\
  !*** ./src/components/heads.css ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(/*! ../../node_modules/css-loader/lib/css-base.js */ \"I1BE\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \"nav {\\n  /* tomas update\\n  float:right!important;*/\\n  border-radius:8px!important;\\n}\\n\\nnav ul {\\n  margin: 0;\\n  padding: 0;\\n  list-style: none;\\n}\\n\\nnav a:link,\\nnav a:visited {\\n  color: #f0f0f0;\\n  text-decoration: none;\\n}\\n\\nnav li li a:link,\\nnav li li a:visited {\\n  color: #303030;\\n  text-decoration: none;\\n  padding: 6px 8px;\\n}\\n\\nnav a {\\n  display: block;\\n\\n}\\n\\nnav li {\\n  font-family: 'Lato', sans-serif;\\n  font-weight: 400;\\n  float: left;\\n  background-color: #393b3e;\\n  color:#f0f0f0 !important;\\n  margin-right: 0px;\\n  position: relative;\\n  padding: 0.9em;\\n}\\n\\nnav li li{\\n  width: 160px;\\n  z-index:4;\\n  background-color:#f0f0f0;\\n  padding: 0;\\n}\\n\\nnav li:hover {\\n  background-color: #55afff;\\n}\\nnav li li:hover {\\n  background-color: #757575;\\n}\\n\\n\\nnav ul ul  {\\n  position: absolute;\\n  visibility: hidden;\\n}\\n\\nnav ul ul ul{\\n  position: absolute;\\n  right: 100%;\\n  top: -2px;\\n  border: solid 1px transparent;\\n}\\n\\nnav li:hover > ul {\\n  visibility: visible;\\n}\\n\\nbody {\\n  line-height: 1.5;\\n  font-size:15px;\\n  margin:0;\\n}\\n\\n.vf-black {\\n  color:#fff!important;\\n  background-color:#000!important;\\n}\\n.vf-modal{z-index:3;display:none;padding-top:100px;position:fixed;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgb(0,0,0);background-color:rgba(0,0,0,0.4)}\\n.vf-modal-content{margin:auto;background-color:#fff;position:relative;padding:0;outline:0;width:600px}.w3-closebtn{text-decoration:none;float:right;font-size:24px;font-weight:bold;color:inherit}\\n.vf-sand{color:#000!important;background-color:#fdf5e6!important}\\n.vf-card-2{}\\n.vf-white{color:#000!important;background-color:#fff!important}\\n.vf-right-border{\\n  border-top-right-radius: 16px;\\n  border-bottom-right-radius: 16px;\\n}\\n\\n.\\n\\n/* Animations */\\n@keyframes SlideInRight {\\n  0% {\\n    transform: translateX(100%);\\n  }\\n\\n  100% {\\n    transform: translateX(0);\\n  }\\n}\\n\\n@keyframes SlideOutRight {\\n  0% {\\n    transform: translateX(0);\\n  }\\n\\n  100% {\\n    transform: translateX(100%);\\n  }\\n}\\n\\n@keyframes SlideInLeft {\\n  0% {\\n    transform: translateX(-100%);\\n  }\\n\\n  100% {\\n    transform: translateX(0);\\n  }\\n}\\n\\n@keyframes SlideOutLeft {\\n  0% {\\n    transform: translateX(0);\\n  }\\n\\n  100% {\\n    transform: translateX(-100%);\\n  }\\n}\\n\\n@keyframes FadeIn {\\n  0% {\\n    opacity: 0;\\n  }\\n\\n  100% {\\n    opacity: 1;\\n  }\\n}\\n\\n@keyframes FadeOut {\\n  0% {\\n    opacity: 1;\\n  }\\n\\n  100% {\\n    opacity: 0;\\n  }\\n}\\n\\n.animate-slide-in-right.au-enter {\\n  transform: translateX(100%);\\n}\\n\\n.animate-slide-in-right.au-enter-active {\\n  animation: SlideInRight 1s;\\n}\\n\\n.animate-slide-out-right.au-leave-active {\\n  animation: SlideOutRight 1s;\\n}\\n\\n.animate-slide-in-left.au-enter {\\n  transform: translateX(-100%);\\n}\\n\\n.animate-slide-in-left.au-enter-active {\\n  animation: SlideInLeft 1s;\\n}\\n\\n.animate-slide-out-left.au-leave-active {\\n  animation: SlideOutLeft 1s;\\n}\\n\\n.animate-fade-in.au-enter {\\n  opacity: 0;\\n}\\n\\n.animate-fade-in.au-enter-active {\\n  animation: FadeIn 1s;\\n}\\n\\n.animate-fade-out.au-leave-active {\\n  animation: FadeOut 1s;\\n}\\n\", \"\"]);\n\n// exports\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50cy9oZWFkcy5jc3MuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9oZWFkcy5jc3M/MDI1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKGZhbHNlKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIm5hdiB7XFxuICAvKiB0b21hcyB1cGRhdGVcXG4gIGZsb2F0OnJpZ2h0IWltcG9ydGFudDsqL1xcbiAgYm9yZGVyLXJhZGl1czo4cHghaW1wb3J0YW50O1xcbn1cXG5cXG5uYXYgdWwge1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMDtcXG4gIGxpc3Qtc3R5bGU6IG5vbmU7XFxufVxcblxcbm5hdiBhOmxpbmssXFxubmF2IGE6dmlzaXRlZCB7XFxuICBjb2xvcjogI2YwZjBmMDtcXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXG59XFxuXFxubmF2IGxpIGxpIGE6bGluayxcXG5uYXYgbGkgbGkgYTp2aXNpdGVkIHtcXG4gIGNvbG9yOiAjMzAzMDMwO1xcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbiAgcGFkZGluZzogNnB4IDhweDtcXG59XFxuXFxubmF2IGEge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuXFxufVxcblxcbm5hdiBsaSB7XFxuICBmb250LWZhbWlseTogJ0xhdG8nLCBzYW5zLXNlcmlmO1xcbiAgZm9udC13ZWlnaHQ6IDQwMDtcXG4gIGZsb2F0OiBsZWZ0O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzM5M2IzZTtcXG4gIGNvbG9yOiNmMGYwZjAgIWltcG9ydGFudDtcXG4gIG1hcmdpbi1yaWdodDogMHB4O1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgcGFkZGluZzogMC45ZW07XFxufVxcblxcbm5hdiBsaSBsaXtcXG4gIHdpZHRoOiAxNjBweDtcXG4gIHotaW5kZXg6NDtcXG4gIGJhY2tncm91bmQtY29sb3I6I2YwZjBmMDtcXG4gIHBhZGRpbmc6IDA7XFxufVxcblxcbm5hdiBsaTpob3ZlciB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTVhZmZmO1xcbn1cXG5uYXYgbGkgbGk6aG92ZXIge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzc1NzU3NTtcXG59XFxuXFxuXFxubmF2IHVsIHVsICB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB2aXNpYmlsaXR5OiBoaWRkZW47XFxufVxcblxcbm5hdiB1bCB1bCB1bHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHJpZ2h0OiAxMDAlO1xcbiAgdG9wOiAtMnB4O1xcbiAgYm9yZGVyOiBzb2xpZCAxcHggdHJhbnNwYXJlbnQ7XFxufVxcblxcbm5hdiBsaTpob3ZlciA+IHVsIHtcXG4gIHZpc2liaWxpdHk6IHZpc2libGU7XFxufVxcblxcbmJvZHkge1xcbiAgbGluZS1oZWlnaHQ6IDEuNTtcXG4gIGZvbnQtc2l6ZToxNXB4O1xcbiAgbWFyZ2luOjA7XFxufVxcblxcbi52Zi1ibGFjayB7XFxuICBjb2xvcjojZmZmIWltcG9ydGFudDtcXG4gIGJhY2tncm91bmQtY29sb3I6IzAwMCFpbXBvcnRhbnQ7XFxufVxcbi52Zi1tb2RhbHt6LWluZGV4OjM7ZGlzcGxheTpub25lO3BhZGRpbmctdG9wOjEwMHB4O3Bvc2l0aW9uOmZpeGVkO2xlZnQ6MDt0b3A6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO292ZXJmbG93OmF1dG87YmFja2dyb3VuZC1jb2xvcjpyZ2IoMCwwLDApO2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwLjQpfVxcbi52Zi1tb2RhbC1jb250ZW50e21hcmdpbjphdXRvO2JhY2tncm91bmQtY29sb3I6I2ZmZjtwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nOjA7b3V0bGluZTowO3dpZHRoOjYwMHB4fS53My1jbG9zZWJ0bnt0ZXh0LWRlY29yYXRpb246bm9uZTtmbG9hdDpyaWdodDtmb250LXNpemU6MjRweDtmb250LXdlaWdodDpib2xkO2NvbG9yOmluaGVyaXR9XFxuLnZmLXNhbmR7Y29sb3I6IzAwMCFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjojZmRmNWU2IWltcG9ydGFudH1cXG4udmYtY2FyZC0ye31cXG4udmYtd2hpdGV7Y29sb3I6IzAwMCFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjojZmZmIWltcG9ydGFudH1cXG4udmYtcmlnaHQtYm9yZGVye1xcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDE2cHg7XFxuICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMTZweDtcXG59XFxuXFxuLlxcblxcbi8qIEFuaW1hdGlvbnMgKi9cXG5Aa2V5ZnJhbWVzIFNsaWRlSW5SaWdodCB7XFxuICAwJSB7XFxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTtcXG4gIH1cXG5cXG4gIDEwMCUge1xcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7XFxuICB9XFxufVxcblxcbkBrZXlmcmFtZXMgU2xpZGVPdXRSaWdodCB7XFxuICAwJSB7XFxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTtcXG4gIH1cXG5cXG4gIDEwMCUge1xcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTAwJSk7XFxuICB9XFxufVxcblxcbkBrZXlmcmFtZXMgU2xpZGVJbkxlZnQge1xcbiAgMCUge1xcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpO1xcbiAgfVxcblxcbiAgMTAwJSB7XFxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTtcXG4gIH1cXG59XFxuXFxuQGtleWZyYW1lcyBTbGlkZU91dExlZnQge1xcbiAgMCUge1xcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7XFxuICB9XFxuXFxuICAxMDAlIHtcXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDAlKTtcXG4gIH1cXG59XFxuXFxuQGtleWZyYW1lcyBGYWRlSW4ge1xcbiAgMCUge1xcbiAgICBvcGFjaXR5OiAwO1xcbiAgfVxcblxcbiAgMTAwJSB7XFxuICAgIG9wYWNpdHk6IDE7XFxuICB9XFxufVxcblxcbkBrZXlmcmFtZXMgRmFkZU91dCB7XFxuICAwJSB7XFxuICAgIG9wYWNpdHk6IDE7XFxuICB9XFxuXFxuICAxMDAlIHtcXG4gICAgb3BhY2l0eTogMDtcXG4gIH1cXG59XFxuXFxuLmFuaW1hdGUtc2xpZGUtaW4tcmlnaHQuYXUtZW50ZXIge1xcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDEwMCUpO1xcbn1cXG5cXG4uYW5pbWF0ZS1zbGlkZS1pbi1yaWdodC5hdS1lbnRlci1hY3RpdmUge1xcbiAgYW5pbWF0aW9uOiBTbGlkZUluUmlnaHQgMXM7XFxufVxcblxcbi5hbmltYXRlLXNsaWRlLW91dC1yaWdodC5hdS1sZWF2ZS1hY3RpdmUge1xcbiAgYW5pbWF0aW9uOiBTbGlkZU91dFJpZ2h0IDFzO1xcbn1cXG5cXG4uYW5pbWF0ZS1zbGlkZS1pbi1sZWZ0LmF1LWVudGVyIHtcXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTAwJSk7XFxufVxcblxcbi5hbmltYXRlLXNsaWRlLWluLWxlZnQuYXUtZW50ZXItYWN0aXZlIHtcXG4gIGFuaW1hdGlvbjogU2xpZGVJbkxlZnQgMXM7XFxufVxcblxcbi5hbmltYXRlLXNsaWRlLW91dC1sZWZ0LmF1LWxlYXZlLWFjdGl2ZSB7XFxuICBhbmltYXRpb246IFNsaWRlT3V0TGVmdCAxcztcXG59XFxuXFxuLmFuaW1hdGUtZmFkZS1pbi5hdS1lbnRlciB7XFxuICBvcGFjaXR5OiAwO1xcbn1cXG5cXG4uYW5pbWF0ZS1mYWRlLWluLmF1LWVudGVyLWFjdGl2ZSB7XFxuICBhbmltYXRpb246IEZhZGVJbiAxcztcXG59XFxuXFxuLmFuaW1hdGUtZmFkZS1vdXQuYXUtbGVhdmUtYWN0aXZlIHtcXG4gIGFuaW1hdGlvbjogRmFkZU91dCAxcztcXG59XFxuXCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///components/heads.css\n");

/***/ }),

/***/ "components/nav-bar.html":
/*!*************************************!*\
  !*** ./src/components/nav-bar.html ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = \"<template bindable=\\\"router\\\">\\n  <require from=\\\"font-awesome/css/font-awesome.min.css\\\"></require>\\n\\n  <div class=\\\"w3-navbar w3-white w3-xlarge\\\">\\n    <table class=\\\"w3-left w3-padding-4 w3-margin-left w3-text-blue-grey\\\" style=\\\"line-height:0.2;font-family: Garamond,Serif\\\">\\n      <tr>\\n        <td rowspan=\\\"2\\\">\\n    <span class=\\\"w3-xlarge\\\" style=\\\"vertical-align:text-bottom\\\">\\n      <i>PSYCHO</i>\\n    </span>\\n        </td>\\n        <td>\\n    <span class=\\\"w3-small\\\">\\n      acoustic\\n    </span>\\n        </td>\\n      </tr>\\n      <tr>\\n        <td>\\n    <span class=\\\"w3-small\\\">\\n      visual\\n    </span>\\n        </td>\\n      </tr>\\n    </table>\\n    <a repeat.for=\\\"row of router.navigation\\\"\\n       class=\\\"${row.isActive ? 'w3-button w3-padding-4 w3-border-1 w3-white' : 'w3-button w3-padding-4'}\\\"\\n       href.bind=\\\"row.href\\\"\\n       t=\\\"[title]${row.title}\\\">\\n      <i class.bind=\\\"row.settings.icon\\\"></i>\\n      <i if.bind=\\\"row.settings.icon2\\\" class.bind=\\\"row.settings.icon2\\\"></i>\\n    </a>\\n  </div>\\n</template>\\n\\n\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50cy9uYXYtYmFyLmh0bWwuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9uYXYtYmFyLmh0bWw/ZTg3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IFwiPHRlbXBsYXRlIGJpbmRhYmxlPVxcXCJyb3V0ZXJcXFwiPlxcbiAgPHJlcXVpcmUgZnJvbT1cXFwiZm9udC1hd2Vzb21lL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzc1xcXCI+PC9yZXF1aXJlPlxcblxcbiAgPGRpdiBjbGFzcz1cXFwidzMtbmF2YmFyIHczLXdoaXRlIHczLXhsYXJnZVxcXCI+XFxuICAgIDx0YWJsZSBjbGFzcz1cXFwidzMtbGVmdCB3My1wYWRkaW5nLTQgdzMtbWFyZ2luLWxlZnQgdzMtdGV4dC1ibHVlLWdyZXlcXFwiIHN0eWxlPVxcXCJsaW5lLWhlaWdodDowLjI7Zm9udC1mYW1pbHk6IEdhcmFtb25kLFNlcmlmXFxcIj5cXG4gICAgICA8dHI+XFxuICAgICAgICA8dGQgcm93c3Bhbj1cXFwiMlxcXCI+XFxuICAgIDxzcGFuIGNsYXNzPVxcXCJ3My14bGFyZ2VcXFwiIHN0eWxlPVxcXCJ2ZXJ0aWNhbC1hbGlnbjp0ZXh0LWJvdHRvbVxcXCI+XFxuICAgICAgPGk+UFNZQ0hPPC9pPlxcbiAgICA8L3NwYW4+XFxuICAgICAgICA8L3RkPlxcbiAgICAgICAgPHRkPlxcbiAgICA8c3BhbiBjbGFzcz1cXFwidzMtc21hbGxcXFwiPlxcbiAgICAgIGFjb3VzdGljXFxuICAgIDwvc3Bhbj5cXG4gICAgICAgIDwvdGQ+XFxuICAgICAgPC90cj5cXG4gICAgICA8dHI+XFxuICAgICAgICA8dGQ+XFxuICAgIDxzcGFuIGNsYXNzPVxcXCJ3My1zbWFsbFxcXCI+XFxuICAgICAgdmlzdWFsXFxuICAgIDwvc3Bhbj5cXG4gICAgICAgIDwvdGQ+XFxuICAgICAgPC90cj5cXG4gICAgPC90YWJsZT5cXG4gICAgPGEgcmVwZWF0LmZvcj1cXFwicm93IG9mIHJvdXRlci5uYXZpZ2F0aW9uXFxcIlxcbiAgICAgICBjbGFzcz1cXFwiJHtyb3cuaXNBY3RpdmUgPyAndzMtYnV0dG9uIHczLXBhZGRpbmctNCB3My1ib3JkZXItMSB3My13aGl0ZScgOiAndzMtYnV0dG9uIHczLXBhZGRpbmctNCd9XFxcIlxcbiAgICAgICBocmVmLmJpbmQ9XFxcInJvdy5ocmVmXFxcIlxcbiAgICAgICB0PVxcXCJbdGl0bGVdJHtyb3cudGl0bGV9XFxcIj5cXG4gICAgICA8aSBjbGFzcy5iaW5kPVxcXCJyb3cuc2V0dGluZ3MuaWNvblxcXCI+PC9pPlxcbiAgICAgIDxpIGlmLmJpbmQ9XFxcInJvdy5zZXR0aW5ncy5pY29uMlxcXCIgY2xhc3MuYmluZD1cXFwicm93LnNldHRpbmdzLmljb24yXFxcIj48L2k+XFxuICAgIDwvYT5cXG4gIDwvZGl2PlxcbjwvdGVtcGxhdGU+XFxuXFxuXCI7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///components/nav-bar.html\n");

/***/ }),

/***/ "components/navigation.html":
/*!****************************************!*\
  !*** ./src/components/navigation.html ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = \"<template bindable=\\\"router\\\">\\n  <div class=\\\"w3-bar-block w3-black\\\">\\n    <!--a class='w3-bar-item w3-button w3-white w3-padding-0 w3-border-bottom' href=\\\"/\\\"><irep></irep>Repository Home</a-->\\n    <div class=\\\"w3-bar-item w3-white w3-padding-0 w3-border-bottom\\\">navigation:</div>\\n    <a repeat.for=\\\"row of router.navigation\\\" class=\\\"${row.isActive ? 'w3-bar-item w3-button w3-blue' : 'w3-bar-item w3-button w3-white'}\\\" href.bind=\\\"row.href\\\">${row.title}</a>\\n  </div>\\n</template>\\n\\n\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50cy9uYXZpZ2F0aW9uLmh0bWwuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9uYXZpZ2F0aW9uLmh0bWw/YTE5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IFwiPHRlbXBsYXRlIGJpbmRhYmxlPVxcXCJyb3V0ZXJcXFwiPlxcbiAgPGRpdiBjbGFzcz1cXFwidzMtYmFyLWJsb2NrIHczLWJsYWNrXFxcIj5cXG4gICAgPCEtLWEgY2xhc3M9J3czLWJhci1pdGVtIHczLWJ1dHRvbiB3My13aGl0ZSB3My1wYWRkaW5nLTAgdzMtYm9yZGVyLWJvdHRvbScgaHJlZj1cXFwiL1xcXCI+PGlyZXA+PC9pcmVwPlJlcG9zaXRvcnkgSG9tZTwvYS0tPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ3My1iYXItaXRlbSB3My13aGl0ZSB3My1wYWRkaW5nLTAgdzMtYm9yZGVyLWJvdHRvbVxcXCI+bmF2aWdhdGlvbjo8L2Rpdj5cXG4gICAgPGEgcmVwZWF0LmZvcj1cXFwicm93IG9mIHJvdXRlci5uYXZpZ2F0aW9uXFxcIiBjbGFzcz1cXFwiJHtyb3cuaXNBY3RpdmUgPyAndzMtYmFyLWl0ZW0gdzMtYnV0dG9uIHczLWJsdWUnIDogJ3czLWJhci1pdGVtIHczLWJ1dHRvbiB3My13aGl0ZSd9XFxcIiBocmVmLmJpbmQ9XFxcInJvdy5ocmVmXFxcIj4ke3Jvdy50aXRsZX08L2E+XFxuICA8L2Rpdj5cXG48L3RlbXBsYXRlPlxcblxcblwiOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///components/navigation.html\n");

/***/ }),

/***/ "components/sharedfooter.html":
/*!******************************************!*\
  !*** ./src/components/sharedfooter.html ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = \"<template>\\n<footer>\\n    <div class=\\\"w3-clear w3-margin-top\\\"></div>\\n    <!--div class=\\\"w3-center w3-black w3-bottom w3-bottombar\\\">\\n        Psychoacoustic test documentation at <a href=\\\"https://tomaskulhanek.gitbooks.io/psychoacoustic-test-system-documentation/content/\\\" target=\\\"_blank\\\">gitbooks.io</a>\\n    </div-->\\n</footer>\\n</template>\\n\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50cy9zaGFyZWRmb290ZXIuaHRtbC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NoYXJlZGZvb3Rlci5odG1sPzk1ZjYiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBcIjx0ZW1wbGF0ZT5cXG48Zm9vdGVyPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ3My1jbGVhciB3My1tYXJnaW4tdG9wXFxcIj48L2Rpdj5cXG4gICAgPCEtLWRpdiBjbGFzcz1cXFwidzMtY2VudGVyIHczLWJsYWNrIHczLWJvdHRvbSB3My1ib3R0b21iYXJcXFwiPlxcbiAgICAgICAgUHN5Y2hvYWNvdXN0aWMgdGVzdCBkb2N1bWVudGF0aW9uIGF0IDxhIGhyZWY9XFxcImh0dHBzOi8vdG9tYXNrdWxoYW5lay5naXRib29rcy5pby9wc3ljaG9hY291c3RpYy10ZXN0LXN5c3RlbS1kb2N1bWVudGF0aW9uL2NvbnRlbnQvXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+Z2l0Ym9va3MuaW88L2E+XFxuICAgIDwvZGl2LS0+XFxuPC9mb290ZXI+XFxuPC90ZW1wbGF0ZT5cXG5cIjsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///components/sharedfooter.html\n");

/***/ }),

/***/ "components/sharedheader.html":
/*!******************************************!*\
  !*** ./src/components/sharedheader.html ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = \"<template>\\n</template>\\n\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50cy9zaGFyZWRoZWFkZXIuaHRtbC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NoYXJlZGhlYWRlci5odG1sP2JiYzIiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBcIjx0ZW1wbGF0ZT5cXG48L3RlbXBsYXRlPlxcblwiOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///components/sharedheader.html\n");

/***/ })

}]);