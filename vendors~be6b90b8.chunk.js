(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendors~be6b90b8"],{

/***/ "aurelia-animator-css":
/*!***************************************************************************************!*\
  !*** ./node_modules/aurelia-animator-css/dist/native-modules/aurelia-animator-css.js ***!
  \***************************************************************************************/
/*! exports provided: CssAnimator, configure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CssAnimator\", function() { return CssAnimator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"configure\", function() { return configure; });\n/* harmony import */ var aurelia_templating__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-templating */ \"hij8\");\n/* harmony import */ var aurelia_pal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia-pal */ \"70NS\");\n\n\n\n\n\nvar CssAnimator = function () {\n  function CssAnimator() {\n    \n\n    this.useAnimationDoneClasses = false;\n    this.animationEnteredClass = 'au-entered';\n    this.animationLeftClass = 'au-left';\n    this.isAnimating = false;\n\n    this.verifyKeyframesExist = true;\n  }\n\n  CssAnimator.prototype._addMultipleEventListener = function _addMultipleEventListener(el, s, fn) {\n    var evts = s.split(' ');\n    for (var i = 0, ii = evts.length; i < ii; ++i) {\n      el.addEventListener(evts[i], fn, false);\n    }\n  };\n\n  CssAnimator.prototype._removeMultipleEventListener = function _removeMultipleEventListener(el, s, fn) {\n    var evts = s.split(' ');\n    for (var i = 0, ii = evts.length; i < ii; ++i) {\n      el.removeEventListener(evts[i], fn, false);\n    }\n  };\n\n  CssAnimator.prototype._getElementAnimationDelay = function _getElementAnimationDelay(element) {\n    var styl = aurelia_pal__WEBPACK_IMPORTED_MODULE_1__[\"DOM\"].getComputedStyle(element);\n    var prop = void 0;\n    var delay = void 0;\n\n    if (styl.getPropertyValue('animation-delay')) {\n      prop = 'animation-delay';\n    } else if (styl.getPropertyValue('-webkit-animation-delay')) {\n      prop = '-webkit-animation-delay';\n    } else if (styl.getPropertyValue('-moz-animation-delay')) {\n      prop = '-moz-animation-delay';\n    } else {\n      return 0;\n    }\n\n    delay = styl.getPropertyValue(prop);\n    delay = Number(delay.replace(/[^\\d\\.]/g, ''));\n\n    return delay * 1000;\n  };\n\n  CssAnimator.prototype._getElementAnimationNames = function _getElementAnimationNames(element) {\n    var styl = aurelia_pal__WEBPACK_IMPORTED_MODULE_1__[\"DOM\"].getComputedStyle(element);\n    var prefix = void 0;\n\n    if (styl.getPropertyValue('animation-name')) {\n      prefix = '';\n    } else if (styl.getPropertyValue('-webkit-animation-name')) {\n      prefix = '-webkit-';\n    } else if (styl.getPropertyValue('-moz-animation-name')) {\n      prefix = '-moz-';\n    } else {\n      return [];\n    }\n\n    var animationNames = styl.getPropertyValue(prefix + 'animation-name');\n    return animationNames ? animationNames.split(' ') : [];\n  };\n\n  CssAnimator.prototype._performSingleAnimate = function _performSingleAnimate(element, className) {\n    var _this = this;\n\n    this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].animateBegin, element);\n\n    return this.addClass(element, className, true).then(function (result) {\n      _this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].animateActive, element);\n\n      if (result !== false) {\n        return _this.removeClass(element, className, true).then(function () {\n          _this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].animateDone, element);\n        });\n      }\n\n      return false;\n    }).catch(function () {\n      _this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].animateTimeout, element);\n    });\n  };\n\n  CssAnimator.prototype._triggerDOMEvent = function _triggerDOMEvent(eventType, element) {\n    var evt = aurelia_pal__WEBPACK_IMPORTED_MODULE_1__[\"DOM\"].createCustomEvent(eventType, { bubbles: true, cancelable: true, detail: element });\n    aurelia_pal__WEBPACK_IMPORTED_MODULE_1__[\"DOM\"].dispatchEvent(evt);\n  };\n\n  CssAnimator.prototype._animationChangeWithValidKeyframe = function _animationChangeWithValidKeyframe(animationNames, prevAnimationNames) {\n    var newAnimationNames = animationNames.filter(function (name) {\n      return prevAnimationNames.indexOf(name) === -1;\n    });\n\n    if (newAnimationNames.length === 0) {\n      return false;\n    }\n\n    if (!this.verifyKeyframesExist) {\n      return true;\n    }\n\n    var keyframesRuleType = window.CSSRule.KEYFRAMES_RULE || window.CSSRule.MOZ_KEYFRAMES_RULE || window.CSSRule.WEBKIT_KEYFRAMES_RULE;\n\n    var styleSheets = document.styleSheets;\n\n    try {\n      for (var i = 0; i < styleSheets.length; ++i) {\n        var cssRules = null;\n\n        try {\n          cssRules = styleSheets[i].cssRules;\n        } catch (e) {}\n\n        if (!cssRules) {\n          continue;\n        }\n\n        for (var j = 0; j < cssRules.length; ++j) {\n          var cssRule = cssRules[j];\n\n          if (cssRule.type === keyframesRuleType) {\n            if (newAnimationNames.indexOf(cssRule.name) !== -1) {\n              return true;\n            }\n          }\n        }\n      }\n    } catch (e) {}\n\n    return false;\n  };\n\n  CssAnimator.prototype.animate = function animate(element, className) {\n    var _this2 = this;\n\n    if (Array.isArray(element)) {\n      return Promise.all(element.map(function (el) {\n        return _this2._performSingleAnimate(el, className);\n      }));\n    }\n\n    return this._performSingleAnimate(element, className);\n  };\n\n  CssAnimator.prototype.runSequence = function runSequence(animations) {\n    var _this3 = this;\n\n    this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].sequenceBegin, null);\n\n    return animations.reduce(function (p, anim) {\n      return p.then(function () {\n        return _this3.animate(anim.element, anim.className);\n      });\n    }, Promise.resolve(true)).then(function () {\n      _this3._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].sequenceDone, null);\n    });\n  };\n\n  CssAnimator.prototype._stateAnim = function _stateAnim(element, direction, doneClass) {\n    var _this4 = this;\n\n    var auClass = 'au-' + direction;\n    var auClassActive = auClass + '-active';\n    return new Promise(function (resolve, reject) {\n      var classList = element.classList;\n\n      _this4._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"][direction + 'Begin'], element);\n\n      if (_this4.useAnimationDoneClasses) {\n        classList.remove(_this4.animationEnteredClass);\n        classList.remove(_this4.animationLeftClass);\n      }\n\n      classList.add(auClass);\n      var prevAnimationNames = _this4._getElementAnimationNames(element);\n\n      var _animStart = void 0;\n      var animHasStarted = false;\n      _this4._addMultipleEventListener(element, 'webkitAnimationStart animationstart', _animStart = function animStart(evAnimStart) {\n        if (evAnimStart.target !== element) {\n          return;\n        }\n        animHasStarted = true;\n        _this4.isAnimating = true;\n\n        _this4._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"][direction + 'Active'], element);\n\n        evAnimStart.stopPropagation();\n\n        evAnimStart.target.removeEventListener(evAnimStart.type, _animStart);\n      }, false);\n\n      var _animEnd = void 0;\n      _this4._addMultipleEventListener(element, 'webkitAnimationEnd animationend', _animEnd = function animEnd(evAnimEnd) {\n        if (!animHasStarted) {\n          return;\n        }\n        if (evAnimEnd.target !== element) {\n          return;\n        }\n\n        evAnimEnd.stopPropagation();\n\n        classList.remove(auClassActive);\n        classList.remove(auClass);\n\n        evAnimEnd.target.removeEventListener(evAnimEnd.type, _animEnd);\n\n        if (_this4.useAnimationDoneClasses && doneClass !== undefined && doneClass !== null) {\n          classList.add(doneClass);\n        }\n\n        _this4.isAnimating = false;\n        _this4._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"][direction + 'Done'], element);\n\n        resolve(true);\n      }, false);\n\n      var parent = element.parentElement;\n      var attrib = 'data-animator-pending' + direction;\n\n      var cleanupAnimation = function cleanupAnimation() {\n        var animationNames = _this4._getElementAnimationNames(element);\n        if (!_this4._animationChangeWithValidKeyframe(animationNames, prevAnimationNames)) {\n          classList.remove(auClassActive);\n          classList.remove(auClass);\n\n          _this4._removeMultipleEventListener(element, 'webkitAnimationEnd animationend', _animEnd);\n          _this4._removeMultipleEventListener(element, 'webkitAnimationStart animationstart', _animStart);\n\n          _this4._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"][direction + 'Timeout'], element);\n          resolve(false);\n        }\n        parent && parent.setAttribute(attrib, +(parent.getAttribute(attrib) || 1) - 1);\n      };\n\n      if (parent !== null && parent !== undefined && (parent.classList.contains('au-stagger') || parent.classList.contains('au-stagger-' + direction))) {\n        var offset = +(parent.getAttribute(attrib) || 0);\n        parent.setAttribute(attrib, offset + 1);\n        var delay = _this4._getElementAnimationDelay(parent) * offset;\n        _this4._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].staggerNext, element);\n\n        setTimeout(function () {\n          classList.add(auClassActive);\n          cleanupAnimation();\n        }, delay);\n      } else {\n        classList.add(auClassActive);\n        cleanupAnimation();\n      }\n    });\n  };\n\n  CssAnimator.prototype.enter = function enter(element) {\n    return this._stateAnim(element, 'enter', this.animationEnteredClass);\n  };\n\n  CssAnimator.prototype.leave = function leave(element) {\n    return this._stateAnim(element, 'leave', this.animationLeftClass);\n  };\n\n  CssAnimator.prototype.removeClass = function removeClass(element, className) {\n    var _this5 = this;\n\n    var suppressEvents = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\n    return new Promise(function (resolve, reject) {\n      var classList = element.classList;\n\n      if (!classList.contains(className) && !classList.contains(className + '-add')) {\n        resolve(false);\n        return;\n      }\n\n      if (suppressEvents !== true) {\n        _this5._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].removeClassBegin, element);\n      }\n\n      if (classList.contains(className + '-add')) {\n        classList.remove(className + '-add');\n        classList.add(className);\n      }\n\n      classList.remove(className);\n      var prevAnimationNames = _this5._getElementAnimationNames(element);\n\n      var _animStart2 = void 0;\n      var animHasStarted = false;\n      _this5._addMultipleEventListener(element, 'webkitAnimationStart animationstart', _animStart2 = function animStart(evAnimStart) {\n        if (evAnimStart.target !== element) {\n          return;\n        }\n        animHasStarted = true;\n        _this5.isAnimating = true;\n\n        if (suppressEvents !== true) {\n          _this5._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].removeClassActive, element);\n        }\n\n        evAnimStart.stopPropagation();\n\n        evAnimStart.target.removeEventListener(evAnimStart.type, _animStart2);\n      }, false);\n\n      var _animEnd2 = void 0;\n      _this5._addMultipleEventListener(element, 'webkitAnimationEnd animationend', _animEnd2 = function animEnd(evAnimEnd) {\n        if (!animHasStarted) {\n          return;\n        }\n        if (evAnimEnd.target !== element) {\n          return;\n        }\n\n        if (!element.classList.contains(className + '-remove')) {\n          resolve(true);\n        }\n\n        evAnimEnd.stopPropagation();\n\n        classList.remove(className);\n\n        classList.remove(className + '-remove');\n\n        evAnimEnd.target.removeEventListener(evAnimEnd.type, _animEnd2);\n\n        _this5.isAnimating = false;\n\n        if (suppressEvents !== true) {\n          _this5._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].removeClassDone, element);\n        }\n\n        resolve(true);\n      }, false);\n\n      classList.add(className + '-remove');\n\n      var animationNames = _this5._getElementAnimationNames(element);\n      if (!_this5._animationChangeWithValidKeyframe(animationNames, prevAnimationNames)) {\n        classList.remove(className + '-remove');\n        classList.remove(className);\n\n        _this5._removeMultipleEventListener(element, 'webkitAnimationEnd animationend', _animEnd2);\n        _this5._removeMultipleEventListener(element, 'webkitAnimationStart animationstart', _animStart2);\n\n        if (suppressEvents !== true) {\n          _this5._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].removeClassTimeout, element);\n        }\n\n        resolve(false);\n      }\n    });\n  };\n\n  CssAnimator.prototype.addClass = function addClass(element, className) {\n    var _this6 = this;\n\n    var suppressEvents = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\n    return new Promise(function (resolve, reject) {\n      var classList = element.classList;\n\n      if (suppressEvents !== true) {\n        _this6._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].addClassBegin, element);\n      }\n\n      if (classList.contains(className + '-remove')) {\n        classList.remove(className + '-remove');\n        classList.remove(className);\n      }\n\n      var _animStart3 = void 0;\n      var animHasStarted = false;\n      _this6._addMultipleEventListener(element, 'webkitAnimationStart animationstart', _animStart3 = function animStart(evAnimStart) {\n        if (evAnimStart.target !== element) {\n          return;\n        }\n        animHasStarted = true;\n        _this6.isAnimating = true;\n\n        if (suppressEvents !== true) {\n          _this6._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].addClassActive, element);\n        }\n\n        evAnimStart.stopPropagation();\n\n        evAnimStart.target.removeEventListener(evAnimStart.type, _animStart3);\n      }, false);\n\n      var _animEnd3 = void 0;\n      _this6._addMultipleEventListener(element, 'webkitAnimationEnd animationend', _animEnd3 = function animEnd(evAnimEnd) {\n        if (!animHasStarted) {\n          return;\n        }\n        if (evAnimEnd.target !== element) {\n          return;\n        }\n\n        if (!element.classList.contains(className + '-add')) {\n          resolve(true);\n        }\n\n        evAnimEnd.stopPropagation();\n\n        classList.add(className);\n\n        classList.remove(className + '-add');\n\n        evAnimEnd.target.removeEventListener(evAnimEnd.type, _animEnd3);\n\n        _this6.isAnimating = false;\n\n        if (suppressEvents !== true) {\n          _this6._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].addClassDone, element);\n        }\n\n        resolve(true);\n      }, false);\n\n      var prevAnimationNames = _this6._getElementAnimationNames(element);\n\n      classList.add(className + '-add');\n\n      var animationNames = _this6._getElementAnimationNames(element);\n      if (!_this6._animationChangeWithValidKeyframe(animationNames, prevAnimationNames)) {\n        classList.remove(className + '-add');\n        classList.add(className);\n\n        _this6._removeMultipleEventListener(element, 'webkitAnimationEnd animationend', _animEnd3);\n        _this6._removeMultipleEventListener(element, 'webkitAnimationStart animationstart', _animStart3);\n\n        if (suppressEvents !== true) {\n          _this6._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].addClassTimeout, element);\n        }\n\n        resolve(false);\n      }\n    });\n  };\n\n  return CssAnimator;\n}();\n\nfunction configure(config, callback) {\n  var animator = config.container.get(CssAnimator);\n  config.container.get(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"TemplatingEngine\"]).configureAnimator(animator);\n  if (typeof callback === 'function') {\n    callback(animator);\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyZWxpYS1hbmltYXRvci1jc3MuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXVyZWxpYS1hbmltYXRvci1jc3MvZGlzdC9uYXRpdmUtbW9kdWxlcy9hdXJlbGlhLWFuaW1hdG9yLWNzcy5qcz9iYzczIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5pbXBvcnQgeyBhbmltYXRpb25FdmVudCwgVGVtcGxhdGluZ0VuZ2luZSB9IGZyb20gJ2F1cmVsaWEtdGVtcGxhdGluZyc7XG5pbXBvcnQgeyBET00gfSBmcm9tICdhdXJlbGlhLXBhbCc7XG5cbmV4cG9ydCB2YXIgQ3NzQW5pbWF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIENzc0FuaW1hdG9yKCkge1xuICAgIFxuXG4gICAgdGhpcy51c2VBbmltYXRpb25Eb25lQ2xhc3NlcyA9IGZhbHNlO1xuICAgIHRoaXMuYW5pbWF0aW9uRW50ZXJlZENsYXNzID0gJ2F1LWVudGVyZWQnO1xuICAgIHRoaXMuYW5pbWF0aW9uTGVmdENsYXNzID0gJ2F1LWxlZnQnO1xuICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcblxuICAgIHRoaXMudmVyaWZ5S2V5ZnJhbWVzRXhpc3QgPSB0cnVlO1xuICB9XG5cbiAgQ3NzQW5pbWF0b3IucHJvdG90eXBlLl9hZGRNdWx0aXBsZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiBfYWRkTXVsdGlwbGVFdmVudExpc3RlbmVyKGVsLCBzLCBmbikge1xuICAgIHZhciBldnRzID0gcy5zcGxpdCgnICcpO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGV2dHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldnRzW2ldLCBmbiwgZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBDc3NBbmltYXRvci5wcm90b3R5cGUuX3JlbW92ZU11bHRpcGxlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIF9yZW1vdmVNdWx0aXBsZUV2ZW50TGlzdGVuZXIoZWwsIHMsIGZuKSB7XG4gICAgdmFyIGV2dHMgPSBzLnNwbGl0KCcgJyk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZXZ0cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2dHNbaV0sIGZuLCBmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIENzc0FuaW1hdG9yLnByb3RvdHlwZS5fZ2V0RWxlbWVudEFuaW1hdGlvbkRlbGF5ID0gZnVuY3Rpb24gX2dldEVsZW1lbnRBbmltYXRpb25EZWxheShlbGVtZW50KSB7XG4gICAgdmFyIHN0eWwgPSBET00uZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICB2YXIgcHJvcCA9IHZvaWQgMDtcbiAgICB2YXIgZGVsYXkgPSB2b2lkIDA7XG5cbiAgICBpZiAoc3R5bC5nZXRQcm9wZXJ0eVZhbHVlKCdhbmltYXRpb24tZGVsYXknKSkge1xuICAgICAgcHJvcCA9ICdhbmltYXRpb24tZGVsYXknO1xuICAgIH0gZWxzZSBpZiAoc3R5bC5nZXRQcm9wZXJ0eVZhbHVlKCctd2Via2l0LWFuaW1hdGlvbi1kZWxheScpKSB7XG4gICAgICBwcm9wID0gJy13ZWJraXQtYW5pbWF0aW9uLWRlbGF5JztcbiAgICB9IGVsc2UgaWYgKHN0eWwuZ2V0UHJvcGVydHlWYWx1ZSgnLW1vei1hbmltYXRpb24tZGVsYXknKSkge1xuICAgICAgcHJvcCA9ICctbW96LWFuaW1hdGlvbi1kZWxheSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGRlbGF5ID0gc3R5bC5nZXRQcm9wZXJ0eVZhbHVlKHByb3ApO1xuICAgIGRlbGF5ID0gTnVtYmVyKGRlbGF5LnJlcGxhY2UoL1teXFxkXFwuXS9nLCAnJykpO1xuXG4gICAgcmV0dXJuIGRlbGF5ICogMTAwMDtcbiAgfTtcblxuICBDc3NBbmltYXRvci5wcm90b3R5cGUuX2dldEVsZW1lbnRBbmltYXRpb25OYW1lcyA9IGZ1bmN0aW9uIF9nZXRFbGVtZW50QW5pbWF0aW9uTmFtZXMoZWxlbWVudCkge1xuICAgIHZhciBzdHlsID0gRE9NLmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgdmFyIHByZWZpeCA9IHZvaWQgMDtcblxuICAgIGlmIChzdHlsLmdldFByb3BlcnR5VmFsdWUoJ2FuaW1hdGlvbi1uYW1lJykpIHtcbiAgICAgIHByZWZpeCA9ICcnO1xuICAgIH0gZWxzZSBpZiAoc3R5bC5nZXRQcm9wZXJ0eVZhbHVlKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJykpIHtcbiAgICAgIHByZWZpeCA9ICctd2Via2l0LSc7XG4gICAgfSBlbHNlIGlmIChzdHlsLmdldFByb3BlcnR5VmFsdWUoJy1tb3otYW5pbWF0aW9uLW5hbWUnKSkge1xuICAgICAgcHJlZml4ID0gJy1tb3otJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHZhciBhbmltYXRpb25OYW1lcyA9IHN0eWwuZ2V0UHJvcGVydHlWYWx1ZShwcmVmaXggKyAnYW5pbWF0aW9uLW5hbWUnKTtcbiAgICByZXR1cm4gYW5pbWF0aW9uTmFtZXMgPyBhbmltYXRpb25OYW1lcy5zcGxpdCgnICcpIDogW107XG4gIH07XG5cbiAgQ3NzQW5pbWF0b3IucHJvdG90eXBlLl9wZXJmb3JtU2luZ2xlQW5pbWF0ZSA9IGZ1bmN0aW9uIF9wZXJmb3JtU2luZ2xlQW5pbWF0ZShlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LmFuaW1hdGVCZWdpbiwgZWxlbWVudCk7XG5cbiAgICByZXR1cm4gdGhpcy5hZGRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUsIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgX3RoaXMuX3RyaWdnZXJET01FdmVudChhbmltYXRpb25FdmVudC5hbmltYXRlQWN0aXZlLCBlbGVtZW50KTtcblxuICAgICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSwgdHJ1ZSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMuX3RyaWdnZXJET01FdmVudChhbmltYXRpb25FdmVudC5hbmltYXRlRG9uZSwgZWxlbWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuX3RyaWdnZXJET01FdmVudChhbmltYXRpb25FdmVudC5hbmltYXRlVGltZW91dCwgZWxlbWVudCk7XG4gICAgfSk7XG4gIH07XG5cbiAgQ3NzQW5pbWF0b3IucHJvdG90eXBlLl90cmlnZ2VyRE9NRXZlbnQgPSBmdW5jdGlvbiBfdHJpZ2dlckRPTUV2ZW50KGV2ZW50VHlwZSwgZWxlbWVudCkge1xuICAgIHZhciBldnQgPSBET00uY3JlYXRlQ3VzdG9tRXZlbnQoZXZlbnRUeXBlLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUsIGRldGFpbDogZWxlbWVudCB9KTtcbiAgICBET00uZGlzcGF0Y2hFdmVudChldnQpO1xuICB9O1xuXG4gIENzc0FuaW1hdG9yLnByb3RvdHlwZS5fYW5pbWF0aW9uQ2hhbmdlV2l0aFZhbGlkS2V5ZnJhbWUgPSBmdW5jdGlvbiBfYW5pbWF0aW9uQ2hhbmdlV2l0aFZhbGlkS2V5ZnJhbWUoYW5pbWF0aW9uTmFtZXMsIHByZXZBbmltYXRpb25OYW1lcykge1xuICAgIHZhciBuZXdBbmltYXRpb25OYW1lcyA9IGFuaW1hdGlvbk5hbWVzLmZpbHRlcihmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV0dXJuIHByZXZBbmltYXRpb25OYW1lcy5pbmRleE9mKG5hbWUpID09PSAtMTtcbiAgICB9KTtcblxuICAgIGlmIChuZXdBbmltYXRpb25OYW1lcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudmVyaWZ5S2V5ZnJhbWVzRXhpc3QpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBrZXlmcmFtZXNSdWxlVHlwZSA9IHdpbmRvdy5DU1NSdWxlLktFWUZSQU1FU19SVUxFIHx8IHdpbmRvdy5DU1NSdWxlLk1PWl9LRVlGUkFNRVNfUlVMRSB8fCB3aW5kb3cuQ1NTUnVsZS5XRUJLSVRfS0VZRlJBTUVTX1JVTEU7XG5cbiAgICB2YXIgc3R5bGVTaGVldHMgPSBkb2N1bWVudC5zdHlsZVNoZWV0cztcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlU2hlZXRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBjc3NSdWxlcyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjc3NSdWxlcyA9IHN0eWxlU2hlZXRzW2ldLmNzc1J1bGVzO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgICAgIGlmICghY3NzUnVsZXMpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY3NzUnVsZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICB2YXIgY3NzUnVsZSA9IGNzc1J1bGVzW2pdO1xuXG4gICAgICAgICAgaWYgKGNzc1J1bGUudHlwZSA9PT0ga2V5ZnJhbWVzUnVsZVR5cGUpIHtcbiAgICAgICAgICAgIGlmIChuZXdBbmltYXRpb25OYW1lcy5pbmRleE9mKGNzc1J1bGUubmFtZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgQ3NzQW5pbWF0b3IucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbiBhbmltYXRlKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZWxlbWVudCkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChlbGVtZW50Lm1hcChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi5fcGVyZm9ybVNpbmdsZUFuaW1hdGUoZWwsIGNsYXNzTmFtZSk7XG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3BlcmZvcm1TaW5nbGVBbmltYXRlKGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gIH07XG5cbiAgQ3NzQW5pbWF0b3IucHJvdG90eXBlLnJ1blNlcXVlbmNlID0gZnVuY3Rpb24gcnVuU2VxdWVuY2UoYW5pbWF0aW9ucykge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdGhpcy5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LnNlcXVlbmNlQmVnaW4sIG51bGwpO1xuXG4gICAgcmV0dXJuIGFuaW1hdGlvbnMucmVkdWNlKGZ1bmN0aW9uIChwLCBhbmltKSB7XG4gICAgICByZXR1cm4gcC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMy5hbmltYXRlKGFuaW0uZWxlbWVudCwgYW5pbS5jbGFzc05hbWUpO1xuICAgICAgfSk7XG4gICAgfSwgUHJvbWlzZS5yZXNvbHZlKHRydWUpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzMy5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LnNlcXVlbmNlRG9uZSwgbnVsbCk7XG4gICAgfSk7XG4gIH07XG5cbiAgQ3NzQW5pbWF0b3IucHJvdG90eXBlLl9zdGF0ZUFuaW0gPSBmdW5jdGlvbiBfc3RhdGVBbmltKGVsZW1lbnQsIGRpcmVjdGlvbiwgZG9uZUNsYXNzKSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICB2YXIgYXVDbGFzcyA9ICdhdS0nICsgZGlyZWN0aW9uO1xuICAgIHZhciBhdUNsYXNzQWN0aXZlID0gYXVDbGFzcyArICctYWN0aXZlJztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGNsYXNzTGlzdCA9IGVsZW1lbnQuY2xhc3NMaXN0O1xuXG4gICAgICBfdGhpczQuX3RyaWdnZXJET01FdmVudChhbmltYXRpb25FdmVudFtkaXJlY3Rpb24gKyAnQmVnaW4nXSwgZWxlbWVudCk7XG5cbiAgICAgIGlmIChfdGhpczQudXNlQW5pbWF0aW9uRG9uZUNsYXNzZXMpIHtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShfdGhpczQuYW5pbWF0aW9uRW50ZXJlZENsYXNzKTtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShfdGhpczQuYW5pbWF0aW9uTGVmdENsYXNzKTtcbiAgICAgIH1cblxuICAgICAgY2xhc3NMaXN0LmFkZChhdUNsYXNzKTtcbiAgICAgIHZhciBwcmV2QW5pbWF0aW9uTmFtZXMgPSBfdGhpczQuX2dldEVsZW1lbnRBbmltYXRpb25OYW1lcyhlbGVtZW50KTtcblxuICAgICAgdmFyIF9hbmltU3RhcnQgPSB2b2lkIDA7XG4gICAgICB2YXIgYW5pbUhhc1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgIF90aGlzNC5fYWRkTXVsdGlwbGVFdmVudExpc3RlbmVyKGVsZW1lbnQsICd3ZWJraXRBbmltYXRpb25TdGFydCBhbmltYXRpb25zdGFydCcsIF9hbmltU3RhcnQgPSBmdW5jdGlvbiBhbmltU3RhcnQoZXZBbmltU3RhcnQpIHtcbiAgICAgICAgaWYgKGV2QW5pbVN0YXJ0LnRhcmdldCAhPT0gZWxlbWVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhbmltSGFzU3RhcnRlZCA9IHRydWU7XG4gICAgICAgIF90aGlzNC5pc0FuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgICAgX3RoaXM0Ll90cmlnZ2VyRE9NRXZlbnQoYW5pbWF0aW9uRXZlbnRbZGlyZWN0aW9uICsgJ0FjdGl2ZSddLCBlbGVtZW50KTtcblxuICAgICAgICBldkFuaW1TdGFydC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBldkFuaW1TdGFydC50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldkFuaW1TdGFydC50eXBlLCBfYW5pbVN0YXJ0KTtcbiAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgdmFyIF9hbmltRW5kID0gdm9pZCAwO1xuICAgICAgX3RoaXM0Ll9hZGRNdWx0aXBsZUV2ZW50TGlzdGVuZXIoZWxlbWVudCwgJ3dlYmtpdEFuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBfYW5pbUVuZCA9IGZ1bmN0aW9uIGFuaW1FbmQoZXZBbmltRW5kKSB7XG4gICAgICAgIGlmICghYW5pbUhhc1N0YXJ0ZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2QW5pbUVuZC50YXJnZXQgIT09IGVsZW1lbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBldkFuaW1FbmQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShhdUNsYXNzQWN0aXZlKTtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShhdUNsYXNzKTtcblxuICAgICAgICBldkFuaW1FbmQudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZBbmltRW5kLnR5cGUsIF9hbmltRW5kKTtcblxuICAgICAgICBpZiAoX3RoaXM0LnVzZUFuaW1hdGlvbkRvbmVDbGFzc2VzICYmIGRvbmVDbGFzcyAhPT0gdW5kZWZpbmVkICYmIGRvbmVDbGFzcyAhPT0gbnVsbCkge1xuICAgICAgICAgIGNsYXNzTGlzdC5hZGQoZG9uZUNsYXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzNC5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICBfdGhpczQuX3RyaWdnZXJET01FdmVudChhbmltYXRpb25FdmVudFtkaXJlY3Rpb24gKyAnRG9uZSddLCBlbGVtZW50KTtcblxuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgdmFyIGF0dHJpYiA9ICdkYXRhLWFuaW1hdG9yLXBlbmRpbmcnICsgZGlyZWN0aW9uO1xuXG4gICAgICB2YXIgY2xlYW51cEFuaW1hdGlvbiA9IGZ1bmN0aW9uIGNsZWFudXBBbmltYXRpb24oKSB7XG4gICAgICAgIHZhciBhbmltYXRpb25OYW1lcyA9IF90aGlzNC5fZ2V0RWxlbWVudEFuaW1hdGlvbk5hbWVzKGVsZW1lbnQpO1xuICAgICAgICBpZiAoIV90aGlzNC5fYW5pbWF0aW9uQ2hhbmdlV2l0aFZhbGlkS2V5ZnJhbWUoYW5pbWF0aW9uTmFtZXMsIHByZXZBbmltYXRpb25OYW1lcykpIHtcbiAgICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKGF1Q2xhc3NBY3RpdmUpO1xuICAgICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoYXVDbGFzcyk7XG5cbiAgICAgICAgICBfdGhpczQuX3JlbW92ZU11bHRpcGxlRXZlbnRMaXN0ZW5lcihlbGVtZW50LCAnd2Via2l0QW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZCcsIF9hbmltRW5kKTtcbiAgICAgICAgICBfdGhpczQuX3JlbW92ZU11bHRpcGxlRXZlbnRMaXN0ZW5lcihlbGVtZW50LCAnd2Via2l0QW5pbWF0aW9uU3RhcnQgYW5pbWF0aW9uc3RhcnQnLCBfYW5pbVN0YXJ0KTtcblxuICAgICAgICAgIF90aGlzNC5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50W2RpcmVjdGlvbiArICdUaW1lb3V0J10sIGVsZW1lbnQpO1xuICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHBhcmVudCAmJiBwYXJlbnQuc2V0QXR0cmlidXRlKGF0dHJpYiwgKyhwYXJlbnQuZ2V0QXR0cmlidXRlKGF0dHJpYikgfHwgMSkgLSAxKTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChwYXJlbnQgIT09IG51bGwgJiYgcGFyZW50ICE9PSB1bmRlZmluZWQgJiYgKHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2F1LXN0YWdnZXInKSB8fCBwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdS1zdGFnZ2VyLScgKyBkaXJlY3Rpb24pKSkge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gKyhwYXJlbnQuZ2V0QXR0cmlidXRlKGF0dHJpYikgfHwgMCk7XG4gICAgICAgIHBhcmVudC5zZXRBdHRyaWJ1dGUoYXR0cmliLCBvZmZzZXQgKyAxKTtcbiAgICAgICAgdmFyIGRlbGF5ID0gX3RoaXM0Ll9nZXRFbGVtZW50QW5pbWF0aW9uRGVsYXkocGFyZW50KSAqIG9mZnNldDtcbiAgICAgICAgX3RoaXM0Ll90cmlnZ2VyRE9NRXZlbnQoYW5pbWF0aW9uRXZlbnQuc3RhZ2dlck5leHQsIGVsZW1lbnQpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNsYXNzTGlzdC5hZGQoYXVDbGFzc0FjdGl2ZSk7XG4gICAgICAgICAgY2xlYW51cEFuaW1hdGlvbigpO1xuICAgICAgICB9LCBkZWxheSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGFzc0xpc3QuYWRkKGF1Q2xhc3NBY3RpdmUpO1xuICAgICAgICBjbGVhbnVwQW5pbWF0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgQ3NzQW5pbWF0b3IucHJvdG90eXBlLmVudGVyID0gZnVuY3Rpb24gZW50ZXIoZWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLl9zdGF0ZUFuaW0oZWxlbWVudCwgJ2VudGVyJywgdGhpcy5hbmltYXRpb25FbnRlcmVkQ2xhc3MpO1xuICB9O1xuXG4gIENzc0FuaW1hdG9yLnByb3RvdHlwZS5sZWF2ZSA9IGZ1bmN0aW9uIGxlYXZlKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhdGVBbmltKGVsZW1lbnQsICdsZWF2ZScsIHRoaXMuYW5pbWF0aW9uTGVmdENsYXNzKTtcbiAgfTtcblxuICBDc3NBbmltYXRvci5wcm90b3R5cGUucmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiByZW1vdmVDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgIHZhciBzdXBwcmVzc0V2ZW50cyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzJdO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBjbGFzc0xpc3QgPSBlbGVtZW50LmNsYXNzTGlzdDtcblxuICAgICAgaWYgKCFjbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSAmJiAhY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSArICctYWRkJykpIHtcbiAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHN1cHByZXNzRXZlbnRzICE9PSB0cnVlKSB7XG4gICAgICAgIF90aGlzNS5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LnJlbW92ZUNsYXNzQmVnaW4sIGVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSArICctYWRkJykpIHtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUgKyAnLWFkZCcpO1xuICAgICAgICBjbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICAgIHZhciBwcmV2QW5pbWF0aW9uTmFtZXMgPSBfdGhpczUuX2dldEVsZW1lbnRBbmltYXRpb25OYW1lcyhlbGVtZW50KTtcblxuICAgICAgdmFyIF9hbmltU3RhcnQyID0gdm9pZCAwO1xuICAgICAgdmFyIGFuaW1IYXNTdGFydGVkID0gZmFsc2U7XG4gICAgICBfdGhpczUuX2FkZE11bHRpcGxlRXZlbnRMaXN0ZW5lcihlbGVtZW50LCAnd2Via2l0QW5pbWF0aW9uU3RhcnQgYW5pbWF0aW9uc3RhcnQnLCBfYW5pbVN0YXJ0MiA9IGZ1bmN0aW9uIGFuaW1TdGFydChldkFuaW1TdGFydCkge1xuICAgICAgICBpZiAoZXZBbmltU3RhcnQudGFyZ2V0ICE9PSBlbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFuaW1IYXNTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgX3RoaXM1LmlzQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICBpZiAoc3VwcHJlc3NFdmVudHMgIT09IHRydWUpIHtcbiAgICAgICAgICBfdGhpczUuX3RyaWdnZXJET01FdmVudChhbmltYXRpb25FdmVudC5yZW1vdmVDbGFzc0FjdGl2ZSwgZWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBldkFuaW1TdGFydC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBldkFuaW1TdGFydC50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldkFuaW1TdGFydC50eXBlLCBfYW5pbVN0YXJ0Mik7XG4gICAgICB9LCBmYWxzZSk7XG5cbiAgICAgIHZhciBfYW5pbUVuZDIgPSB2b2lkIDA7XG4gICAgICBfdGhpczUuX2FkZE11bHRpcGxlRXZlbnRMaXN0ZW5lcihlbGVtZW50LCAnd2Via2l0QW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZCcsIF9hbmltRW5kMiA9IGZ1bmN0aW9uIGFuaW1FbmQoZXZBbmltRW5kKSB7XG4gICAgICAgIGlmICghYW5pbUhhc1N0YXJ0ZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2QW5pbUVuZC50YXJnZXQgIT09IGVsZW1lbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSArICctcmVtb3ZlJykpIHtcbiAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZBbmltRW5kLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcblxuICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSArICctcmVtb3ZlJyk7XG5cbiAgICAgICAgZXZBbmltRW5kLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2QW5pbUVuZC50eXBlLCBfYW5pbUVuZDIpO1xuXG4gICAgICAgIF90aGlzNS5pc0FuaW1hdGluZyA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChzdXBwcmVzc0V2ZW50cyAhPT0gdHJ1ZSkge1xuICAgICAgICAgIF90aGlzNS5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LnJlbW92ZUNsYXNzRG9uZSwgZWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICBjbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSArICctcmVtb3ZlJyk7XG5cbiAgICAgIHZhciBhbmltYXRpb25OYW1lcyA9IF90aGlzNS5fZ2V0RWxlbWVudEFuaW1hdGlvbk5hbWVzKGVsZW1lbnQpO1xuICAgICAgaWYgKCFfdGhpczUuX2FuaW1hdGlvbkNoYW5nZVdpdGhWYWxpZEtleWZyYW1lKGFuaW1hdGlvbk5hbWVzLCBwcmV2QW5pbWF0aW9uTmFtZXMpKSB7XG4gICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lICsgJy1yZW1vdmUnKTtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuXG4gICAgICAgIF90aGlzNS5fcmVtb3ZlTXVsdGlwbGVFdmVudExpc3RlbmVyKGVsZW1lbnQsICd3ZWJraXRBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgX2FuaW1FbmQyKTtcbiAgICAgICAgX3RoaXM1Ll9yZW1vdmVNdWx0aXBsZUV2ZW50TGlzdGVuZXIoZWxlbWVudCwgJ3dlYmtpdEFuaW1hdGlvblN0YXJ0IGFuaW1hdGlvbnN0YXJ0JywgX2FuaW1TdGFydDIpO1xuXG4gICAgICAgIGlmIChzdXBwcmVzc0V2ZW50cyAhPT0gdHJ1ZSkge1xuICAgICAgICAgIF90aGlzNS5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LnJlbW92ZUNsYXNzVGltZW91dCwgZWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBDc3NBbmltYXRvci5wcm90b3R5cGUuYWRkQ2xhc3MgPSBmdW5jdGlvbiBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIHZhciBzdXBwcmVzc0V2ZW50cyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzJdO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBjbGFzc0xpc3QgPSBlbGVtZW50LmNsYXNzTGlzdDtcblxuICAgICAgaWYgKHN1cHByZXNzRXZlbnRzICE9PSB0cnVlKSB7XG4gICAgICAgIF90aGlzNi5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LmFkZENsYXNzQmVnaW4sIGVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSArICctcmVtb3ZlJykpIHtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUgKyAnLXJlbW92ZScpO1xuICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBfYW5pbVN0YXJ0MyA9IHZvaWQgMDtcbiAgICAgIHZhciBhbmltSGFzU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgX3RoaXM2Ll9hZGRNdWx0aXBsZUV2ZW50TGlzdGVuZXIoZWxlbWVudCwgJ3dlYmtpdEFuaW1hdGlvblN0YXJ0IGFuaW1hdGlvbnN0YXJ0JywgX2FuaW1TdGFydDMgPSBmdW5jdGlvbiBhbmltU3RhcnQoZXZBbmltU3RhcnQpIHtcbiAgICAgICAgaWYgKGV2QW5pbVN0YXJ0LnRhcmdldCAhPT0gZWxlbWVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhbmltSGFzU3RhcnRlZCA9IHRydWU7XG4gICAgICAgIF90aGlzNi5pc0FuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgICAgaWYgKHN1cHByZXNzRXZlbnRzICE9PSB0cnVlKSB7XG4gICAgICAgICAgX3RoaXM2Ll90cmlnZ2VyRE9NRXZlbnQoYW5pbWF0aW9uRXZlbnQuYWRkQ2xhc3NBY3RpdmUsIGVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZBbmltU3RhcnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgZXZBbmltU3RhcnQudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZBbmltU3RhcnQudHlwZSwgX2FuaW1TdGFydDMpO1xuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICB2YXIgX2FuaW1FbmQzID0gdm9pZCAwO1xuICAgICAgX3RoaXM2Ll9hZGRNdWx0aXBsZUV2ZW50TGlzdGVuZXIoZWxlbWVudCwgJ3dlYmtpdEFuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBfYW5pbUVuZDMgPSBmdW5jdGlvbiBhbmltRW5kKGV2QW5pbUVuZCkge1xuICAgICAgICBpZiAoIWFuaW1IYXNTdGFydGVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldkFuaW1FbmQudGFyZ2V0ICE9PSBlbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUgKyAnLWFkZCcpKSB7XG4gICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGV2QW5pbUVuZC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBjbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG5cbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUgKyAnLWFkZCcpO1xuXG4gICAgICAgIGV2QW5pbUVuZC50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldkFuaW1FbmQudHlwZSwgX2FuaW1FbmQzKTtcblxuICAgICAgICBfdGhpczYuaXNBbmltYXRpbmcgPSBmYWxzZTtcblxuICAgICAgICBpZiAoc3VwcHJlc3NFdmVudHMgIT09IHRydWUpIHtcbiAgICAgICAgICBfdGhpczYuX3RyaWdnZXJET01FdmVudChhbmltYXRpb25FdmVudC5hZGRDbGFzc0RvbmUsIGVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgdmFyIHByZXZBbmltYXRpb25OYW1lcyA9IF90aGlzNi5fZ2V0RWxlbWVudEFuaW1hdGlvbk5hbWVzKGVsZW1lbnQpO1xuXG4gICAgICBjbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSArICctYWRkJyk7XG5cbiAgICAgIHZhciBhbmltYXRpb25OYW1lcyA9IF90aGlzNi5fZ2V0RWxlbWVudEFuaW1hdGlvbk5hbWVzKGVsZW1lbnQpO1xuICAgICAgaWYgKCFfdGhpczYuX2FuaW1hdGlvbkNoYW5nZVdpdGhWYWxpZEtleWZyYW1lKGFuaW1hdGlvbk5hbWVzLCBwcmV2QW5pbWF0aW9uTmFtZXMpKSB7XG4gICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lICsgJy1hZGQnKTtcbiAgICAgICAgY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXG4gICAgICAgIF90aGlzNi5fcmVtb3ZlTXVsdGlwbGVFdmVudExpc3RlbmVyKGVsZW1lbnQsICd3ZWJraXRBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgX2FuaW1FbmQzKTtcbiAgICAgICAgX3RoaXM2Ll9yZW1vdmVNdWx0aXBsZUV2ZW50TGlzdGVuZXIoZWxlbWVudCwgJ3dlYmtpdEFuaW1hdGlvblN0YXJ0IGFuaW1hdGlvbnN0YXJ0JywgX2FuaW1TdGFydDMpO1xuXG4gICAgICAgIGlmIChzdXBwcmVzc0V2ZW50cyAhPT0gdHJ1ZSkge1xuICAgICAgICAgIF90aGlzNi5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LmFkZENsYXNzVGltZW91dCwgZWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gQ3NzQW5pbWF0b3I7XG59KCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmUoY29uZmlnLCBjYWxsYmFjaykge1xuICB2YXIgYW5pbWF0b3IgPSBjb25maWcuY29udGFpbmVyLmdldChDc3NBbmltYXRvcik7XG4gIGNvbmZpZy5jb250YWluZXIuZ2V0KFRlbXBsYXRpbmdFbmdpbmUpLmNvbmZpZ3VyZUFuaW1hdG9yKGFuaW1hdG9yKTtcbiAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrKGFuaW1hdG9yKTtcbiAgfVxufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///aurelia-animator-css\n");

/***/ })

}]);